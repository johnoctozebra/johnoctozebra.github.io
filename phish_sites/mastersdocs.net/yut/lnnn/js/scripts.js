(function(n,t){function i(t,i){var u,f,e,o=t.nodeName.toLowerCase();return"area"===o?(u=t.parentNode,f=u.name,!t.href||!f||u.nodeName.toLowerCase()!=="map")?!1:(e=n("img[usemap=#"+f+"]")[0],!!e&&r(e)):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||i:i)&&r(t)}function r(t){return n.expr.filters.visible(t)&&!n(t).parents().addBack().filter(function(){return n.css(this,"visibility")==="hidden"}).length}var u=0,f=/^ui-id-\d+$/;n.ui=n.ui||{};n.extend(n.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});n.fn.extend({focus:function(t){return function(i,r){return typeof i=="number"?this.each(function(){var t=this;setTimeout(function(){n(t).focus();r&&r.call(t)},i)}):t.apply(this,arguments)}}(n.fn.focus),scrollParent:function(){var t;return t=n.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(n.css(this,"position"))&&/(auto|scroll)/.test(n.css(this,"overflow")+n.css(this,"overflow-y")+n.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(n.css(this,"overflow")+n.css(this,"overflow-y")+n.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?n(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var r=n(this[0]),u,f;r.length&&r[0]!==document;){if(u=r.css("position"),(u==="absolute"||u==="relative"||u==="fixed")&&(f=parseInt(r.css("zIndex"),10),!isNaN(f)&&f!==0))return f;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++u)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&n(this).removeAttr("id")})}});n.extend(n.expr[":"],{data:n.expr.createPseudo?n.expr.createPseudo(function(t){return function(i){return!!n.data(i,t)}}):function(t,i,r){return!!n.data(t,r[3])},focusable:function(t){return i(t,!isNaN(n.attr(t,"tabindex")))},tabbable:function(t){var r=n.attr(t,"tabindex"),u=isNaN(r);return(u||r>=0)&&i(t,!u)}});n("<a>").outerWidth(1).jquery||n.each(["Width","Height"],function(i,r){function e(t,i,r,u){return n.each(o,function(){i-=parseFloat(n.css(t,"padding"+this))||0;r&&(i-=parseFloat(n.css(t,"border"+this+"Width"))||0);u&&(i-=parseFloat(n.css(t,"margin"+this))||0)}),i}var o=r==="Width"?["Left","Right"]:["Top","Bottom"],u=r.toLowerCase(),f={innerWidth:n.fn.innerWidth,innerHeight:n.fn.innerHeight,outerWidth:n.fn.outerWidth,outerHeight:n.fn.outerHeight};n.fn["inner"+r]=function(i){return i===t?f["inner"+r].call(this):this.each(function(){n(this).css(u,e(this,i)+"px")})};n.fn["outer"+r]=function(t,i){return typeof t!="number"?f["outer"+r].call(this,t):this.each(function(){n(this).css(u,e(this,t,!0,i)+"px")})}});n.fn.addBack||(n.fn.addBack=function(n){return this.add(n==null?this.prevObject:this.prevObject.filter(n))});n("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(n.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,n.camelCase(i)):t.call(this)}}(n.fn.removeData));n.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());n.support.selectstart="onselectstart"in document.createElement("div");n.fn.extend({disableSelection:function(){return this.bind((n.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(n){n.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});n.extend(n.ui,{plugin:{add:function(t,i,r){var u,f=n.ui[t].prototype;for(u in r)f.plugins[u]=f.plugins[u]||[],f.plugins[u].push([i,r[u]])},call:function(n,t,i){var r,u=n.plugins[t];if(u&&n.element[0].parentNode&&n.element[0].parentNode.nodeType!==11)for(r=0;r<u.length;r++)n.options[u[r][0]]&&u[r][1].apply(n.element,i)}},hasScroll:function(t,i){if(n(t).css("overflow")==="hidden")return!1;var r=i&&i==="left"?"scrollLeft":"scrollTop",u=!1;return t[r]>0?!0:(t[r]=1,u=t[r]>0,t[r]=0,u)}})})(jQuery),function(n,t){var r=0,i=Array.prototype.slice,u=n.cleanData;n.cleanData=function(t){for(var i=0,r;(r=t[i])!=null;i++)try{n(r).triggerHandler("remove")}catch(f){}u(t)};n.widget=function(t,i,r){var s,f,u,o,h={},e=t.split(".")[0];t=t.split(".")[1];s=e+"-"+t;r||(r=i,i=n.Widget);n.expr[":"][s.toLowerCase()]=function(t){return!!n.data(t,s)};n[e]=n[e]||{};f=n[e][t];u=n[e][t]=function(n,t){if(!this._createWidget)return new u(n,t);arguments.length&&this._createWidget(n,t)};n.extend(u,f,{version:r.version,_proto:n.extend({},r),_childConstructors:[]});o=new i;o.options=n.widget.extend({},o.options);n.each(r,function(t,r){if(!n.isFunction(r)){h[t]=r;return}h[t]=function(){var n=function(){return i.prototype[t].apply(this,arguments)},u=function(n){return i.prototype[t].apply(this,n)};return function(){var i=this._super,f=this._superApply,t;return this._super=n,this._superApply=u,t=r.apply(this,arguments),this._super=i,this._superApply=f,t}}()});u.prototype=n.widget.extend(o,{widgetEventPrefix:f?o.widgetEventPrefix||t:t},h,{constructor:u,namespace:e,widgetName:t,widgetFullName:s});f?(n.each(f._childConstructors,function(t,i){var r=i.prototype;n.widget(r.namespace+"."+r.widgetName,u,i._proto)}),delete f._childConstructors):i._childConstructors.push(u);n.widget.bridge(t,u)};n.widget.extend=function(r){for(var o=i.call(arguments,1),e=0,s=o.length,u,f;e<s;e++)for(u in o[e])f=o[e][u],o[e].hasOwnProperty(u)&&f!==t&&(r[u]=n.isPlainObject(f)?n.isPlainObject(r[u])?n.widget.extend({},r[u],f):n.widget.extend({},f):f);return r};n.widget.bridge=function(r,u){var f=u.prototype.widgetFullName||r;n.fn[r]=function(e){var h=typeof e=="string",o=i.call(arguments,1),s=this;return e=!h&&o.length?n.widget.extend.apply(null,[e].concat(o)):e,h?this.each(function(){var i,u=n.data(this,f);return u?!n.isFunction(u[e])||e.charAt(0)==="_"?n.error("no such method '"+e+"' for "+r+" widget instance"):(i=u[e].apply(u,o),i!==u&&i!==t?(s=i&&i.jquery?s.pushStack(i.get()):i,!1):void 0):n.error("cannot call methods on "+r+" prior to initialization; attempted to call method '"+e+"'")}):this.each(function(){var t=n.data(this,f);t?t.option(e||{})._init():n.data(this,f,new u(e,this))}),s}};n.Widget=function(){};n.Widget._childConstructors=[];n.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=n(i||this.defaultElement||this)[0];this.element=n(i);this.uuid=r++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=n.widget.extend({},this.options,this._getCreateOptions(),t);this.bindings=n();this.hoverable=n();this.focusable=n();i!==this&&(n.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(n){n.target===i&&this.destroy()}}),this.document=n(i.style?i.ownerDocument:i.document||i),this.window=n(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:n.noop,_getCreateEventData:n.noop,_create:n.noop,_init:n.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(n.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:n.noop,widget:function(){return this.element},option:function(i,r){var o=i,u,f,e;if(arguments.length===0)return n.widget.extend({},this.options);if(typeof i=="string")if(o={},u=i.split("."),i=u.shift(),u.length){for(f=o[i]=n.widget.extend({},this.options[i]),e=0;e<u.length-1;e++)f[u[e]]=f[u[e]]||{},f=f[u[e]];if(i=u.pop(),arguments.length===1)return f[i]===t?null:f[i];f[i]=r}else{if(arguments.length===1)return this.options[i]===t?null:this.options[i];o[i]=r}return this._setOptions(o),this},_setOptions:function(n){var t;for(t in n)this._setOption(t,n[t]);return this},_setOption:function(n,t){return this.options[n]=t,n==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,r){var f,u=this;typeof t!="boolean"&&(r=i,i=t,t=!1);r?(i=f=n(i),this.bindings=this.bindings.add(i)):(r=i,i=this.element,f=this.widget());n.each(r,function(r,e){function o(){if(t||u.options.disabled!==!0&&!n(this).hasClass("ui-state-disabled"))return(typeof e=="string"?u[e]:e).apply(u,arguments)}typeof e!="string"&&(o.guid=e.guid=e.guid||o.guid||n.guid++);var s=r.match(/^(\w+)\s*(.*)$/),h=s[1]+u.eventNamespace,c=s[2];c?f.delegate(c,h,o):i.bind(h,o)})},_off:function(n,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;n.unbind(t).undelegate(t)},_delay:function(n,t){function r(){return(typeof n=="string"?i[n]:n).apply(i,arguments)}var i=this;return setTimeout(r,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){n(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){n(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){n(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){n(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,r){var u,f,e=this.options[t];if(r=r||{},i=n.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],f=i.originalEvent,f)for(u in f)u in i||(i[u]=f[u]);return this.element.trigger(i,r),!(n.isFunction(e)&&e.apply(this.element[0],[i].concat(r))===!1||i.isDefaultPrevented())}};n.each({show:"fadeIn",hide:"fadeOut"},function(t,i){n.Widget.prototype["_"+t]=function(r,u,f){typeof u=="string"&&(u={effect:u});var o,e=u?u===!0||typeof u=="number"?i:u.effect||i:t;u=u||{};typeof u=="number"&&(u={duration:u});o=!n.isEmptyObject(u);u.complete=f;u.delay&&r.delay(u.delay);o&&n.effects&&n.effects.effect[e]?r[t](u):e!==t&&r[e]?r[e](u.duration,u.easing,f):r.queue(function(i){n(this)[t]();f&&f.call(r[0]);i()})}})}(jQuery),function(n){var t=!1;n(document).mouseup(function(){t=!1});n.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(n){return t._mouseDown(n)}).bind("click."+this.widgetName,function(i){if(!0===n.data(i.target,t.widgetName+".preventClickEvent"))return n.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&n(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i);this._mouseDownEvent=i;var r=this,u=i.which===1,f=typeof this.options.cancel=="string"&&i.target.nodeName?n(i.target).closest(this.options.cancel).length:!1;return!u||f||!this._mouseCapture(i)?!0:(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted))?(i.preventDefault(),!0):(!0===n.data(i.target,this.widgetName+".preventClickEvent")&&n.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(n){return r._mouseMove(n)},this._mouseUpDelegate=function(n){return r._mouseUp(n)},n(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)}},_mouseMove:function(t){return n.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return n(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&n.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(n){return Math.max(Math.abs(this._mouseDownEvent.pageX-n.pageX),Math.abs(this._mouseDownEvent.pageY-n.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(n,t){function a(n,t,i){return[parseFloat(n[0])*(l.test(n[0])?t/100:1),parseFloat(n[1])*(l.test(n[1])?i/100:1)]}function u(t,i){return parseInt(n.css(t,i),10)||0}function y(t){var i=t[0];return i.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:n.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}n.ui=n.ui||{};var f,r=Math.max,i=Math.abs,e=Math.round,o=/left|center|right/,s=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,l=/%$/,v=n.fn.position;n.position={scrollbarWidth:function(){if(f!==t)return f;var u,r,i=n("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'><\/div><\/div>"),e=i.children()[0];return n("body").append(i),u=e.offsetWidth,i.css("overflow","scroll"),r=e.offsetWidth,u===r&&(r=i[0].clientWidth),i.remove(),f=u-r},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),u=i==="scroll"||i==="auto"&&t.width<t.element[0].scrollWidth,f=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:f?n.position.scrollbarWidth():0,height:u?n.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=n(t||window),r=n.isWindow(i[0]),u=!!i[0]&&i[0].nodeType===9;return{element:i,isWindow:r,isDocument:u,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:r?i.width():i.outerWidth(),height:r?i.height():i.outerHeight()}}};n.fn.position=function(t){if(!t||!t.of)return v.apply(this,arguments);t=n.extend({},t);var b,f,l,w,p,d,g=n(t.of),tt=n.position.getWithinInfo(t.within),it=n.position.getScrollInfo(tt),k=(t.collision||"flip").split(" "),nt={};return d=y(g),g[0].preventDefault&&(t.at="left top"),f=d.width,l=d.height,w=d.offset,p=n.extend({},w),n.each(["my","at"],function(){var n=(t[this]||"").split(" "),i,r;n.length===1&&(n=o.test(n[0])?n.concat(["center"]):s.test(n[0])?["center"].concat(n):["center","center"]);n[0]=o.test(n[0])?n[0]:"center";n[1]=s.test(n[1])?n[1]:"center";i=h.exec(n[0]);r=h.exec(n[1]);nt[this]=[i?i[0]:0,r?r[0]:0];t[this]=[c.exec(n[0])[0],c.exec(n[1])[0]]}),k.length===1&&(k[1]=k[0]),t.at[0]==="right"?p.left+=f:t.at[0]==="center"&&(p.left+=f/2),t.at[1]==="bottom"?p.top+=l:t.at[1]==="center"&&(p.top+=l/2),b=a(nt.at,f,l),p.left+=b[0],p.top+=b[1],this.each(function(){var y,d,s=n(this),h=s.outerWidth(),c=s.outerHeight(),rt=u(this,"marginLeft"),ut=u(this,"marginTop"),ft=h+rt+u(this,"marginRight")+it.width,et=c+ut+u(this,"marginBottom")+it.height,o=n.extend({},p),v=a(nt.my,s.outerWidth(),s.outerHeight());t.my[0]==="right"?o.left-=h:t.my[0]==="center"&&(o.left-=h/2);t.my[1]==="bottom"?o.top-=c:t.my[1]==="center"&&(o.top-=c/2);o.left+=v[0];o.top+=v[1];n.support.offsetFractions||(o.left=e(o.left),o.top=e(o.top));y={marginLeft:rt,marginTop:ut};n.each(["left","top"],function(i,r){n.ui.position[k[i]]&&n.ui.position[k[i]][r](o,{targetWidth:f,targetHeight:l,elemWidth:h,elemHeight:c,collisionPosition:y,collisionWidth:ft,collisionHeight:et,offset:[b[0]+v[0],b[1]+v[1]],my:t.my,at:t.at,within:tt,elem:s})});t.using&&(d=function(n){var u=w.left-o.left,v=u+f-h,e=w.top-o.top,y=e+l-c,a={target:{element:g,left:w.left,top:w.top,width:f,height:l},element:{element:s,left:o.left,top:o.top,width:h,height:c},horizontal:v<0?"left":u>0?"right":"center",vertical:y<0?"top":e>0?"bottom":"middle"};f<h&&i(u+v)<f&&(a.horizontal="center");l<c&&i(e+y)<l&&(a.vertical="middle");a.important=r(i(u),i(v))>r(i(e),i(y))?"horizontal":"vertical";t.using.call(this,n,a)});s.offset(n.extend(o,{using:d}))})};n.ui.position={fit:{left:function(n,t){var e=t.within,u=e.isWindow?e.scrollLeft:e.offset.left,o=e.width,s=n.left-t.collisionPosition.marginLeft,i=u-s,f=s+t.collisionWidth-o-u,h;t.collisionWidth>o?i>0&&f<=0?(h=n.left+i+t.collisionWidth-o-u,n.left+=i-h):n.left=f>0&&i<=0?u:i>f?u+o-t.collisionWidth:u:i>0?n.left+=i:f>0?n.left-=f:n.left=r(n.left-s,n.left)},top:function(n,t){var o=t.within,u=o.isWindow?o.scrollTop:o.offset.top,e=t.within.height,s=n.top-t.collisionPosition.marginTop,i=u-s,f=s+t.collisionHeight-e-u,h;t.collisionHeight>e?i>0&&f<=0?(h=n.top+i+t.collisionHeight-e-u,n.top+=i-h):n.top=f>0&&i<=0?u:i>f?u+e-t.collisionHeight:u:i>0?n.top+=i:f>0?n.top-=f:n.top=r(n.top-s,n.top)}},flip:{left:function(n,t){var r=t.within,y=r.offset.left+r.scrollLeft,c=r.width,o=r.isWindow?r.scrollLeft:r.offset.left,l=n.left-t.collisionPosition.marginLeft,a=l-o,v=l+t.collisionWidth-c-o,u=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,f=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,e=-2*t.offset[0],s,h;a<0?(s=n.left+u+f+e+t.collisionWidth-c-y,(s<0||s<i(a))&&(n.left+=u+f+e)):v>0&&(h=n.left-t.collisionPosition.marginLeft+u+f+e-o,(h>0||i(h)<v)&&(n.left+=u+f+e))},top:function(n,t){var r=t.within,y=r.offset.top+r.scrollTop,a=r.height,o=r.isWindow?r.scrollTop:r.offset.top,v=n.top-t.collisionPosition.marginTop,s=v-o,h=v+t.collisionHeight-a-o,p=t.my[1]==="top",u=p?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,f=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,e=-2*t.offset[1],c,l;s<0?(l=n.top+u+f+e+t.collisionHeight-a-y,n.top+u+f+e>s&&(l<0||l<i(s))&&(n.top+=u+f+e)):h>0&&(c=n.top-t.collisionPosition.marginTop+u+f+e-o,n.top+u+f+e>h&&(c>0||i(c)<h)&&(n.top+=u+f+e))}},flipfit:{left:function(){n.ui.position.flip.left.apply(this,arguments);n.ui.position.fit.left.apply(this,arguments)},top:function(){n.ui.position.flip.top.apply(this,arguments);n.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,r,u,f,e=document.getElementsByTagName("body")[0],o=document.createElement("div");t=document.createElement(e?"div":"body");r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};e&&n.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in r)t.style[f]=r[f];t.appendChild(o);i=e||document.documentElement;i.insertBefore(t,i.firstChild);o.style.cssText="position: absolute; left: 10.7432222px;";u=n(o).offset().left;n.support.offsetFractions=u>10&&u<11;t.innerHTML="";i.removeChild(t)}()}(jQuery),function(n){n.widget("ui.draggable",n.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper!=="original"||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||n(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),!this.handle)?!1:(n(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){n("<div class='ui-draggable-iframeFix' style='background: #fff;'><\/div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(n(this).offset()).appendTo("body")}),!0)},_mouseStart:function(t){var i=this.options;return(this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),n.ui.ddmanager&&(n.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,n.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1)?(this._clear(),!1):(this._cacheHelperProportions(),n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),n.ui.ddmanager&&n.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.offsetParentCssPosition==="fixed"&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.options.axis&&this.options.axis==="y"||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&this.options.axis==="x"||(this.helper[0].style.top=this.position.top+"px"),n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var r=this,i=!1;return(n.ui.ddmanager&&!this.options.dropBehaviour&&(i=n.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),this.options.helper==="original"&&!n.contains(this.element[0].ownerDocument,this.element[0]))?!1:(this.options.revert==="invalid"&&!i||this.options.revert==="valid"&&i||this.options.revert===!0||n.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?n(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return n("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),n.ui.ddmanager&&n.ui.ddmanager.dragStop(this,t),n.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!n(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var r=this.options,i=n.isFunction(r.helper)?n(r.helper.apply(this.element[0],[t])):r.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo(r.appendTo==="parent"?this.element[0].parentNode:r.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" "));n.isArray(t)&&(t={left:+t[0],top:+t[1]||0});"left"in t&&(this.offset.click.left=t.left+this.margins.left);"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left);"top"in t&&(this.offset.click.top=t.top+this.margins.top);"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&n.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var n=this.element.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var u,t,i,r=this.options;if(!r.containment){this.containment=null;return}if(r.containment==="window"){this.containment=[n(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,n(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,n(window).scrollLeft()+n(window).width()-this.helperProportions.width-this.margins.left,n(window).scrollTop()+(n(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(r.containment==="document"){this.containment=[0,0,n(document).width()-this.helperProportions.width-this.margins.left,(n(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(r.containment.constructor===Array){this.containment=r.containment;return}(r.containment==="parent"&&(r.containment=this.helper[0].parentNode),t=n(r.containment),i=t[0],i)&&(u=t.css("overflow")!=="hidden",this.containment=[(parseInt(t.css("borderLeftWidth"),10)||0)+(parseInt(t.css("paddingLeft"),10)||0),(parseInt(t.css("borderTopWidth"),10)||0)+(parseInt(t.css("paddingTop"),10)||0),(u?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t.css("borderRightWidth"),10)||0)-(parseInt(t.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(u?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t.css("borderBottomWidth"),10)||0)-(parseInt(t.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=t)},_convertPositionTo:function(t,i){i||(i=this.position);var r=t==="absolute"?1:-1,u=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent;return this.offset.scroll||(this.offset.scroll={top:u.scrollTop(),left:u.scrollLeft()}),{top:i.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top)*r,left:i.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)*r}},_generatePosition:function(t){var i,e,u,f,r=this.options,h=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,o=t.pageX,s=t.pageY;return this.offset.scroll||(this.offset.scroll={top:h.scrollTop(),left:h.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(e=this.relative_container.offset(),i=[this.containment[0]+e.left,this.containment[1]+e.top,this.containment[2]+e.left,this.containment[3]+e.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(o=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(s=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(o=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(s=i[3]+this.offset.click.top)),r.grid&&(u=r.grid[1]?this.originalPageY+Math.round((s-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,s=i?u-this.offset.click.top>=i[1]||u-this.offset.click.top>i[3]?u:u-this.offset.click.top>=i[1]?u-r.grid[1]:u+r.grid[1]:u,f=r.grid[0]?this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,o=i?f-this.offset.click.left>=i[0]||f-this.offset.click.left>i[2]?f:f-this.offset.click.left>=i[0]?f-r.grid[0]:f+r.grid[0]:f)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(t,i,r){return r=r||this._uiHash(),n.ui.plugin.call(this,t,[i,r]),t==="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),n.Widget.prototype._trigger.call(this,t,i,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});n.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var r=n(this).data("ui-draggable"),u=r.options,f=n.extend({},i,{item:r.element});r.sortables=[];n(u.connectToSortable).each(function(){var i=n.data(this,"ui-sortable");i&&!i.options.disabled&&(r.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,f))})},stop:function(t,i){var r=n(this).data("ui-draggable"),u=n.extend({},i,{item:r.element});n.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper==="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,u))})},drag:function(t,i){var r=n(this).data("ui-draggable"),u=this;n.each(r.sortables,function(){var f=!1,e=this;this.instance.positionAbs=r.positionAbs;this.instance.helperProportions=r.helperProportions;this.instance.offset.click=r.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,n.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==e&&this.instance._intersectsWith(this.instance.containerCache)&&n.contains(e.instance.element[0],this.instance.element[0])&&(f=!1),f}));f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=n(u).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}});n.ui.plugin.add("draggable","cursor",{start:function(){var t=n("body"),i=n(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor"));t.css("cursor",i.cursor)},stop:function(){var t=n(this).data("ui-draggable").options;t._cursor&&n("body").css("cursor",t._cursor)}});n.ui.plugin.add("draggable","opacity",{start:function(t,i){var r=n(i.helper),u=n(this).data("ui-draggable").options;r.css("opacity")&&(u._opacity=r.css("opacity"));r.css("opacity",u.opacity)},stop:function(t,i){var r=n(this).data("ui-draggable").options;r._opacity&&n(i.helper).css("opacity",r._opacity)}});n.ui.plugin.add("draggable","scroll",{start:function(){var t=n(this).data("ui-draggable");t.scrollParent[0]!==document&&t.scrollParent[0].tagName!=="HTML"&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var r=n(this).data("ui-draggable"),i=r.options,u=!1;r.scrollParent[0]!==document&&r.scrollParent[0].tagName!=="HTML"?(i.axis&&i.axis==="x"||(r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=u=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=u=r.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&i.axis==="y"||(r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=u=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=u=r.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&i.axis==="x"||(t.pageY-n(document).scrollTop()<i.scrollSensitivity?u=n(document).scrollTop(n(document).scrollTop()-i.scrollSpeed):n(window).height()-(t.pageY-n(document).scrollTop())<i.scrollSensitivity&&(u=n(document).scrollTop(n(document).scrollTop()+i.scrollSpeed))),i.axis&&i.axis==="y"||(t.pageX-n(document).scrollLeft()<i.scrollSensitivity?u=n(document).scrollLeft(n(document).scrollLeft()-i.scrollSpeed):n(window).width()-(t.pageX-n(document).scrollLeft())<i.scrollSensitivity&&(u=n(document).scrollLeft(n(document).scrollLeft()+i.scrollSpeed))));u!==!1&&n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(r,t)}});n.ui.plugin.add("draggable","snap",{start:function(){var t=n(this).data("ui-draggable"),i=t.options;t.snapElements=[];n(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=n(this),r=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:r.top,left:r.left})})},drag:function(t,i){for(var e,o,s,h,c,a,l,v,w,r=n(this).data("ui-draggable"),b=r.options,f=b.snapTolerance,y=i.offset.left,k=y+r.helperProportions.width,p=i.offset.top,d=p+r.helperProportions.height,u=r.snapElements.length-1;u>=0;u--){if(c=r.snapElements[u].left,a=c+r.snapElements[u].width,l=r.snapElements[u].top,v=l+r.snapElements[u].height,k<c-f||y>a+f||d<l-f||p>v+f||!n.contains(r.snapElements[u].item.ownerDocument,r.snapElements[u].item)){r.snapElements[u].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[u].item}));r.snapElements[u].snapping=!1;continue}b.snapMode!=="inner"&&(e=Math.abs(l-d)<=f,o=Math.abs(v-p)<=f,s=Math.abs(c-k)<=f,h=Math.abs(a-y)<=f,e&&(i.position.top=r._convertPositionTo("relative",{top:l-r.helperProportions.height,left:0}).top-r.margins.top),o&&(i.position.top=r._convertPositionTo("relative",{top:v,left:0}).top-r.margins.top),s&&(i.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),h&&(i.position.left=r._convertPositionTo("relative",{top:0,left:a}).left-r.margins.left));w=e||o||s||h;b.snapMode!=="outer"&&(e=Math.abs(l-p)<=f,o=Math.abs(v-d)<=f,s=Math.abs(c-y)<=f,h=Math.abs(a-k)<=f,e&&(i.position.top=r._convertPositionTo("relative",{top:l,left:0}).top-r.margins.top),o&&(i.position.top=r._convertPositionTo("relative",{top:v-r.helperProportions.height,left:0}).top-r.margins.top),s&&(i.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),h&&(i.position.left=r._convertPositionTo("relative",{top:0,left:a-r.helperProportions.width}).left-r.margins.left));!r.snapElements[u].snapping&&(e||o||s||h||w)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[u].item}));r.snapElements[u].snapping=e||o||s||h||w}}});n.ui.plugin.add("draggable","stack",{start:function(){var i,r=this.data("ui-draggable").options,t=n.makeArray(n(r.stack)).sort(function(t,i){return(parseInt(n(t).css("zIndex"),10)||0)-(parseInt(n(i).css("zIndex"),10)||0)});t.length&&(i=parseInt(n(t[0]).css("zIndex"),10)||0,n(t).each(function(t){n(this).css("zIndex",i+t)}),this.css("zIndex",i+t.length))}});n.ui.plugin.add("draggable","zIndex",{start:function(t,i){var r=n(i.helper),u=n(this).data("ui-draggable").options;r.css("zIndex")&&(u._zIndex=r.css("zIndex"));r.css("zIndex",u.zIndex)},stop:function(t,i){var r=n(this).data("ui-draggable").options;r._zIndex&&n(i.helper).css("zIndex",r._zIndex)}})}(jQuery),function(n){function t(n,t,i){return n>t&&n<t+i}n.widget("ui.droppable",{version:"1.10.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var i,t=this.options,r=t.accept;this.isover=!1;this.isout=!0;this.accept=n.isFunction(r)?r:function(n){return n.is(r)};this.proportions=function(){if(arguments.length)i=arguments[0];else return i?i:i={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}};n.ui.ddmanager.droppables[t.scope]=n.ui.ddmanager.droppables[t.scope]||[];n.ui.ddmanager.droppables[t.scope].push(this);t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=n.ui.ddmanager.droppables[this.options.scope];t<i.length;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){t==="accept"&&(this.accept=n.isFunction(i)?i:function(n){return n.is(i)});n.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=n.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=n.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=n.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=n.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var r=i||n.ui.ddmanager.current,u=!1;return!r||(r.currentItem||r.element)[0]===this.element[0]?!1:(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=n.data(this,"ui-droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope===r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&n.ui.intersect(r,n.extend(t,{offset:t.element.offset()}),t.options.tolerance))return u=!0,!1}),u)?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(n){return{draggable:n.currentItem||n.element,helper:n.helper,position:n.position,offset:n.positionAbs}}});n.ui.intersect=function(n,i,r){if(!i.offset)return!1;var a,v,e=(n.positionAbs||n.position.absolute).left,o=(n.positionAbs||n.position.absolute).top,s=e+n.helperProportions.width,h=o+n.helperProportions.height,u=i.offset.left,f=i.offset.top,c=u+i.proportions().width,l=f+i.proportions().height;switch(r){case"fit":return u<=e&&s<=c&&f<=o&&h<=l;case"intersect":return u<e+n.helperProportions.width/2&&s-n.helperProportions.width/2<c&&f<o+n.helperProportions.height/2&&h-n.helperProportions.height/2<l;case"pointer":return a=(n.positionAbs||n.position.absolute).left+(n.clickOffset||n.offset.click).left,v=(n.positionAbs||n.position.absolute).top+(n.clickOffset||n.offset.click).top,t(v,f,i.proportions().height)&&t(a,u,i.proportions().width);case"touch":return(o>=f&&o<=l||h>=f&&h<=l||o<f&&h>l)&&(e>=u&&e<=c||s>=u&&s<=c||e<u&&s>c);default:return!1}};n.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var r,f,u=n.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,e=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();n:for(r=0;r<u.length;r++)if(!u[r].options.disabled&&(!t||u[r].accept.call(u[r].element[0],t.currentItem||t.element))){for(f=0;f<e.length;f++)if(e[f]===u[r].element[0]){u[r].proportions().height=0;continue n}(u[r].visible=u[r].element.css("display")!=="none",u[r].visible)&&(o==="mousedown"&&u[r]._activate.call(u[r],i),u[r].offset=u[r].element.offset(),u[r].proportions({width:u[r].element[0].offsetWidth,height:u[r].element[0].offsetHeight}))}},drop:function(t,i){var r=!1;return n.each((n.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&n.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,i)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),r},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||n.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&n.ui.ddmanager.prepareOffsets(t,i);n.each(n.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var r,e,f,o=n.ui.intersect(t,this,this.options.tolerance),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;u&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return n.data(this,"ui-droppable").options.scope===e}),f.length&&(r=n.data(f[0],"ui-droppable"),r.greedyChild=u==="isover")),r&&u==="isover"&&(r.isover=!1,r.isout=!0,r._out.call(r,i)),this[u]=!0,this[u==="isout"?"isover":"isout"]=!1,this[u==="isover"?"_over":"_out"].call(this,i),r&&u==="isout"&&(r.isout=!1,r.isover=!0,r._over.call(r,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable");t.options.refreshPositions||n.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(n){function t(n,t,i){return n>t&&n<t+i}function i(n){return/left|right/.test(n.css("float"))||/inline|table-cell/.test(n.css("display"))}n.widget("ui.sortable",n.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var n=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?n.axis==="x"||i(this.items[0].item):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var n=this.items.length-1;n>=0;n--)this.items[n].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){t==="disabled"?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):n.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var r=null,f=!1,u=this;return this.reverting?!1:this.options.disabled||this.options.type==="static"?!1:(this._refreshItems(t),n(t.target).parents().each(function(){if(n.data(this,u.widgetName+"-item")===u)return r=n(this),!1}),n.data(t.target,u.widgetName+"-item")===u&&(r=n(t.target)),!r)?!1:this.options.handle&&!i&&(n(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(f=!0)}),!f)?!1:(this.currentItem=r,this._removeCurrentsFromItems(),!0)},_mouseStart:function(t,i,r){var f,e,u=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},n.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,u.cursorAt&&this._adjustOffsetFromHelper(u.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),u.containment&&this._setContainment(),u.cursor&&u.cursor!=="auto"&&(e=this.document.find("body"),this.storedCursor=e.css("cursor"),e.css("cursor",u.cursor),this.storedStylesheet=n("<style>*{ cursor: "+u.cursor+" !important; }<\/style>").appendTo(e)),u.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",u.opacity)),u.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",u.zIndex)),this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(f=this.containers.length-1;f>=0;f--)this.containers[f]._trigger("activate",t,this._uiHash(this));return n.ui.ddmanager&&(n.ui.ddmanager.current=this),n.ui.ddmanager&&!u.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,u,f,o,i=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-n(document).scrollTop()<i.scrollSensitivity?r=n(document).scrollTop(n(document).scrollTop()-i.scrollSpeed):n(window).height()-(t.pageY-n(document).scrollTop())<i.scrollSensitivity&&(r=n(document).scrollTop(n(document).scrollTop()+i.scrollSpeed)),t.pageX-n(document).scrollLeft()<i.scrollSensitivity?r=n(document).scrollLeft(n(document).scrollLeft()-i.scrollSpeed):n(window).width()-(t.pageX-n(document).scrollLeft())<i.scrollSensitivity&&(r=n(document).scrollLeft(n(document).scrollLeft()+i.scrollSpeed))),r!==!1&&n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&this.options.axis==="y"||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&this.options.axis==="x"||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;e>=0;e--)if((u=this.items[e],f=u.item[0],o=this._intersectsWithPointer(u),o)&&u.instance===this.currentContainer&&f!==this.currentItem[0]&&this.placeholder[o===1?"next":"prev"]()[0]!==f&&!n.contains(this.placeholder[0],f)&&(this.options.type==="semi-dynamic"?!n.contains(this.element[0],f):!0)){if(this.direction=o===1?"down":"up",this.options.tolerance==="pointer"||this._intersectsWithSides(u))this._rearrange(t,u);else break;this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(n.ui.ddmanager&&!this.options.dropBehaviour&&n.ui.ddmanager.drop(this,t),this.options.revert){var e=this,f=this.placeholder.offset(),r=this.options.axis,u={};r&&r!=="x"||(u.left=f.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft));r&&r!=="y"||(u.top=f.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop));this.reverting=!0;n(this.helper).animate(u,parseInt(this.options.revert,10)||500,function(){e._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),n.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?n(this.domPosition.prev).after(this.currentItem):n(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n(r).each(function(){var r=(n(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);r&&i.push((t.key||r[1]+"[]")+"="+(t.key&&t.expression?r[1]:r[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},r.each(function(){i.push(n(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(n){var t=this.positionAbs.left,h=t+this.helperProportions.width,i=this.positionAbs.top,c=i+this.helperProportions.height,r=n.left,f=r+n.width,u=n.top,e=u+n.height,o=this.offset.click.top,s=this.offset.click.left,l=this.options.axis==="x"||i+o>u&&i+o<e,a=this.options.axis==="y"||t+s>r&&t+s<f,v=l&&a;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>n[this.floating?"width":"height"]?v:r<t+this.helperProportions.width/2&&h-this.helperProportions.width/2<f&&u<i+this.helperProportions.height/2&&c-this.helperProportions.height/2<e},_intersectsWithPointer:function(n){var u=this.options.axis==="x"||t(this.positionAbs.top+this.offset.click.top,n.top,n.height),f=this.options.axis==="y"||t(this.positionAbs.left+this.offset.click.left,n.left,n.width),e=u&&f,i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return e?this.floating?r&&r==="right"||i==="down"?2:1:i&&(i==="down"?2:1):!1},_intersectsWithSides:function(n){var u=t(this.positionAbs.top+this.offset.click.top,n.top+n.height/2,n.height),f=t(this.positionAbs.left+this.offset.click.left,n.left+n.width/2,n.width),i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?r==="right"&&f||r==="left"&&!f:i&&(i==="down"&&u||i==="up"&&!u)},_getDragVerticalDirection:function(){var n=this.positionAbs.top-this.lastPositionAbs.top;return n!==0&&(n>0?"down":"up")},_getDragHorizontalDirection:function(){var n=this.positionAbs.left-this.lastPositionAbs.left;return n!==0&&(n>0?"right":"left")},refresh:function(n){return this._refreshItems(n),this.refreshPositions(),this},_connectWith:function(){var n=this.options;return n.connectWith.constructor===String?[n.connectWith]:n.connectWith},_getItemsAsjQuery:function(t){function h(){s.push(this)}var r,u,e,i,s=[],f=[],o=this._connectWith();if(o&&t)for(r=o.length-1;r>=0;r--)for(e=n(o[r]),u=e.length-1;u>=0;u--)i=n.data(e[u],this.widgetFullName),i&&i!==this&&!i.options.disabled&&f.push([n.isFunction(i.options.items)?i.options.items.call(i.element):n(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i]);for(f.push([n.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):n(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),r=f.length-1;r>=0;r--)f[r][0].each(h);return n(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=n.grep(this.items,function(n){for(var i=0;i<t.length;i++)if(t[i]===n.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[];this.containers=[this];var r,u,e,i,o,s,h,l,a=this.items,f=[[n.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):n(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(r=c.length-1;r>=0;r--)for(e=n(c[r]),u=e.length-1;u>=0;u--)i=n.data(e[u],this.widgetFullName),i&&i!==this&&!i.options.disabled&&(f.push([n.isFunction(i.options.items)?i.options.items.call(i.element[0],t,{item:this.currentItem}):n(i.options.items,i.element),i]),this.containers.push(i));for(r=f.length-1;r>=0;r--)for(o=f[r][1],s=f[r][0],u=0,l=s.length;u<l;u++)h=n(s[u]),h.data(this.widgetName+"-item",o),a.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var r,f,u,i=this.items.length-1;i>=0;i--)(r=this.items[i],r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0])||(f=this.options.toleranceElement?n(this.options.toleranceElement,r.item):r.item,t||(r.width=f.outerWidth(),r.height=f.outerHeight()),u=f.offset(),r.left=u.left,r.top=u.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)u=this.containers[i].element.offset(),this.containers[i].containerCache.left=u.left,this.containers[i].containerCache.top=u.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var r,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(r=i.placeholder,i.placeholder={element:function(){var u=t.currentItem[0].nodeName.toLowerCase(),i=n("<"+u+">",t.document[0]).addClass(r||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return u==="tr"?t.currentItem.children().each(function(){n("<td>&#160;<\/td>",t.document[0]).attr("colspan",n(this).attr("colspan")||1).appendTo(i)}):u==="img"&&i.attr("src",t.currentItem.attr("src")),r||i.css("visibility","hidden"),i},update:function(n,u){(!r||i.forcePlaceholderSize)&&(u.height()||u.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),u.width()||u.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}});t.placeholder=n(i.placeholder.element.call(t.element,t.currentItem));t.currentItem.after(t.placeholder);i.placeholder.update(t,t.placeholder)},_contactContainers:function(r){for(var f,v,s,l,y,h,o,p,a,c=null,e=null,u=this.containers.length-1;u>=0;u--)if(!n.contains(this.currentItem[0],this.containers[u].element[0]))if(this._intersectsWith(this.containers[u].containerCache)){if(c&&n.contains(this.containers[u].element[0],c.element[0]))continue;c=this.containers[u];e=u}else this.containers[u].containerCache.over&&(this.containers[u]._trigger("out",r,this._uiHash(this)),this.containers[u].containerCache.over=0);if(c)if(this.containers.length===1)this.containers[e].containerCache.over||(this.containers[e]._trigger("over",r,this._uiHash(this)),this.containers[e].containerCache.over=1);else{for(v=1e4,s=null,a=c.floating||i(this.currentItem),l=a?"left":"top",y=a?"width":"height",h=this.positionAbs[l]+this.offset.click[l],f=this.items.length-1;f>=0;f--)n.contains(this.containers[e].element[0],this.items[f].item[0])&&this.items[f].item[0]!==this.currentItem[0]&&(!a||t(this.positionAbs.top+this.offset.click.top,this.items[f].top,this.items[f].height))&&(o=this.items[f].item.offset()[l],p=!1,Math.abs(o-h)>Math.abs(o+this.items[f][y]-h)&&(p=!0,o+=this.items[f][y]),Math.abs(o-h)<v&&(v=Math.abs(o-h),s=this.items[f],this.direction=p?"up":"down"));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[e])return;s?this._rearrange(r,s,null,!0):this._rearrange(r,null,this.containers[e].element,!0);this._trigger("change",r,this._uiHash());this.containers[e]._trigger("change",r,this._uiHash(this));this.currentContainer=this.containers[e];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[e]._trigger("over",r,this._uiHash(this));this.containers[e].containerCache.over=1}},_createHelper:function(t){var r=this.options,i=n.isFunction(r.helper)?n(r.helper.apply(this.element[0],[t,this.currentItem])):r.helper==="clone"?this.currentItem.clone():this.currentItem;return i.parents("body").length||n(r.appendTo!=="parent"?r.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||r.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||r.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" "));n.isArray(t)&&(t={left:+t[0],top:+t[1]||0});"left"in t&&(this.offset.click.left=t.left+this.margins.left);"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left);"top"in t&&(this.offset.click.top=t.top+this.margins.top);"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&n.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var n=this.currentItem.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,r,u,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);(i.containment==="document"||i.containment==="window")&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,n(i.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(n(i.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]);/^(document|window|parent)$/.test(i.containment)||(t=n(i.containment)[0],r=n(i.containment).offset(),u=n(t).css("overflow")!=="hidden",this.containment=[r.left+(parseInt(n(t).css("borderLeftWidth"),10)||0)+(parseInt(n(t).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(n(t).css("borderTopWidth"),10)||0)+(parseInt(n(t).css("paddingTop"),10)||0)-this.margins.top,r.left+(u?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(n(t).css("borderLeftWidth"),10)||0)-(parseInt(n(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(u?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(n(t).css("borderTopWidth"),10)||0)-(parseInt(n(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var r=t==="absolute"?1:-1,u=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(u[0].tagName);return{top:i.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():f?0:u.scrollTop())*r,left:i.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():f?0:u.scrollLeft())*r}},_generatePosition:function(t){var r,u,i=this.options,f=t.pageX,e=t.pageY,o=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,s=/(html|body)/i.test(o[0].tagName);return this.cssPosition!=="relative"||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(e=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(e=this.containment[3]+this.offset.click.top)),i.grid&&(r=this.originalPageY+Math.round((e-this.originalPageY)/i.grid[1])*i.grid[1],e=this.containment?r-this.offset.click.top>=this.containment[1]&&r-this.offset.click.top<=this.containment[3]?r:r-this.offset.click.top>=this.containment[1]?r-i.grid[1]:r+i.grid[1]:r,u=this.originalPageX+Math.round((f-this.originalPageX)/i.grid[0])*i.grid[0],f=this.containment?u-this.offset.click.left>=this.containment[0]&&u-this.offset.click.left<=this.containment[2]?u:u-this.offset.click.left>=this.containment[0]?u-i.grid[0]:u+i.grid[0]:u)),{top:e-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:o.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())}},_rearrange:function(n,t,i,r){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var u=this.counter;this._delay(function(){u===this.counter&&this.refreshPositions(!r)})},_clear:function(n,t){function u(n,t,i){return function(r){i._trigger(n,r,t._uiHash(t))}}this.reverting=!1;var i,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static")&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&r.push(function(n){this._trigger("receive",n,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!t&&r.push(function(n){this._trigger("update",n,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(n){this._trigger("remove",n,this._uiHash())}),r.push(function(n){return function(t){n._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(n){return function(t){n._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||r.push(u("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(u("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",n,this._uiHash()),i=0;i<r.length;i++)r[i].call(this,n);this._trigger("stop",n,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",n,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;i<r.length;i++)r[i].call(this,n);this._trigger("stop",n,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){n.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||n([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),function(n){n.extend(n.fn,{validate:function(t){if(!this.length){t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.");return}var i=n.data(this[0],"validator");return i?i:("noValidate"in document.createElement("form")&&this.attr("novalidate","novalidate"),i=new n.validator(t,this[0]),n.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){i.settings.submitHandler&&(i.submitButton=t.target);n(t.target).hasClass("cancel")&&(i.cancelSubmit=!0);n(t.target).attr("formnovalidate")!==undefined&&(i.cancelSubmit=!0)}),this.submit(function(t){function r(){var r;return i.settings.submitHandler?(i.submitButton&&(r=n("<input type='hidden'/>").attr("name",i.submitButton.name).val(n(i.submitButton).val()).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&r.remove(),!1):!0}return(i.settings.debug&&t.preventDefault(),i.cancelSubmit)?(i.cancelSubmit=!1,r()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):r():(i.focusInvalid(),!1)})),i)},valid:function(){if(n(this[0]).is("form"))return this.validate().form();var t=!0,i=n(this[0].form).validate();return this.each(function(){t=t&&i.element(this)}),t},removeAttrs:function(t){var i={},r=this;return n.each(t.split(/\s/),function(n,t){i[t]=r.attr(t);r.removeAttr(t)}),i},rules:function(t,i){var r=this[0],o,u,h;if(t){var e=n.data(r.form,"validator").settings,s=e.rules,f=n.validator.staticRules(r);switch(t){case"add":n.extend(f,n.validator.normalizeRule(i));delete f.messages;s[r.name]=f;i.messages&&(e.messages[r.name]=n.extend(e.messages[r.name],i.messages));break;case"remove":return i?(o={},n.each(i.split(/\s/),function(n,t){o[t]=f[t];delete f[t]}),o):(delete s[r.name],f)}}return u=n.validator.normalizeRules(n.extend({},n.validator.classRules(r),n.validator.attributeRules(r),n.validator.dataRules(r),n.validator.staticRules(r)),r),u.required&&(h=u.required,delete u.required,u=n.extend({required:h},u)),u}});n.extend(n.expr[":"],{blank:function(t){return!n.trim(""+n(t).val())},filled:function(t){return!!n.trim(""+n(t).val())},unchecked:function(t){return!n(t).prop("checked")}});n.validator=function(t,i){this.settings=n.extend(!0,{},n.validator.defaults,t);this.currentForm=i;this.init()};n.validator.format=function(t,i){return arguments.length===1?function(){var i=n.makeArray(arguments);return i.unshift(t),n.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=n.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),n.each(i,function(n,i){t=t.replace(new RegExp("\\{"+n+"\\}","g"),function(){return i})}),t)};n.extend(n.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:n([]),errorLabelContainer:n([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(n){this.lastActive=n;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,n,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(n)).hide())},onfocusout:function(n){!this.checkable(n)&&(n.name in this.submitted||!this.optional(n))&&this.element(n)},onkeyup:function(n,t){(t.which!==9||this.elementValue(n)!=="")&&(n.name in this.submitted||n===this.lastElement)&&this.element(n)},onclick:function(n){n.name in this.submitted?this.element(n):n.parentNode.name in this.submitted&&this.element(n.parentNode)},highlight:function(t,i,r){t.type==="radio"?this.findByName(t.name).addClass(i).removeClass(r):n(t).addClass(i).removeClass(r)},unhighlight:function(t,i,r){t.type==="radio"?this.findByName(t.name).removeClass(i).addClass(r):n(t).removeClass(i).addClass(r)}},setDefaults:function(t){n.extend(n.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:n.validator.format("Please enter no more than {0} characters."),minlength:n.validator.format("Please enter at least {0} characters."),rangelength:n.validator.format("Please enter a value between {0} and {1} characters long."),range:n.validator.format("Please enter a value between {0} and {1}."),max:n.validator.format("Please enter a value less than or equal to {0}."),min:n.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function r(t){var i=n.data(this[0].form,"validator"),r="on"+t.type.replace(/^validate/,"");i.settings[r]&&i.settings[r].call(i,this[0],t)}var i,t;this.labelContainer=n(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||n(this.currentForm);this.containers=n(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();i=this.groups={};n.each(this.settings.groups,function(t,r){typeof r=="string"&&(r=r.split(/\s/));n.each(r,function(n,r){i[r]=t})});t=this.settings.rules;n.each(t,function(i,r){t[i]=n.validator.normalizeRule(r)});n(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",r).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",r);this.settings.invalidHandler&&n(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),n.extend(this.submitted,this.errorMap),this.invalid=n.extend({},this.errorMap),this.valid()||n(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var n=0,t=this.currentElements=this.elements();t[n];n++)this.check(t[n]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t));this.lastElement=t;this.prepareElement(t);this.currentElements=n(t);var i=this.check(t)!==!1;return i?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){n.extend(this.errorMap,t);this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=n.grep(this.successList,function(n){return!(n.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){n.fn.resetForm&&n(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(n){var t=0,i;for(i in n)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{n(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&n.grep(this.errorList,function(n){return n.element.name===t.name}).length===1&&t},elements:function(){var t=this,i={};return n(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return(!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!t.objectLength(n(this).rules()))?!1:(i[this.name]=!0,!0)})},clean:function(t){return n(t)[0]},errors:function(){var t=this.settings.errorClass.replace(" ",".");return n(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=n([]);this.toHide=n([]);this.currentElements=n([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(n){this.reset();this.toHide=this.errorsFor(n)},elementValue:function(t){var r=n(t).attr("type"),i=n(t).val();return r==="radio"||r==="checkbox"?n("input[name='"+n(t).attr("name")+"']:checked").val():typeof i=="string"?i.replace(/\r/g,""):i},check:function(t){var r,u;t=this.validationTargetFor(this.clean(t));var f=n(t).rules(),e=!1,s=this.elementValue(t),i;for(r in f){u={method:r,parameters:f[r]};try{if(i=n.validator.methods[r].call(this,s,t,u.parameters),i==="dependency-mismatch"){e=!0;continue}if(e=!1,i==="pending"){this.toHide=this.toHide.not(this.errorsFor(t));return}if(!i)return this.formatAndAdd(t,u),!1}catch(o){this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+u.method+"' method.",o);throw o;}}if(!e)return this.objectLength(f)&&this.successList.push(t),!0},customDataMessage:function(t,i){return n(t).data("msg-"+i.toLowerCase())||t.attributes&&n(t).attr("data-msg-"+i.toLowerCase())},customMessage:function(n,t){var i=this.settings.messages[n];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var n=0;n<arguments.length;n++)if(arguments[n]!==undefined)return arguments[n];return undefined},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customDataMessage(t,i),!this.settings.ignoreTitle&&t.title||undefined,n.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"<\/strong>")},formatAndAdd:function(t,i){var r=this.defaultMessage(t,i.method),u=/\$?\{(\d+)\}/g;typeof r=="function"?r=r.call(this,i.parameters,t):u.test(r)&&(r=n.validator.format(r.replace(u,"{$1}"),i.parameters));this.errorList.push({message:r,element:t});this.errorMap[t.name]=r;this.submitted[t.name]=r},addWrapper:function(n){return this.settings.wrapper&&(n=n.add(n.parent(this.settings.wrapper))),n},defaultShowErrors:function(){for(var i,t,n=0;this.errorList[n];n++)t=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,i=this.validElements();i[n];n++)this.settings.unhighlight.call(this,i[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return n(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var r=this.errorsFor(t);r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(i)):(r=n("<"+this.settings.errorElement+">").attr("for",this.idOrName(t)).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(r=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(r).length||(this.settings.errorPlacement?this.settings.errorPlacement(r,n(t)):r.insertAfter(t)));!i&&this.settings.success&&(r.text(""),typeof this.settings.success=="string"?r.addClass(this.settings.success):this.settings.success(r,t));this.toShow=this.toShow.add(r)},errorsFor:function(t){var i=this.idOrName(t);return this.errors().filter(function(){return n(this).attr("for")===i})},idOrName:function(n){return this.groups[n.name]||(this.checkable(n)?n.name:n.id||n.name)},validationTargetFor:function(n){return this.checkable(n)&&(n=this.findByName(n.name).not(this.settings.ignore)[0]),n},checkable:function(n){return/radio|checkbox/i.test(n.type)},findByName:function(t){return n(this.currentForm).find("[name='"+t+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return n("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(n,t){return this.dependTypes[typeof n]?this.dependTypes[typeof n](n,t):!0},dependTypes:{boolean:function(n){return n},string:function(t,i){return!!n(t,i.form).length},"function":function(n,t){return n(t)}},optional:function(t){var i=this.elementValue(t);return!n.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(n){this.pending[n.name]||(this.pendingRequest++,this.pending[n.name]=!0)},stopRequest:function(t,i){this.pendingRequest--;this.pendingRequest<0&&(this.pendingRequest=0);delete this.pending[t.name];i&&this.pendingRequest===0&&this.formSubmitted&&this.form()?(n(this.currentForm).submit(),this.formSubmitted=!1):!i&&this.pendingRequest===0&&this.formSubmitted&&(n(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return n.data(t,"previousValue")||n.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:n.extend(this.classRuleSettings,t)},classRules:function(t){var i={},r=n(t).attr("class");return r&&n.each(r.split(" "),function(){this in n.validator.classRuleSettings&&n.extend(i,n.validator.classRuleSettings[this])}),i},attributeRules:function(t){var u={},e=n(t),f=e[0].getAttribute("type"),r,i;for(r in n.validator.methods)r==="required"?(i=e.get(0).getAttribute(r),i===""&&(i=!0),i=!!i):i=e.attr(r),/min|max/.test(r)&&(f===null||/number|range|text/.test(f))&&(i=Number(i)),i?u[r]=i:f===r&&f!=="range"&&(u[r]=!0);return u.maxlength&&/-1|2147483647|524288/.test(u.maxlength)&&delete u.maxlength,u},dataRules:function(t){var i,r,u={},f=n(t);for(i in n.validator.methods)r=f.data("rule-"+i.toLowerCase()),r!==undefined&&(u[i]=r);return u},staticRules:function(t){var i={},r=n.data(t.form,"validator");return r.settings.rules&&(i=n.validator.normalizeRule(r.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return n.each(t,function(r,u){if(u===!1){delete t[r];return}if(u.param||u.depends){var f=!0;switch(typeof u.depends){case"string":f=!!n(u.depends,i.form).length;break;case"function":f=u.depends.call(i,i)}f?t[r]=u.param!==undefined?u.param:!0:delete t[r]}}),n.each(t,function(r,u){t[r]=n.isFunction(u)?u(i):u}),n.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),n.each(["rangelength","range"],function(){var i;t[this]&&(n.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:typeof t[this]=="string"&&(i=t[this].split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),n.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if(typeof t=="string"){var i={};n.each(t.split(/\s/),function(){i[this]=!0});t=i}return t},addMethod:function(t,i,r){n.validator.methods[t]=i;n.validator.messages[t]=r!==undefined?r:n.validator.messages[t];i.length<3&&n.validator.addClassRules(t,n.validator.normalizeRule(t))},methods:{required:function(t,i,r){if(!this.depend(r,i))return"dependency-mismatch";if(i.nodeName.toLowerCase()==="select"){var u=n(i).val();return u&&u.length>0}return this.checkable(i)?this.getLength(t,i)>0:n.trim(t).length>0},email:function(n,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(n)},url:function(n,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(n)},date:function(n,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(n).toString())},dateISO:function(n,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(n)},number:function(n,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(n)},digits:function(n,t){return this.optional(t)||/^\d+$/.test(n)},creditcard:function(n,t){var r,e;if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(n))return!1;var f=0,i=0,u=!1;for(n=n.replace(/\D/g,""),r=n.length-1;r>=0;r--)e=n.charAt(r),i=parseInt(e,10),u&&(i*=2)>9&&(i-=9),f+=i,u=!u;return f%10==0},minlength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(n.trim(t),i);return this.optional(i)||u>=r},maxlength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(n.trim(t),i);return this.optional(i)||u<=r},rangelength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(n.trim(t),i);return this.optional(i)||u>=r[0]&&u<=r[1]},min:function(n,t,i){return this.optional(t)||n>=i},max:function(n,t,i){return this.optional(t)||n<=i},range:function(n,t,i){return this.optional(t)||n>=i[0]&&n<=i[1]},equalTo:function(t,i,r){var u=n(r);return this.settings.onfocusout&&u.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){n(i).valid()}),t===u.val()},remote:function(t,i,r){var f,u,e;return this.optional(i)?"dependency-mismatch":(f=this.previousValue(i),this.settings.messages[i.name]||(this.settings.messages[i.name]={}),f.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=f.message,r=typeof r=="string"&&{url:r}||r,f.old===t)?f.valid:(f.old=t,u=this,this.startRequest(i),e={},e[i.name]=t,n.ajax(n.extend(!0,{url:r,mode:"abort",port:"validate"+i.name,dataType:"json",data:e,success:function(r){var e,h,s,o;u.settings.messages[i.name].remote=f.originalMessage;e=r===!0||r==="true";e?(h=u.formSubmitted,u.prepareElement(i),u.formSubmitted=h,u.successList.push(i),delete u.invalid[i.name],u.showErrors()):(s={},o=r||u.defaultMessage(i,"remote"),s[i.name]=f.message=n.isFunction(o)?o(t):o,u.invalid[i.name]=!0,u.showErrors(s));f.valid=e;u.stopRequest(i,e)}},r)),"pending")}}});n.format=n.validator.format}(jQuery),function(n){var t={},i;n.ajaxPrefilter?n.ajaxPrefilter(function(n,i,r){var u=n.port;n.mode==="abort"&&(t[u]&&t[u].abort(),t[u]=r)}):(i=n.ajax,n.ajax=function(r){var f=("mode"in r?r:n.ajaxSettings).mode,u=("port"in r?r:n.ajaxSettings).port;return f==="abort"?(t[u]&&t[u].abort(),t[u]=i.apply(this,arguments),t[u]):i.apply(this,arguments)})}(jQuery),function(n){n.extend(n.fn,{validateDelegate:function(t,i,r){return this.bind(i,function(i){var u=n(i.target);if(u.is(t))return r.apply(u,arguments)})}})}(jQuery),function(n,t,i,r){"use strict";function f(n){return(typeof n=="string"||n instanceof String)&&(n=n.replace(/^[\\/'"]+|(;\s?})+|[\\/'"]+$/g,"")),n}n("head").has(".foundation-mq-small").length===0&&n("head").append('<meta class="foundation-mq-small">');n("head").has(".foundation-mq-medium").length===0&&n("head").append('<meta class="foundation-mq-medium">');n("head").has(".foundation-mq-large").length===0&&n("head").append('<meta class="foundation-mq-large">');n("head").has(".foundation-mq-xlarge").length===0&&n("head").append('<meta class="foundation-mq-xlarge">');n("head").has(".foundation-mq-xxlarge").length===0&&n("head").append('<meta class="foundation-mq-xxlarge">');n(function(){typeof FastClick!="undefined"&&typeof i.body!="undefined"&&FastClick.attach(i.body)});var u=function(t,r){return typeof t=="string"?r?n(r.querySelectorAll(t)):n(i.querySelectorAll(t)):n(t,r)};t.matchMedia=t.matchMedia||function(n){var u,i=n.documentElement,f=i.firstElementChild||i.firstChild,r=n.createElement("body"),t=n.createElement("div");return t.id="mq-test-1",t.style.cssText="position:absolute;top:-100em",r.style.background="none",r.appendChild(t),function(n){return t.innerHTML='&shy;<style media="'+n+'"> #mq-test-1 { width: 42px; }<\/style>',i.insertBefore(r,f),u=t.offsetWidth===42,i.removeChild(r),{matches:u,media:n}}}(i),function(){function e(){r&&(i(e),jQuery.fx.tick())}for(var r,n=0,u=["webkit","moz"],i=t.requestAnimationFrame,f=t.cancelAnimationFrame;n<u.length&&!i;n++)i=t[u[n]+"RequestAnimationFrame"],f=f||t[u[n]+"CancelAnimationFrame"]||t[u[n]+"CancelRequestAnimationFrame"];i?(t.requestAnimationFrame=i,t.cancelAnimationFrame=f,jQuery.fx.timer=function(n){n()&&jQuery.timers.push(n)&&!r&&(r=!0,e())},jQuery.fx.stop=function(){r=!1}):(t.requestAnimationFrame=function(i){var r=(new Date).getTime(),u=Math.max(0,16-(r-n)),f=t.setTimeout(function(){i(r+u)},u);return n=r+u,f},t.cancelAnimationFrame=function(n){clearTimeout(n)})}(jQuery);t.Foundation={name:"Foundation",version:"5.0.3",media_queries:{small:u(".foundation-mq-small").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),medium:u(".foundation-mq-medium").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),large:u(".foundation-mq-large").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xlarge:u(".foundation-mq-xlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xxlarge:u(".foundation-mq-xxlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},stylesheet:n("<style><\/style>").appendTo("head")[0].sheet,init:function(n,t,i,r,f){var s=[n,i,r,f],e=[],o;if(this.rtl=/rtl/i.test(u("html").attr("dir")),this.scope=n||this.scope,t&&typeof t=="string"&&!/reflow/i.test(t))this.libs.hasOwnProperty(t)&&e.push(this.init_lib(t,s));else for(o in this.libs)e.push(this.init_lib(o,t));return n},init_lib:function(n,t){return this.libs.hasOwnProperty(n)?(this.patch(this.libs[n]),t&&t.hasOwnProperty(n))?this.libs[n].init.apply(this.libs[n],[this.scope,t[n]]):(t=t instanceof Array?t:Array(t),this.libs[n].init.apply(this.libs[n],t)):function(){}},patch:function(n){n.scope=this.scope;n.data_options=this.lib_methods.data_options;n.bindings=this.lib_methods.bindings;n.S=u;n.rtl=this.rtl},inherit:function(n,t){for(var r=t.split(" "),i=r.length-1;i>=0;i--)this.lib_methods.hasOwnProperty(r[i])&&(this.libs[n.name][r[i]]=this.lib_methods[r[i]])},random_str:function(n){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i,r;for(n||(n=Math.floor(Math.random()*t.length)),i="",r=0;r<n;r++)i+=t[Math.floor(Math.random()*t.length)];return i},libs:{},lib_methods:{throttle:function(n,t){var i=null;return function(){var r=this,u=arguments;clearTimeout(i);i=setTimeout(function(){n.apply(r,u)},t)}},data_options:function(t){function h(n){return!isNaN(+n)&&n!==null&&n!==""&&n!==!1&&n!==!0}function s(t){return typeof t=="string"?n.trim(t):t}var e={},r,i,u,o,f=t.data("options");if(typeof f=="object")return f;for(u=(f||":").split(";"),o=u.length,r=o-1;r>=0;r--)i=u[r].split(":"),/true/i.test(i[1])&&(i[1]=!0),/false/i.test(i[1])&&(i[1]=!1),h(i[1])&&(i[1]=parseInt(i[1],10)),i.length===2&&i[0].length>0&&(e[s(i[0])]=s(i[1]));return e},delay:function(n,t){return setTimeout(n,t)},empty:function(n){if(n.length&&n.length>0)return!1;if(n.length&&n.length===0)return!0;for(var t in n)if(hasOwnProperty.call(n,t))return!1;return!0},register_media:function(t,i){Foundation.media_queries[t]===r&&(n("head").append('<meta class="'+i+'">'),Foundation.media_queries[t]=f(n("."+i).css("font-family")))},addCustomRule:function(n,t){if(t===r)Foundation.stylesheet.insertRule(n,Foundation.stylesheet.cssRules.length);else{var i=Foundation.media_queries[t];i!==r&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[t]+"{ "+n+" }")}},loaded:function(n,t){function i(){t(n[0])}function r(){this.one("load",i);if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var n=this.attr("src"),t=n.match(/\?/)?"&":"?";t+="random="+(new Date).getTime();this.attr("src",n+t)}}if(!n.attr("src")){i();return}n[0].complete||n[0].readyState===4?i():r.call(n)},bindings:function(t,i){var r=this,f=!u(this).data(this.name+"-init");if(typeof t=="string")return this[t].call(this,i);u(this.scope).is("[data-"+this.name+"]")?(u(this.scope).data(this.name+"-init",n.extend({},this.settings,i||t,this.data_options(u(this.scope)))),f&&this.events(this.scope)):u("[data-"+this.name+"]",this.scope).each(function(){var f=!u(this).data(r.name+"-init");u(this).data(r.name+"-init",n.extend({},r.settings,i||t,r.data_options(u(this))));f&&r.events(this)})}}};n.fn.foundation=function(){var n=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(n)),this})}}(jQuery,this,this.document),function(n,t){if(typeof exports=="object"&&exports)t(exports);else{var i={};t(i);typeof define=="function"&&define.amd?define(i):n.Mustache=i}}(this,function(n){function w(n,t){return p.call(n,t)}function b(n){return!w(a,n)}function e(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function g(n){return String(n).replace(/[&<>"'\/]/g,function(n){return d[n]})}function u(n){this.string=n;this.tail=n;this.pos=0}function t(n,t){this.view=n||{};this.parent=t;this._cache={}}function i(){this.clearCache()}function f(t,i,r,u){for(var o="",s,c,e,a,y,p,l=0,v=t.length;l<v;++l){s=t[l];c=s[1];switch(s[0]){case"#":if(e=r.lookup(c),typeof e=="object")if(h(e))for(a=0,y=e.length;a<y;++a)o+=f(s[4],i,r.push(e[a]),u);else e&&(o+=f(s[4],i,r.push(e),u));else typeof e=="function"?(p=u==null?null:u.slice(s[3],s[5]),e=e.call(r.view,p,function(n){return i.render(n,r)}),e!=null&&(o+=e)):e&&(o+=f(s[4],i,r,u));break;case"^":e=r.lookup(c);(!e||h(e)&&e.length===0)&&(o+=f(s[4],i,r,u));break;case">":e=i.getPartial(c);typeof e=="function"&&(o+=e(r));break;case"&":e=r.lookup(c);e!=null&&(o+=e);break;case"name":e=r.lookup(c);e!=null&&(o+=n.escape(e));break;case"text":o+=c}}return o}function nt(n){for(var f=[],r=f,i=[],t,o,u=0,e=n.length;u<e;++u){t=n[u];switch(t[0]){case"#":case"^":i.push(t);r.push(t);r=t[4]=[];break;case"/":o=i.pop();o[5]=t[2];r=i.length>0?i[i.length-1][4]:f;break;default:r.push(t)}}return f}function tt(n){for(var u=[],t,i,r=0,f=n.length;r<f;++r)t=n[r],t&&(t[0]==="text"&&i&&i[0]==="text"?(i[1]+=t[1],i[3]=t[3]):(i=t,u.push(t)));return u}function c(n){return[new RegExp(e(n[0])+"\\s*"),new RegExp("\\s*"+e(n[1]))]}function it(t,i){function st(){if(ft&&!it)while(g.length)delete w[g.pop()];else g=[];ft=!1;it=!1}var a,f,h,rt,et,ut,ot,k;if(t=t||"",i=i||n.tags,typeof i=="string"&&(i=i.split(o)),i.length!==2)throw new Error("Invalid tags: "+i.join(", "));for(var p=c(i),r=new u(t),d=[],w=[],g=[],ft=!1,it=!1;!r.eos();){if(a=r.pos,h=r.scanUntil(p[0]),h)for(ut=0,ot=h.length;ut<ot;++ut)rt=h.charAt(ut),b(rt)?g.push(w.length):it=!0,w.push(["text",rt,a,a+1]),a+=1,rt=="\n"&&st();if(!r.scan(p[0]))break;if(ft=!0,f=r.scan(y)||"name",r.scan(l),f==="="?(h=r.scanUntil(s),r.scan(s),r.scanUntil(p[1])):f==="{"?(h=r.scanUntil(new RegExp("\\s*"+e("}"+i[1]))),r.scan(v),r.scanUntil(p[1]),f="&"):h=r.scanUntil(p[1]),!r.scan(p[1]))throw new Error("Unclosed tag at "+r.pos);if(et=[f,h,a,r.pos],w.push(et),f==="#"||f==="^")d.push(et);else if(f==="/"){if(d.length===0)throw new Error('Unopened section "'+h+'" at '+a);if(k=d.pop(),k[1]!==h)throw new Error('Unclosed section "'+k[1]+'" at '+a);}else if(f==="name"||f==="{"||f==="&")it=!0;else if(f==="="){if(i=h.split(o),i.length!==2)throw new Error("Invalid tags at "+a+": "+i.join(", "));p=c(i)}}if(k=d.pop(),k)throw new Error('Unclosed section "'+k[1]+'" at '+r.pos);return w=tt(w),nt(w)}var l=/\s*/,o=/\s+/,a=/\S/,s=/\s*=/,v=/\s*\}/,y=/#|\^|\/|>|\{|&|=|!/,p=RegExp.prototype.test,k=Object.prototype.toString,h=Array.isArray||function(n){return k.call(n)==="[object Array]"},d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},r;u.prototype.eos=function(){return this.tail===""};u.prototype.scan=function(n){var t=this.tail.match(n);return t&&t.index===0?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""};u.prototype.scanUntil=function(n){var t,i=this.tail.search(n);switch(i){case-1:t=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i);this.tail=this.tail.substring(i);this.pos+=i}return t};t.make=function(n){return n instanceof t?n:new t(n)};t.prototype.push=function(n){return new t(n,this)};t.prototype.lookup=function(n){var t=this._cache[n],i,r,u;if(!t){if(n==".")t=this.view;else for(i=this;i;){if(n.indexOf(".")>0)for(t=i.view,r=n.split("."),u=0;t&&u<r.length;)t=t[r[u++]];else t=i.view[n];if(t!=null)break;i=i.parent}this._cache[n]=t}return typeof t=="function"&&(t=t.call(this.view)),t};i.prototype.clearCache=function(){this._cache={};this._partialCache={}};i.prototype.compile=function(t,i){var r=this._cache[t],u;return r||(u=n.parse(t,i),r=this._cache[t]=this.compileTokens(u,t)),r};i.prototype.compilePartial=function(n,t,i){var r=this.compile(t,i);return this._partialCache[n]=r,r};i.prototype.getPartial=function(n){return n in this._partialCache||!this._loadPartial||this.compilePartial(n,this._loadPartial(n)),this._partialCache[n]};i.prototype.compileTokens=function(n,i){var r=this;return function(u,e){if(e)if(typeof e=="function")r._loadPartial=e;else for(var o in e)r.compilePartial(o,e[o]);return f(n,r,t.make(u),i)}};i.prototype.render=function(n,t,i){return this.compile(n)(t,i)};n.name="mustache.js";n.version="0.7.2";n.tags=["{{","}}"];n.Scanner=u;n.Context=t;n.Writer=i;n.parse=it;n.escape=g;r=new i;n.clearCache=function(){return r.clearCache()};n.compile=function(n,t){return r.compile(n,t)};n.compilePartial=function(n,t,i){return r.compilePartial(n,t,i)};n.compileTokens=function(n,t){return r.compileTokens(n,t)};n.render=function(n,t,i){return r.render(n,t,i)};n.to_html=function(t,i,r,u){var f=n.render(t,i,r);if(typeof u=="function")u(f);else return f}}),function(n){function r(){return new Date(Date.UTC.apply(Date,arguments))}function c(t,i){var u=n(t).data(),f={},e,o=new RegExp("^"+i.toLowerCase()+"([A-Z])"),i=new RegExp("^"+i.toLowerCase()),r;for(r in u)i.test(r)&&(e=r.replace(o,function(n,t){return t.toLowerCase()}),f[e]=u[r]);return f}function l(t){var u={},r;if(i[t]||(t=t.split("-")[0],i[t]))return r=i[t],n.each(h,function(n,t){t in r&&(u[t]=r[t])}),u}var e=n(window),u=function(i,r){var u=this;this._process_options(r);this.element=n(i);this.isInline=!1;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1;this.hasInput=this.component&&this.element.find("input").length;this.component&&this.component.length===0&&(this.component=!1);this.picker=n(t.template);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right"));this.viewMode=this.o.startView;this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(n,t){return parseInt(t)+1});this._allow_update=!1;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=!0;this.update();this.showMode();this.isInline&&this.show()},o,s,f,h,i,t;u.prototype={constructor:u,_process_options:function(r){var u,o,h,e,s;this._o=n.extend({},this._o,r);u=this.o=n.extend({},this._o);o=u.language;i[o]||(o=o.split("-")[0],i[o]||(o=f.language));u.language=o;switch(u.startView){case 2:case"decade":u.startView=2;break;case 1:case"year":u.startView=1;break;default:u.startView=0}switch(u.minViewMode){case 1:case"months":u.minViewMode=1;break;case 2:case"years":u.minViewMode=2;break;default:u.minViewMode=0}if(u.startView=Math.max(u.startView,u.minViewMode),u.weekStart%=7,u.weekEnd=(u.weekStart+6)%7,h=t.parseFormat(u.format),u.startDate!==-Infinity&&(u.startDate=u.startDate?u.startDate instanceof Date?this._local_to_utc(this._zero_time(u.startDate)):t.parseDate(u.startDate,h,u.language):-Infinity),u.endDate!==Infinity&&(u.endDate=u.endDate?u.endDate instanceof Date?this._local_to_utc(this._zero_time(u.endDate)):t.parseDate(u.endDate,h,u.language):Infinity),u.daysOfWeekDisabled=u.daysOfWeekDisabled||[],n.isArray(u.daysOfWeekDisabled)||(u.daysOfWeekDisabled=u.daysOfWeekDisabled.split(/[,\s]*/)),u.daysOfWeekDisabled=n.map(u.daysOfWeekDisabled,function(n){return parseInt(n,10)}),e=String(u.orientation).toLowerCase().split(/\s+/g),s=u.orientation.toLowerCase(),e=n.grep(e,function(n){return/^auto|left|right|top|bottom$/.test(n)}),u.orientation={x:"auto",y:"auto"},s&&s!=="auto")if(e.length===1)switch(e[0]){case"top":case"bottom":u.orientation.y=e[0];break;case"left":case"right":u.orientation.x=e[0]}else s=n.grep(e,function(n){return/^left|right$/.test(n)}),u.orientation.x=s[0]||"auto",s=n.grep(e,function(n){return/^top|bottom$/.test(n)}),u.orientation.y=s[0]||"auto"},_events:[],_secondaryEvents:[],_applyEvents:function(n){for(var t=0,i,r;t<n.length;t++){i=n[t][0];r=n[t][1];i.on(r)}},_unapplyEvents:function(n){for(var t=0,i,r;t<n.length;t++)i=n[t][0],r=n[t][1],i.off(r)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:n.proxy(this.show,this),keyup:n.proxy(this.update,this),keydown:n.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:n.proxy(this.show,this),keyup:n.proxy(this.update,this),keydown:n.proxy(this.keydown,this)}],[this.component,{click:n.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:n.proxy(this.show,this)}]];this._secondaryEvents=[[this.picker,{click:n.proxy(this.click,this)}],[n(window),{resize:n.proxy(this.place,this)}],[n(document),{mousedown:n.proxy(function(n){this.element.is(n.target)||this.element.find(n.target).length||this.picker.is(n.target)||this.picker.find(n.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(i,r){var u=r||this.date,f=this._utc_to_local(u);this.element.trigger({type:i,date:f,format:n.proxy(function(n){var i=n||this.o.format;return t.formatDate(u,i,this.o.language)},this)})},show:function(n){this.isInline||this.picker.appendTo("body");this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();this._attachSecondaryEvents();n&&n.preventDefault();this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||delete this.element.data().date},_utc_to_local:function(n){return new Date(n.getTime()+n.getTimezoneOffset()*6e4)},_local_to_utc:function(n){return new Date(n.getTime()-n.getTimezoneOffset()*6e4)},_zero_time:function(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate())},_zero_utc_time:function(n){return new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()))},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return this.date},setDate:function(n){this.setUTCDate(this._local_to_utc(n))},setUTCDate:function(n){this.date=n;this.setValue()},setValue:function(){var n=this.getFormattedDate();this.isInput?this.element.val(n).change():this.component&&this.element.find("input").val(n).change()},getFormattedDate:function(n){return n===undefined&&(n=this.o.format),t.formatDate(this.date,n,this.o.language)},setStartDate:function(n){this._process_options({startDate:n});this.update();this.updateNavArrows()},setEndDate:function(n){this._process_options({endDate:n});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(n){this._process_options({daysOfWeekDisabled:n});this.update();this.updateNavArrows()},place:function(){var i,v,s;if(!this.isInline){var u=this.picker.outerWidth(),f=this.picker.outerHeight(),h=10,c=e.width(),y=e.height(),l=e.scrollTop(),p=parseInt(this.element.parents().filter(function(){return n(this).css("z-index")!="auto"}).first().css("z-index"))+10,t=this.component?this.component.parent().offset():this.element.offset(),a=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),w=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),r=t.left,o=t.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");this.o.orientation.x!=="auto"?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),this.o.orientation.x==="right"&&(r-=u-w)):(this.picker.addClass("datepicker-orient-left"),t.left<0?r-=t.left-h:t.left+u>c&&(r=c-u-h));i=this.o.orientation.y;i==="auto"&&(v=-l+t.top-f,s=l+y-(t.top+a+f),i=Math.max(v,s)===s?"top":"bottom");this.picker.addClass("datepicker-orient-"+i);i==="top"?o+=a:o-=f+parseInt(this.picker.css("padding-top"));this.picker.css({top:o,left:r,zIndex:p})}},_allow_update:!0,update:function(){if(this._allow_update){var r=new Date(this.date),n,i=!1;arguments&&arguments.length&&(typeof arguments[0]=="string"||arguments[0]instanceof Date)?(n=arguments[0],n instanceof Date&&(n=this._local_to_utc(n)),i=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date);this.date=t.parseDate(n,this.o.format,this.o.language);i?this.setValue():n?r.getTime()!==this.date.getTime()&&this._trigger("changeDate"):this._trigger("clearDate");this.date<this.o.startDate?(this.viewDate=new Date(this.o.startDate),this.date=new Date(this.o.startDate)):this.date>this.o.endDate?(this.viewDate=new Date(this.o.endDate),this.date=new Date(this.o.endDate)):(this.viewDate=new Date(this.date),this.date=new Date(this.date));this.fill()}},fillDow:function(){var r=this.o.weekStart,n="<tr>",t;for(this.o.calendarWeeks&&(t='<th class="cw">&nbsp;<\/th>',n+=t,this.picker.find(".datepicker-days thead tr:first-child").prepend(t));r<this.o.weekStart+7;)n+='<th class="dow">'+i[this.o.language].daysMin[r++%7]+"<\/th>";n+="<\/tr>";this.picker.find(".datepicker-days thead").append(n)},fillMonths:function(){for(var n="",t=0;t<12;)n+='<span class="month">'+i[this.o.language].monthsShort[t++]+"<\/span>";this.picker.find(".datepicker-months td").html(n)},setRange:function(t){t&&t.length?this.range=n.map(t,function(n){return n.valueOf()}):delete this.range;this.fill()},getClassNames:function(t){var i=[],r=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),e=this.date.valueOf(),u=new Date;return t.getUTCFullYear()<r||t.getUTCFullYear()==r&&t.getUTCMonth()<f?i.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()==r&&t.getUTCMonth()>f)&&i.push("new"),this.o.todayHighlight&&t.getUTCFullYear()==u.getFullYear()&&t.getUTCMonth()==u.getMonth()&&t.getUTCDate()==u.getDate()&&i.push("today"),e&&t.valueOf()==e&&i.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||n.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&i.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),n.inArray(t.valueOf(),this.range)!=-1&&i.push("selected")),i},fill:function(){var k=new Date(this.viewDate),u=k.getUTCFullYear(),d=k.getUTCMonth(),v=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,it=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,y=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,rt=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,ft=this.date&&this.date.valueOf(),p,f,w,h,o,s,e,a,c,tt,l;for(this.picker.find(".datepicker-days thead th.datepicker-switch").text(i[this.o.language].months[d]+" "+u),this.picker.find("tfoot th.today").text(i[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(i[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths(),f=r(u,d-1,28,0,0,0,0),w=t.getDaysInMonth(f.getUTCFullYear(),f.getUTCMonth()),f.setUTCDate(w),f.setUTCDate(w-(f.getUTCDay()-this.o.weekStart+7)%7),h=new Date(f),h.setUTCDate(h.getUTCDate()+42),h=h.valueOf(),o=[];f.valueOf()<h;){if(f.getUTCDay()==this.o.weekStart&&(o.push("<tr>"),this.o.calendarWeeks)){var g=new Date(+f+(this.o.weekStart-f.getUTCDay()-7)%7*864e5),nt=new Date(+g+(11-g.getUTCDay())%7*864e5),b=new Date(+(b=r(nt.getUTCFullYear(),0,1))+(11-b.getUTCDay())%7*864e5),ut=(nt-b)/6048e5+1;o.push('<td class="cw">'+ut+"<\/td>")}s=this.getClassNames(f);s.push("day");this.o.beforeShowDay!==n.noop&&(e=this.o.beforeShowDay(this._utc_to_local(f)),e===undefined?e={}:typeof e=="boolean"?e={enabled:e}:typeof e=="string"&&(e={classes:e}),e.enabled===!1&&s.push("disabled"),e.classes&&(s=s.concat(e.classes.split(/\s+/))),e.tooltip&&(p=e.tooltip));s=n.unique(s);o.push('<td class="'+s.join(" ")+'"'+(p?' title="'+p+'"':"")+">"+f.getUTCDate()+"<\/td>");f.getUTCDay()==this.o.weekEnd&&o.push("<\/tr>");f.setUTCDate(f.getUTCDate()+1)}for(this.picker.find(".datepicker-days tbody").empty().append(o.join("")),a=this.date&&this.date.getUTCFullYear(),c=this.picker.find(".datepicker-months").find("th:eq(1)").text(u).end().find("span").removeClass("active"),a&&a==u&&c.eq(this.date.getUTCMonth()).addClass("active"),(u<v||u>y)&&c.addClass("disabled"),u==v&&c.slice(0,it).addClass("disabled"),u==y&&c.slice(rt+1).addClass("disabled"),o="",u=parseInt(u/10,10)*10,tt=this.picker.find(".datepicker-years").find("th:eq(1)").text(u+"-"+(u+9)).end().find("td"),u-=1,l=-1;l<11;l++)o+='<span class="year'+(l==-1?" old":l==10?" new":"")+(a==u?" active":"")+(u<v||u>y?" disabled":"")+'">'+u+"<\/span>",u+=1;tt.html(o)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),n=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-Infinity&&n<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});this.o.endDate!==Infinity&&n>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-Infinity&&n<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});this.o.endDate!==Infinity&&n>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(i){var u,c,o,l,h;if(i.preventDefault(),u=n(i.target).closest("span, td, th"),u.length==1)switch(u[0].nodeName.toLowerCase()){case"th":switch(u[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":c=t.modes[this.viewMode].navStep*(u[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,c);this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,c);this.viewMode===1&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":o=new Date;o=r(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0);this.showMode(-2);l=this.o.todayBtn=="linked"?null:"view";this._setDate(o,l);break;case"clear":this.isInput?h=this.element:this.component&&(h=this.element.find("input"));h&&h.val("").change();this._trigger("changeDate");this.update();this.o.autoclose&&this.hide()}break;case"span":if(!u.is(".disabled")){if(this.viewDate.setUTCDate(1),u.is(".month")){var s=1,f=u.parent().find("span").index(u),e=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(f);this._trigger("changeMonth",this.viewDate);this.o.minViewMode===1&&this._setDate(r(e,f,s,0,0,0,0))}else{var e=parseInt(u.text(),10)||0,s=1,f=0;this.viewDate.setUTCFullYear(e);this._trigger("changeYear",this.viewDate);this.o.minViewMode===2&&this._setDate(r(e,f,s,0,0,0,0))}this.showMode(-1);this.fill()}break;case"td":if(u.is(".day")&&!u.is(".disabled")){var s=parseInt(u.text(),10)||1,e=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth();u.is(".old")?f===0?(f=11,e-=1):f-=1:u.is(".new")&&(f==11?(f=0,e+=1):f+=1);this._setDate(r(e,f,s,0,0,0,0))}}},_setDate:function(n,t){t&&t!="date"||(this.date=new Date(n));t&&t!="view"||(this.viewDate=new Date(n));this.fill();this.setValue();this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input"));i&&i.change();this.o.autoclose&&(!t||t=="date")&&this.hide()},moveMonth:function(n,t){var f;if(!t)return n;var i=new Date(n.valueOf()),e=i.getUTCDate(),o=i.getUTCMonth(),s=Math.abs(t),r,u;if(t=t>0?1:-1,s==1)u=t==-1?function(){return i.getUTCMonth()==o}:function(){return i.getUTCMonth()!=r},r=o+t,i.setUTCMonth(r),(r<0||r>11)&&(r=(r+12)%12);else{for(f=0;f<s;f++)i=this.moveMonth(i,t);r=i.getUTCMonth();i.setUTCDate(e);u=function(){return r!=i.getUTCMonth()}}while(u())i.setUTCDate(--e),i.setUTCMonth(r);return i},moveYear:function(n,t){return this.moveMonth(n,t*12)},dateWithinRange:function(n){return n>=this.o.startDate&&n<=this.o.endDate},keydown:function(n){var u,t,i,r,f;if(this.picker.is(":not(:visible)")){n.keyCode==27&&this.show();return}u=!1;switch(n.keyCode){case 27:this.hide();n.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=n.keyCode==37?-1:1;n.ctrlKey?(i=this.moveYear(this.date,t),r=this.moveYear(this.viewDate,t),this._trigger("changeYear",this.viewDate)):n.shiftKey?(i=this.moveMonth(this.date,t),r=this.moveMonth(this.viewDate,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+t),r=new Date(this.viewDate),r.setUTCDate(this.viewDate.getUTCDate()+t));this.dateWithinRange(i)&&(this.date=i,this.viewDate=r,this.setValue(),this.update(),n.preventDefault(),u=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=n.keyCode==38?-1:1;n.ctrlKey?(i=this.moveYear(this.date,t),r=this.moveYear(this.viewDate,t),this._trigger("changeYear",this.viewDate)):n.shiftKey?(i=this.moveMonth(this.date,t),r=this.moveMonth(this.viewDate,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+t*7),r=new Date(this.viewDate),r.setUTCDate(this.viewDate.getUTCDate()+t*7));this.dateWithinRange(i)&&(this.date=i,this.viewDate=r,this.setValue(),this.update(),n.preventDefault(),u=!0);break;case 13:this.hide();n.preventDefault();break;case 9:this.hide()}u&&(this._trigger("changeDate"),this.isInput?f=this.element:this.component&&(f=this.element.find("input")),f&&f.change())},showMode:function(n){n&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+n)));this.picker.find(">div").hide().filter(".datepicker-"+t.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};o=function(t,i){this.element=n(t);this.inputs=n.map(i.inputs,function(n){return n.jquery?n[0]:n});delete i.inputs;n(this.inputs).datepicker(i).bind("changeDate",n.proxy(this.dateUpdated,this));this.pickers=n.map(this.inputs,function(t){return n(t).data("datepicker")});this.updateDates()};o.prototype={updateDates:function(){this.dates=n.map(this.pickers,function(n){return n.date});this.updateRanges()},updateRanges:function(){var t=n.map(this.dates,function(n){return n.valueOf()});n.each(this.pickers,function(n,i){i.setRange(t)})},dateUpdated:function(t){var u=n(t.target).data("datepicker"),r=u.getUTCDate(),i=n.inArray(t.target,this.inputs),f=this.inputs.length;if(i!=-1){if(r<this.dates[i])while(i>=0&&r<this.dates[i])this.pickers[i--].setUTCDate(r);else if(r>this.dates[i])while(i<f&&r>this.dates[i])this.pickers[i++].setUTCDate(r);this.updateDates()}},remove:function(){n.map(this.pickers,function(n){n.remove()});delete this.element.data().datepicker}};s=n.fn.datepicker;n.fn.datepicker=function(t){var r=Array.apply(null,arguments),i;return r.shift(),this.each(function(){var s=n(this),e=s.data("datepicker"),a=typeof t=="object"&&t,y;if(!e){var v=c(this,"date"),p=n.extend({},f,v,a),w=l(p.language),h=n.extend({},f,w,v,a);s.is(".input-daterange")||h.inputs?(y={inputs:h.inputs||s.find("input").toArray()},s.data("datepicker",e=new o(this,n.extend(h,y)))):s.data("datepicker",e=new u(this,h))}if(typeof t=="string"&&typeof e[t]=="function"&&(i=e[t].apply(e,r),i!==undefined))return!1}),i!==undefined?i:this};f=n.fn.datepicker.defaults={autoclose:!1,beforeShowDay:n.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0};h=n.fn.datepicker.locale_opts=["format","rtl","weekStart"];n.fn.datepicker.Constructor=u;i=n.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};t={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(n){return n%4==0&&n%100!=0||n%400==0},getDaysInMonth:function(n,i){return[31,t.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][i]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(n){var t=n.replace(this.validParts,'\0').split('\0'),i=n.match(this.validParts);if(!t||!t.length||!i||i.length===0)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(f,e,o){var g,h,a,v,l,nt,s,k,p;if(f instanceof Date)return f;if(typeof e=="string"&&(e=t.parseFormat(e)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(f)){for(g=/([\-+]\d+)([dmwy])/,h=f.match(/([\-+]\d+)([dmwy])/g),f=new Date,s=0;s<h.length;s++){a=g.exec(h[s]);v=parseInt(a[1]);switch(a[2]){case"d":f.setUTCDate(f.getUTCDate()+v);break;case"m":f=u.prototype.moveMonth.call(u.prototype,f,v);break;case"w":f.setUTCDate(f.getUTCDate()+v*7);break;case"y":f=u.prototype.moveYear.call(u.prototype,f,v)}}return r(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),0,0,0)}var h=f&&f.match(this.nonpunctuation)||[],f=new Date,w={},d=["yyyy","yy","M","MM","m","mm","d","dd"],c={yyyy:function(n,t){return n.setUTCFullYear(t)},yy:function(n,t){return n.setUTCFullYear(2e3+t)},m:function(n,t){if(isNaN(n))return n;for(t-=1;t<0;)t+=12;for(t%=12,n.setUTCMonth(t);n.getUTCMonth()!=t;)n.setUTCDate(n.getUTCDate()-1);return n},d:function(n,t){return n.setUTCDate(t)}},y,b,a;if(c.M=c.MM=c.mm=c.m,c.dd=c.d,f=r(f.getFullYear(),f.getMonth(),f.getDate(),0,0,0),l=e.parts.slice(),h.length!=l.length&&(l=n(l).filter(function(t,i){return n.inArray(i,d)!==-1}).toArray()),h.length==l.length){for(s=0,nt=l.length;s<nt;s++){if(y=parseInt(h[s],10),a=l[s],isNaN(y))switch(a){case"MM":b=n(i[o].months).filter(function(){var n=this.slice(0,h[s].length),t=h[s].slice(0,n.length);return n==t});y=n.inArray(b[0],i[o].months)+1;break;case"M":b=n(i[o].monthsShort).filter(function(){var n=this.slice(0,h[s].length),t=h[s].slice(0,n.length);return n==t});y=n.inArray(b[0],i[o].monthsShort)+1}w[a]=y}for(s=0;s<d.length;s++)p=d[s],p in w&&!isNaN(w[p])&&(k=new Date(f),c[p](k,w[p]),isNaN(k)||(f=k))}return f},formatDate:function(r,u,f){var e,r,s,o,h;for(typeof u=="string"&&(u=t.parseFormat(u)),e={d:r.getUTCDate(),D:i[f].daysShort[r.getUTCDay()],DD:i[f].days[r.getUTCDay()],m:r.getUTCMonth()+1,M:i[f].monthsShort[r.getUTCMonth()],MM:i[f].months[r.getUTCMonth()],yy:r.getUTCFullYear().toString().substring(2),yyyy:r.getUTCFullYear()},e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m,r=[],s=n.extend([],u.separators),o=0,h=u.parts.length;o<=h;o++)s.length&&r.push(s.shift()),r.push(e[u.parts[o]]);return r.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;<\/th><th colspan="5" class="datepicker-switch"><\/th><th class="next">&raquo;<\/th><\/tr><\/thead>',contTemplate:'<tbody><tr><td colspan="7"><\/td><\/tr><\/tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"><\/th><\/tr><tr><th colspan="7" class="clear"><\/th><\/tr><\/tfoot>'};t.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+t.headTemplate+"<tbody><\/tbody>"+t.footTemplate+'<\/table><\/div><div class="datepicker-months"><table class="table-condensed">'+t.headTemplate+t.contTemplate+t.footTemplate+'<\/table><\/div><div class="datepicker-years"><table class="table-condensed">'+t.headTemplate+t.contTemplate+t.footTemplate+"<\/table><\/div><\/div>";n.fn.datepicker.DPGlobal=t;n.fn.datepicker.noConflict=function(){return n.fn.datepicker=s,this};n(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=n(this);i.data("datepicker")||(t.preventDefault(),i.datepicker("show"))});n(function(){n('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery),function(n,t,i,r){"use strict";var u=u||!1;Foundation.libs.joyride={name:"joyride",version:"5.0.3",defaults:{expose:!0,modal:!0,tip_location:"top",nub_position:"auto",scroll_speed:1500,scroll_animation:"linear",timer:0,start_timer_on_click:!0,start_offset:0,next_button:!0,tip_animation:"fade",pause_after:[],exposed:[],tip_animation_fade_speed:300,cookie_monster:!1,cookie_name:"joyride",cookie_domain:!1,cookie_expires:365,tip_container:"body",tip_location_patterns:{top:["bottom"],bottom:[],left:["right","top","bottom"],right:["left","top","bottom"]},post_ride_callback:function(){},post_step_callback:function(){},pre_step_callback:function(){},pre_ride_callback:function(){},post_expose_callback:function(){},template:{link:'<a href="#close" class="joyride-close-tip">&times;<\/a>',timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"><\/span><\/div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"><\/span><\/div>',wrapper:'<div class="joyride-content-wrapper"><\/div>',button:'<a href="#" class="btn-action joyride-next-tip"><\/a>',modal:'<div class="joyride-modal-bg"><\/div>',expose:'<div class="joyride-expose-wrapper"><\/div>',expose_cover:'<div class="joyride-expose-cover"><\/div>'},expose_add_class:""},init:function(n,t,i){Foundation.inherit(this,"throttle delay");this.settings=this.defaults;this.bindings(t,i)},events:function(){var i=this;n(this.scope).off(".joyride").on("click.fndtn.joyride",".joyride-next-tip, .joyride-modal-bg",function(n){n.preventDefault();this.settings.$li.next().length<1?this.end():this.settings.timer>0?(clearTimeout(this.settings.automate),this.hide(),this.show(),this.startTimer()):(this.hide(),this.show())}.bind(this)).on("click.fndtn.joyride",".joyride-close-tip",function(n){n.preventDefault();this.end()}.bind(this));n(t).off(".joyride").on("resize.fndtn.joyride",i.throttle(function(){if(n("[data-joyride]").length>0&&i.settings.$next_tip){if(i.settings.exposed.length>0){var t=n(i.settings.exposed);t.each(function(){var t=n(this);i.un_expose(t);i.expose(t)})}i.is_phone()?i.pos_phone():i.pos_default(!1,!0)}},100))},start:function(){var t=this,i=n("[data-joyride]",this.scope),r=["timer","scrollSpeed","startOffset","tipAnimationFadeSpeed","cookieExpires"],u=r.length;!i.length>0||(this.settings.init||this.events(),this.settings=i.data("joyride-init"),this.settings.$content_el=i,this.settings.$body=n(this.settings.tip_container),this.settings.body_offset=n(this.settings.tip_container).position(),this.settings.$tip_content=this.settings.$content_el.find("> li"),this.settings.paused=!1,this.settings.attempts=0,typeof n.cookie!="function"&&(this.settings.cookie_monster=!1),this.settings.cookie_monster&&(!this.settings.cookie_monster||n.cookie(this.settings.cookie_name))||(this.settings.$tip_content.each(function(i){var e=n(this),f;for(this.settings=n.extend({},t.defaults,t.data_options(e)),f=u-1;f>=0;f--)t.settings[r[f]]=parseInt(t.settings[r[f]],10);t.create({$li:e,index:i})}),!this.settings.start_timer_on_click&&this.settings.timer>0?(this.show("init"),this.startTimer()):this.show("init")))},resume:function(){this.set_li();this.show()},tip_template:function(t){var i,r;return t.tip_class=t.tip_class||"",i=n(this.settings.template.tip).addClass(t.tip_class),r=n.trim(n(t.li).html())+this.button_text(t.button_text)+this.settings.template.link+this.timer_instance(t.index),i.append(n(this.settings.template.wrapper)),i.first().attr("data-index",t.index),n(".joyride-content-wrapper",i).append(r),i[0]},timer_instance:function(t){return t===0&&this.settings.start_timer_on_click&&this.settings.timer>0||this.settings.timer===0?"":n(this.settings.template.timer)[0].outerHTML},button_text:function(t){return this.settings.next_button?(t=n.trim(t)||"Next",t=n(this.settings.template.button).append(t)[0].outerHTML):t="",t},create:function(t){var i=t.$li.attr("data-button")||t.$li.attr("data-text"),r=t.$li.attr("class"),u=n(this.tip_template({tip_class:r,index:t.index,button_text:i,li:t.$li}));n(this.settings.tip_container).append(u)},show:function(t){var i=null;this.settings.$li===r||n.inArray(this.settings.$li.index(),this.settings.pause_after)===-1?(this.settings.paused?this.settings.paused=!1:this.set_li(t),this.settings.attempts=0,this.settings.$li.length&&this.settings.$target.length>0?(t&&(this.settings.pre_ride_callback(this.settings.$li.index(),this.settings.$next_tip),this.settings.modal&&this.show_modal()),this.settings.pre_step_callback(this.settings.$li.index(),this.settings.$next_tip),this.settings.modal&&this.settings.expose&&this.expose(),this.settings.tip_settings=n.extend({},this.settings,this.data_options(this.settings.$li)),this.settings.timer=parseInt(this.settings.timer,10),this.settings.tip_settings.tip_location_pattern=this.settings.tip_location_patterns[this.settings.tip_settings.tip_location],/body/i.test(this.settings.$target.selector)||this.scroll_to(),this.is_phone()?this.pos_phone(!0):this.pos_default(!0),i=this.settings.$next_tip.find(".joyride-timer-indicator"),/pop/i.test(this.settings.tip_animation)?(i.width(0),this.settings.timer>0?(this.settings.$next_tip.show(),this.delay(function(){i.animate({width:i.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tip_animation_fade_speed)):this.settings.$next_tip.show()):/fade/i.test(this.settings.tip_animation)&&(i.width(0),this.settings.timer>0?(this.settings.$next_tip.fadeIn(this.settings.tip_animation_fade_speed).show(),this.delay(function(){i.animate({width:i.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tip_animation_fadeSpeed)):this.settings.$next_tip.fadeIn(this.settings.tip_animation_fade_speed)),this.settings.$current_tip=this.settings.$next_tip):this.settings.$li&&this.settings.$target.length<1?this.show():this.end()):this.settings.paused=!0},is_phone:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},hide:function(){this.settings.modal&&this.settings.expose&&this.un_expose();this.settings.modal||n(".joyride-modal-bg").hide();this.settings.$current_tip.css("visibility","hidden");setTimeout(n.proxy(function(){this.hide();this.css("visibility","visible")},this.settings.$current_tip),0);this.settings.post_step_callback(this.settings.$li.index(),this.settings.$current_tip)},set_li:function(n){n?(this.settings.$li=this.settings.$tip_content.eq(this.settings.start_offset),this.set_next_tip(),this.settings.$current_tip=this.settings.$next_tip):(this.settings.$li=this.settings.$li.next(),this.set_next_tip());this.set_target()},set_next_tip:function(){this.settings.$next_tip=n(".joyride-tip-guide").eq(this.settings.$li.index());this.settings.$next_tip.data("closed","")},set_target:function(){var t=this.settings.$li.attr("data-class"),r=this.settings.$li.attr("data-id"),u=function(){return r?n(i.getElementById(r)):t?n("."+t).first():n("body")};this.settings.$target=u()},scroll_to:function(){var r,i;r=n(t).height()/2;i=Math.ceil(this.settings.$target.offset().top-r+this.settings.$next_tip.outerHeight());i!=0&&n("html, body").animate({scrollTop:i},this.settings.scroll_speed,"swing")},paused:function(){return n.inArray(this.settings.$li.index()+1,this.settings.pause_after)===-1},restart:function(){this.hide();this.settings.$li=r;this.show("init")},pos_default:function(i,r){var s=Math.ceil(n(t).height()/2),h=this.settings.$next_tip.offset(),u=this.settings.$next_tip.find(".joyride-nub"),e=Math.ceil(u.outerWidth()/2),f=Math.ceil(u.outerHeight()/2),o=i||!1;o&&(this.settings.$next_tip.css("visibility","hidden"),this.settings.$next_tip.show());typeof r=="undefined"&&(r=!1);/body/i.test(this.settings.$target.selector)?this.settings.$li.length&&this.pos_modal(u):(this.bottom()?(this.rtl?this.settings.$next_tip.css({top:this.settings.$target.offset().top+f+this.settings.$target.outerHeight(),left:this.settings.$target.offset().left+this.settings.$target.outerWidth()-this.settings.$next_tip.outerWidth()}):this.settings.$next_tip.css({top:this.settings.$target.offset().top+f+this.settings.$target.outerHeight(),left:this.settings.$target.offset().left}),this.nub_position(u,this.settings.tip_settings.nub_position,"top")):this.top()?(this.rtl?this.settings.$next_tip.css({top:this.settings.$target.offset().top-this.settings.$next_tip.outerHeight()-f,left:this.settings.$target.offset().left+this.settings.$target.outerWidth()-this.settings.$next_tip.outerWidth()}):this.settings.$next_tip.css({top:this.settings.$target.offset().top-this.settings.$next_tip.outerHeight()-f,left:this.settings.$target.offset().left}),this.nub_position(u,this.settings.tip_settings.nub_position,"bottom")):this.right()?(this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:this.outerWidth(this.settings.$target)+this.settings.$target.offset().left+e}),this.nub_position(u,this.settings.tip_settings.nub_position,"left")):this.left()&&(this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:this.settings.$target.offset().left-this.outerWidth(this.settings.$next_tip)-e}),this.nub_position(u,this.settings.tip_settings.nub_position,"right")),!this.visible(this.corners(this.settings.$next_tip))&&this.settings.attempts<this.settings.tip_settings.tip_location_pattern.length&&(u.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),this.settings.tip_settings.tip_location=this.settings.tip_settings.tip_location_pattern[this.settings.attempts],this.settings.attempts++,this.pos_default()));o&&(this.settings.$next_tip.hide(),this.settings.$next_tip.css("visibility","visible"))},pos_phone:function(t){var f=this.settings.$next_tip.outerHeight(),o=this.settings.$next_tip.offset(),e=this.settings.$target.outerHeight(),i=n(".joyride-nub",this.settings.$next_tip),r=Math.ceil(i.outerHeight()/2),u=t||!1;i.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left");u&&(this.settings.$next_tip.css("visibility","hidden"),this.settings.$next_tip.show());/body/i.test(this.settings.$target.selector)?this.settings.$li.length&&this.pos_modal(i):this.top()?(this.settings.$next_tip.offset({top:this.settings.$target.offset().top-f-r}),i.addClass("bottom")):(this.settings.$next_tip.offset({top:this.settings.$target.offset().top+e+r}),i.addClass("top"));u&&(this.settings.$next_tip.hide(),this.settings.$next_tip.css("visibility","visible"))},pos_modal:function(n){this.center();n.hide();this.show_modal()},show_modal:function(){if(!this.settings.$next_tip.data("closed")){var t=n(".joyride-modal-bg");t.length<1&&n("body").append(this.settings.template.modal).show();/pop/i.test(this.settings.tip_animation)?t.show():t.fadeIn(this.settings.tip_animation_fade_speed)}},expose:function(){var r,u,i,f,e,o="expose-"+Math.floor(Math.random()*1e4);if(arguments.length>0&&arguments[0]instanceof n)i=arguments[0];else if(this.settings.$target&&!/body/i.test(this.settings.$target.selector))i=this.settings.$target;else return!1;if(i.length<1)return t.console&&console.error("element not valid",i),!1;r=n(this.settings.template.expose);this.settings.$body.append(r);r.css({top:i.offset().top,left:i.offset().left,width:i.outerWidth(!0),height:i.outerHeight(!0)});u=n(this.settings.template.expose_cover);f={zIndex:i.css("z-index"),position:i.css("position")};e=i.attr("class")==null?"":i.attr("class");i.css("z-index",parseInt(r.css("z-index"))+1);f.position=="static"&&i.css("position","relative");i.data("expose-css",f);i.data("orig-class",e);i.attr("class",e+" "+this.settings.expose_add_class);u.css({top:i.offset().top,left:i.offset().left,width:i.outerWidth(!0),height:i.outerHeight(!0)});this.settings.modal&&this.show_modal();this.settings.$body.append(u);r.addClass(o);u.addClass(o);i.data("expose",o);this.settings.post_expose_callback(this.settings.$li.index(),this.settings.$next_tip,i);this.add_exposed(i)},un_expose:function(){var u,i,f,r,e,o=!1;if(arguments.length>0&&arguments[0]instanceof n)i=arguments[0];else if(this.settings.$target&&!/body/i.test(this.settings.$target.selector))i=this.settings.$target;else return!1;if(i.length<1)return t.console&&console.error("element not valid",i),!1;u=i.data("expose");f=n("."+u);arguments.length>1&&(o=arguments[1]);o===!0?n(".joyride-expose-wrapper,.joyride-expose-cover").remove():f.remove();r=i.data("expose-css");r.zIndex=="auto"?i.css("z-index",""):i.css("z-index",r.zIndex);r.position!=i.css("position")&&(r.position=="static"?i.css("position",""):i.css("position",r.position));e=i.data("orig-class");i.attr("class",e);i.removeData("orig-classes");i.removeData("expose");i.removeData("expose-z-index");this.remove_exposed(i)},add_exposed:function(t){this.settings.exposed=this.settings.exposed||[];t instanceof n||typeof t=="object"?this.settings.exposed.push(t[0]):typeof t=="string"&&this.settings.exposed.push(t)},remove_exposed:function(t){var r,u,i;for(t instanceof n?r=t[0]:typeof t=="string"&&(r=t),this.settings.exposed=this.settings.exposed||[],u=this.settings.exposed.length,i=0;i<u;i++)if(this.settings.exposed[i]==r){this.settings.exposed.splice(i,1);return}},center:function(){var i=n(t);return this.settings.$next_tip.css({top:(i.height()-this.settings.$next_tip.outerHeight())/2+i.scrollTop(),left:(i.width()-this.settings.$next_tip.outerWidth())/2+i.scrollLeft()}),!0},bottom:function(){return/bottom/i.test(this.settings.tip_settings.tip_location)},top:function(){return/top/i.test(this.settings.tip_settings.tip_location)},right:function(){return/right/i.test(this.settings.tip_settings.tip_location)},left:function(){return/left/i.test(this.settings.tip_settings.tip_location)},corners:function(i){var r=n(t),s=r.height()/2,u=Math.ceil(this.settings.$target.offset().top-s+this.settings.$next_tip.outerHeight()),h=r.width()+r.scrollLeft(),o=r.height()+u,f=r.height()+r.scrollTop(),e=r.scrollTop();return u<e&&(e=u<0?0:u),o>f&&(f=o),[i.offset().top<e,h<i.offset().left+i.outerWidth(),f<i.offset().top+i.outerHeight(),r.scrollLeft()>i.offset().left]},visible:function(n){for(var t=n.length;t--;)if(n[t])return!1;return!0},nub_position:function(n,t,i){t==="auto"?n.addClass(i):n.addClass(t)},startTimer:function(){this.settings.$li.length?this.settings.automate=setTimeout(function(){this.hide();this.show();this.startTimer()}.bind(this),this.settings.timer):clearTimeout(this.settings.automate)},end:function(){this.settings.cookie_monster&&n.cookie(this.settings.cookie_name,"ridden",{expires:this.settings.cookie_expires,domain:this.settings.cookie_domain});this.settings.timer>0&&clearTimeout(this.settings.automate);this.settings.modal&&this.settings.expose&&this.un_expose();this.settings.$next_tip.data("closed",!0);n(".joyride-modal-bg").hide();this.settings.$current_tip.hide();this.settings.post_step_callback(this.settings.$li.index(),this.settings.$current_tip);this.settings.post_ride_callback(this.settings.$li.index(),this.settings.$current_tip);n(".joyride-tip-guide").remove()},off:function(){n(this.scope).off(".joyride");n(t).off(".joyride");n(".joyride-close-tip, .joyride-next-tip, .joyride-modal-bg").off(".joyride");n(".joyride-tip-guide, .joyride-modal-bg").remove();clearTimeout(this.settings.automate);this.settings={}},reflow:function(){}}}(jQuery,this,this.document),function(n){n.fn.counter=function(t){function e(t){n.error(f+": "+t)}var r,f="counter",i={container:null,item:null,singular:null,plurlal:null,monitor:!1,onUpdate:function(){}},u={init:function(t){n.extend(i,t);var o=r.data("counter");if(o&&typeof o=="object"&&n.extend(i,o),i.container&&i.item||e("_settings.container and _settings.item are required."),typeof i.container=="string"&&(i.container=n(i.container)),r.data(f,i),i.monitor)i.container.on("DOMSubtreeModified",function(n){n.target.innerHTML.length>0&&u.update()})},update:function(){var n=i.container.find(i.item).length,t=n+" "+(n==1?i.singular:i.plural);r.html(t);i.onUpdate(n)}};if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).counter(t)});if(r=n(this),u[t])return i=r.data(f),u[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)e("Method "+t+" does not exist");else return u.init.apply(this,arguments)}}(jQuery,window),function(n,t){typeof exports=="object"?module.exports=t(require("jquery")):typeof define=="function"&&define.amd?define("EasyPieChart",["jquery"],t):t(n.jQuery)}(this,function(n){var t=function(n,t){var f,r=document.createElement("canvas"),i,u,e;typeof G_vmlCanvasManager!="undefined"&&G_vmlCanvasManager.initElement(r);i=r.getContext("2d");r.width=r.height=t.size;n.appendChild(r);u=1;window.devicePixelRatio>1&&(u=window.devicePixelRatio,r.style.width=r.style.height=[t.size,"px"].join(""),r.width=r.height=t.size*u,i.scale(u,u));i.translate(t.size/2,t.size/2);i.rotate((-1/2+t.rotate/180)*Math.PI);e=(t.size-t.lineWidth)/2;t.scaleColor&&t.scaleLength&&(e-=t.scaleLength+2);Date.now=Date.now||function(){return+new Date};var o=function(n,t,r){r=Math.min(Math.max(0,r||1),1);i.beginPath();i.arc(0,0,e,0,Math.PI*2*r,!1);i.strokeStyle=n;i.lineWidth=t;i.stroke()},c=function(){var u,r,n=24;for(i.lineWidth=1,i.fillStyle=t.scaleColor,i.save(),n=24;n>0;--n)n%6==0?(r=t.scaleLength,u=0):(r=t.scaleLength*.6,u=t.scaleLength-r),i.fillRect(-t.size/2+u,0,r,1),i.rotate(Math.PI/12);i.restore()},s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)}}(),h=function(){t.scaleColor&&c();t.trackColor&&o(t.trackColor,t.lineWidth)};this.clear=function(){i.clearRect(t.size/-2,t.size/-2,t.size,t.size)};this.draw=function(n){!t.scaleColor&&!t.trackColor?this.clear():i.getImageData&&i.putImageData?f?i.putImageData(f,0,0):(h(),f=i.getImageData(0,0,t.size*u,t.size*u)):(this.clear(),h());i.lineCap=t.lineCap;var r;r=typeof t.barColor=="function"?t.barColor(n):t.barColor;n>0&&o(r,t.lineWidth,n/100)}.bind(this);this.animate=function(n,i){var u=Date.now(),r;t.onStart(n,i);r=function(){var f=Math.min(Date.now()-u,t.animate),e=t.easing(this,f,n,i-n,t.animate);this.draw(e);t.onStep(n,i,e);if(f>=t.animate)t.onStop(n,i);else s(r)}.bind(this);s(r)}.bind(this)},i=function(n,i){var u={barColor:"#ef1e25",trackColor:"#f9f9f9",scaleColor:"#dfe0e0",scaleLength:5,lineCap:"round",lineWidth:3,size:110,rotate:0,animate:1e3,easing:function(n,t,i,r,u){return(t=t/(u/2),t<1)?r/2*t*t+i:-r/2*(--t*(t-2)-1)+i},onStart:function(){return},onStep:function(){return},onStop:function(){return}};if(typeof t!="undefined")u.renderer=t;else if(typeof SVGRenderer!="undefined")u.renderer=SVGRenderer;else throw new Error("Please load either the SVG- or the CanvasRenderer");var r={},f=0,e=function(){this.el=n;this.options=r;for(var t in u)u.hasOwnProperty(t)&&(r[t]=i&&typeof i[t]!="undefined"?i[t]:u[t],typeof r[t]=="function"&&(r[t]=r[t].bind(this)));r.easing=typeof r.easing=="string"&&typeof jQuery!="undefined"&&jQuery.isFunction(jQuery.easing[r.easing])?jQuery.easing[r.easing]:u.easing;this.renderer=new r.renderer(n,r);this.renderer.draw(f);n.dataset&&n.dataset.percent?this.update(parseFloat(n.dataset.percent)):n.getAttribute&&n.getAttribute("data-percent")&&this.update(parseFloat(n.getAttribute("data-percent")))}.bind(this);this.update=function(n){return n=parseFloat(n),r.animate?this.renderer.animate(f,n):this.renderer.draw(n),f=n,this}.bind(this);e()};n.fn.easyPieChart=function(t){return this.each(function(){n.data(this,"easyPieChart")||n.data(this,"easyPieChart",new i(this,t))})}}),function(n){n.color={};n.color.make=function(t,i,r,u){var f={};return f.r=t||0,f.g=i||0,f.b=r||0,f.a=u!=null?u:1,f.add=function(n,t){for(var i=0;i<n.length;++i)f[n.charAt(i)]+=t;return f.normalize()},f.scale=function(n,t){for(var i=0;i<n.length;++i)f[n.charAt(i)]*=t;return f.normalize()},f.toString=function(){return f.a>=1?"rgb("+[f.r,f.g,f.b].join(",")+")":"rgba("+[f.r,f.g,f.b,f.a].join(",")+")"},f.normalize=function(){function n(n,t,i){return t<n?n:t>i?i:t}return f.r=n(0,parseInt(f.r),255),f.g=n(0,parseInt(f.g),255),f.b=n(0,parseInt(f.b),255),f.a=n(0,f.a,1),f},f.clone=function(){return n.color.make(f.r,f.b,f.g,f.a)},f.normalize()};n.color.extract=function(t,i){var r;do{if(r=t.css(i).toLowerCase(),r!=""&&r!="transparent")break;t=t.parent()}while(t.length&&!n.nodeName(t.get(0),"body"));return r=="rgba(0, 0, 0, 0)"&&(r="transparent"),n.color.parse(r)};n.color.parse=function(i){var r,u=n.color.make,f;return(r=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(i))?u(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10)):(r=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))?u(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),parseFloat(r[4])):(r=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(i))?u(parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55):(r=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))?u(parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55,parseFloat(r[4])):(r=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(i))?u(parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)):(r=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(i))?u(parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)):(f=n.trim(i).toLowerCase(),f=="transparent"?u(255,255,255,0):(r=t[f]||[0,0,0],u(r[0],r[1],r[2])))};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(n){function t(t,i){var r=i.children("."+t)[0];if(r==null&&(r=document.createElement("canvas"),r.className=t,n(r).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(i),!r.getContext))if(window.G_vmlCanvasManager)r=window.G_vmlCanvasManager.initElement(r);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=r;var u=this.context=r.getContext("2d"),f=window.devicePixelRatio||1,e=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1;this.pixelRatio=f/e;this.resize(i.width(),i.height());this.textContainer=null;this.text={};this._textCache={}}function r(i,r,f,e){function nt(n,t){t=[l].concat(t);for(var i=0;i<n.length;++i)n[i].apply(this,t)}function ui(){for(var u={Canvas:t},r,i=0;i<e.length;++i)r=e[i],r.init(l,u),r.options&&n.extend(!0,o,r.options)}function fi(t){var f;n.extend(!0,o,t);t&&t.colors&&(o.colors=t.colors);o.xaxis.color==null&&(o.xaxis.color=n.color.parse(o.grid.color).scale("a",.22).toString());o.yaxis.color==null&&(o.yaxis.color=n.color.parse(o.grid.color).scale("a",.22).toString());o.xaxis.tickColor==null&&(o.xaxis.tickColor=o.grid.tickColor||o.xaxis.color);o.yaxis.tickColor==null&&(o.yaxis.tickColor=o.grid.tickColor||o.yaxis.color);o.grid.borderColor==null&&(o.grid.borderColor=o.grid.color);o.grid.tickColor==null&&(o.grid.tickColor=n.color.parse(o.grid.color).scale("a",.22).toString());for(var r,s=i.css("font-size"),c=s?+s.replace("px",""):13,h={style:i.css("font-style"),size:Math.round(.8*c),variant:i.css("font-variant"),weight:i.css("font-weight"),family:i.css("font-family")},e=o.xaxes.length||1,u=0;u<e;++u)r=o.xaxes[u],r&&!r.tickColor&&(r.tickColor=r.color),r=n.extend(!0,{},o.xaxis,r),o.xaxes[u]=r,r.font&&(r.font=n.extend({},h,r.font),r.font.color||(r.font.color=r.color),r.font.lineHeight||(r.font.lineHeight=Math.round(r.font.size*1.15)));for(e=o.yaxes.length||1,u=0;u<e;++u)r=o.yaxes[u],r&&!r.tickColor&&(r.tickColor=r.color),r=n.extend(!0,{},o.yaxis,r),o.yaxes[u]=r,r.font&&(r.font=n.extend({},h,r.font),r.font.color||(r.font.color=r.color),r.font.lineHeight||(r.font.lineHeight=Math.round(r.font.size*1.15)));for(o.xaxis.noTicks&&o.xaxis.ticks==null&&(o.xaxis.ticks=o.xaxis.noTicks),o.yaxis.noTicks&&o.yaxis.ticks==null&&(o.yaxis.ticks=o.yaxis.noTicks),o.x2axis&&(o.xaxes[1]=n.extend(!0,{},o.xaxis,o.x2axis),o.xaxes[1].position="top"),o.y2axis&&(o.yaxes[1]=n.extend(!0,{},o.yaxis,o.y2axis),o.yaxes[1].position="right"),o.grid.coloredAreas&&(o.grid.markings=o.grid.coloredAreas),o.grid.coloredAreasColor&&(o.grid.markingsColor=o.grid.coloredAreasColor),o.lines&&n.extend(!0,o.series.lines,o.lines),o.points&&n.extend(!0,o.series.points,o.points),o.bars&&n.extend(!0,o.series.bars,o.bars),o.shadowSize!=null&&(o.series.shadowSize=o.shadowSize),o.highlightColor!=null&&(o.series.highlightColor=o.highlightColor),u=0;u<o.xaxes.length;++u)et(y,u+1).options=o.xaxes[u];for(u=0;u<o.yaxes.length;++u)et(w,u+1).options=o.yaxes[u];for(f in p)o.hooks[f]&&o.hooks[f].length&&(p[f]=p[f].concat(o.hooks[f]));nt(p.processOptions,[o])}function ht(n){c=ei(n);si();hi()}function ei(t){for(var u=[],r,i=0;i<t.length;++i)r=n.extend(!0,{},o.series),t[i].data!=null?(r.data=t[i].data,delete t[i].data,n.extend(!0,r,t[i]),t[i].data=r.data):r.data=t[i],u.push(r);return u}function ft(n,t){var i=n[t+"axis"];return typeof i=="object"&&(i=i.n),typeof i!="number"&&(i=1),i}function it(){return n.grep(y.concat(w),function(n){return n})}function ct(n){for(var i={},t,r=0;r<y.length;++r)t=y[r],t&&t.used&&(i["x"+t.n]=t.c2p(n.left));for(r=0;r<w.length;++r)t=w[r],t&&t.used&&(i["y"+t.n]=t.c2p(n.top));return i.x1!==undefined&&(i.x=i.x1),i.y1!==undefined&&(i.y=i.y1),i}function oi(n){for(var u={},t,i,r=0;r<y.length;++r)if(t=y[r],t&&t.used&&(i="x"+t.n,n[i]==null&&t.n==1&&(i="x"),n[i]!=null)){u.left=t.p2c(n[i]);break}for(r=0;r<w.length;++r)if(t=w[r],t&&t.used&&(i="y"+t.n,n[i]==null&&t.n==1&&(i="y"),n[i]!=null)){u.top=t.p2c(n[i]);break}return u}function et(t,i){return t[i-1]||(t[i-1]={n:i,direction:t==y?"x":"y",options:n.extend(!0,{},t==y?o.xaxis:o.yaxis)}),t[i-1]}function si(){for(var f=c.length,e=-1,u,h,t,l,a,i=0;i<c.length;++i)u=c[i].color,u!=null&&(f--,typeof u=="number"&&u>e&&(e=u));f<=e&&(f=e+1);var v,s=[],p=o.colors,b=p.length,r=0;for(i=0;i<f;i++)v=n.color.parse(p[i%b]||"#666"),i%b==0&&i&&(r=r>=0?r<.5?-r-.2:0:-r),s[i]=v.scale("rgb",1+r);for(h=0,i=0;i<c.length;++i){if(t=c[i],t.color==null?(t.color=s[h].toString(),++h):typeof t.color=="number"&&(t.color=s[t.color].toString()),t.lines.show==null){a=!0;for(l in t)if(t[l]&&t[l].show){a=!1;break}a&&(t.lines.show=!0)}t.lines.zero==null&&(t.lines.zero=!!t.lines.fill);t.xaxis=et(y,ft(t,"x"));t.yaxis=et(w,ft(t,"y"))}}function hi(){function b(n,t,i){t<n.datamin&&t!=-v&&(n.datamin=t);i>n.datamax&&i!=v&&(n.datamax=i)}var y=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY,v=Number.MAX_VALUE,f,l,e,r,t,u,h,i,s,ut,ft,o,et,ot,k,a;for(n.each(it(),function(n,t){t.datamin=y;t.datamax=w;t.used=!1}),f=0;f<c.length;++f)t=c[f],t.datapoints={points:[]},nt(p.processRawData,[t,t.data,t.datapoints]);for(f=0;f<c.length;++f)if(t=c[f],ft=t.data,o=t.datapoints.format,o||(o=[],o.push({x:!0,number:!0,required:!0}),o.push({y:!0,number:!0,required:!0}),(t.bars.show||t.lines.show&&t.lines.fill)&&(et=!!(t.bars.show&&t.bars.zero||t.lines.show&&t.lines.zero),o.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:et}),t.bars.horizontal&&(delete o[o.length-1].y,o[o.length-1].x=!0)),t.datapoints.format=o),t.datapoints.pointsize==null)for(t.datapoints.pointsize=o.length,h=t.datapoints.pointsize,u=t.datapoints.points,ot=t.lines.show&&t.lines.steps,t.xaxis.used=t.yaxis.used=!0,l=e=0;l<ft.length;++l,e+=h){if(ut=ft[l],k=ut==null,!k)for(r=0;r<h;++r)i=ut[r],s=o[r],s&&(s.number&&i!=null&&(i=+i,isNaN(i)?i=null:i==Infinity?i=v:i==-Infinity&&(i=-v)),i==null&&(s.required&&(k=!0),s.defaultValue!=null&&(i=s.defaultValue))),u[e+r]=i;if(k)for(r=0;r<h;++r)i=u[e+r],i!=null&&(s=o[r],s.autoscale!==!1&&(s.x&&b(t.xaxis,i,i),s.y&&b(t.yaxis,i,i))),u[e+r]=null;else if(ot&&e>0&&u[e-h]!=null&&u[e-h]!=u[e]&&u[e-h+1]!=u[e+1]){for(r=0;r<h;++r)u[e+h+r]=u[e+r];u[e+1]=u[e-h+1];e+=h}}for(f=0;f<c.length;++f)t=c[f],nt(p.processDatapoints,[t,t.datapoints]);for(f=0;f<c.length;++f){t=c[f];u=t.datapoints.points;h=t.datapoints.pointsize;o=t.datapoints.format;var d=y,g=y,tt=w,rt=w;for(l=0;l<u.length;l+=h)if(u[l]!=null)for(r=0;r<h;++r)(i=u[l+r],s=o[r],s&&s.autoscale!==!1&&i!=v&&i!=-v)&&(s.x&&(i<d&&(d=i),i>tt&&(tt=i)),s.y&&(i<g&&(g=i),i>rt&&(rt=i)));if(t.bars.show){switch(t.bars.align){case"left":a=0;break;case"right":a=-t.bars.barWidth;break;default:a=-t.bars.barWidth/2}t.bars.horizontal?(g+=a,rt+=a+t.bars.barWidth):(d+=a,tt+=a+t.bars.barWidth)}b(t.xaxis,d,tt);b(t.yaxis,g,rt)}n.each(it(),function(n,t){t.datamin==y&&(t.datamin=null);t.datamax==w&&(t.datamax=null)})}function ci(){i.css("padding",0).children().filter(function(){return!n(this).hasClass("flot-overlay")&&!n(this).hasClass("flot-base")}).remove();i.css("position")=="static"&&i.css("position","relative");a=new t("flot-base",i);tt=new t("flot-overlay",i);s=a.context;v=tt.context;k=n(tt.element).unbind();var r=i.data("plot");r&&(r.shutdown(),tt.clear());i.data("plot",l)}function li(){o.grid.hoverable&&(k.mousemove(bt),k.bind("mouseleave",kt));o.grid.clickable&&k.click(dt);nt(p.bindEvents,[k])}function lt(){rt&&clearTimeout(rt);k.unbind("mousemove",bt);k.unbind("mouseleave",kt);k.unbind("click",dt);nt(p.shutdown,[k])}function ai(n){function u(n){return n}var i,r,t=n.options.transform||u,f=n.options.inverseTransform;n.direction=="x"?(i=n.scale=d/Math.abs(t(n.max)-t(n.min)),r=Math.min(t(n.max),t(n.min))):(i=n.scale=b/Math.abs(t(n.max)-t(n.min)),i=-i,r=Math.max(t(n.max),t(n.min)));n.p2c=t==u?function(n){return(n-r)*i}:function(n){return(t(n)-r)*i};n.c2p=f?function(n){return f(r+n/i)}:function(n){return r+n/i}}function vi(n){for(var t=n.options,u=n.ticks||[],i=t.labelWidth||0,f=t.labelHeight||0,s=i||(n.direction=="x"?Math.floor(a.width/(u.length||1)):null),h=n.direction+"Axis "+n.direction+n.n+"Axis",c="flot-"+n.direction+"-axis flot-"+n.direction+n.n+"-axis "+h,l=t.font||"flot-tick-label tickLabel",e,o,r=0;r<u.length;++r)(e=u[r],e.label)&&(o=a.getTextInfo(c,e.label,l,null,s),i=Math.max(i,o.width),f=Math.max(f,o.height));n.labelWidth=t.labelWidth||i;n.labelHeight=t.labelHeight||f}function yi(t){var r=t.labelWidth,u=t.labelHeight,e=t.options.position,l=t.direction==="x",f=t.options.tickLength,i=o.grid.axisMargin,s=o.grid.labelMargin,v=!0,p=!0,b=!0,c=!1;n.each(l?y:w,function(n,i){i&&i.reserveSpace&&(i===t?c=!0:i.options.position===e&&(c?p=!1:v=!1),c||(b=!1))});p&&(i=0);f==null&&(f=b?"full":5);isNaN(+f)||(s+=+f);l?(u+=s,e=="bottom"?(h.bottom+=u+i,t.box={top:a.height-h.bottom,height:u}):(t.box={top:h.top+i,height:u},h.top+=u+i)):(r+=s,e=="left"?(t.box={left:h.left+i,width:r},h.left+=r+i):(h.right+=r+i,t.box={left:a.width-h.right,width:r}));t.position=e;t.tickLength=f;t.box.padding=s;t.innermost=v}function pi(n){n.direction=="x"?(n.box.left=h.left-n.labelWidth/2,n.box.width=a.width-h.left-h.right+n.labelWidth):(n.box.top=h.top-n.labelHeight/2,n.box.height=a.height-h.bottom-h.top+n.labelHeight)}function wi(){var i=o.grid.minBorderMargin,r,t;if(i==null)for(i=0,r=0;r<c.length;++r)i=Math.max(i,2*(c[r].points.radius+c[r].points.lineWidth/2));t={left:i,right:i,top:i,bottom:i};n.each(it(),function(n,i){if(i.reserveSpace&&i.ticks&&i.ticks.length){var r=i.ticks[i.ticks.length-1];i.direction==="x"?(t.left=Math.max(t.left,i.labelWidth/2),r.v<=i.max&&(t.right=Math.max(t.right,i.labelWidth/2))):(t.bottom=Math.max(t.bottom,i.labelHeight/2),r.v<=i.max&&(t.top=Math.max(t.top,i.labelHeight/2)))}});h.left=Math.ceil(Math.max(t.left,h.left));h.right=Math.ceil(Math.max(t.right,h.right));h.top=Math.ceil(Math.max(t.top,h.top));h.bottom=Math.ceil(Math.max(t.bottom,h.bottom))}function at(){var r,e=it(),u=o.grid.show,f,t,i;for(t in h)f=o.grid.margin||0,h[t]=typeof f=="number"?f:f[t]||0;nt(p.processOffset,[h]);for(t in h)h[t]+=typeof o.grid.borderWidth=="object"?u?o.grid.borderWidth[t]:0:u?o.grid.borderWidth:0;if(n.each(e,function(n,t){t.show=t.options.show;t.show==null&&(t.show=t.used);t.reserveSpace=t.show||t.options.reserveSpace;bi(t)}),u){for(i=n.grep(e,function(n){return n.reserveSpace}),n.each(i,function(n,t){ki(t);di(t);gi(t,t.ticks);vi(t)}),r=i.length-1;r>=0;--r)yi(i[r]);wi();n.each(i,function(n,t){pi(t)})}d=a.width-h.left-h.right;b=a.height-h.bottom-h.top;n.each(e,function(n,t){ai(t)});u&&tr();er()}function bi(n){var t=n.options,r=+(t.min!=null?t.min:n.datamin),i=+(t.max!=null?t.max:n.datamax),f=i-r,e,u;f==0?(e=i==0?1:.01,t.min==null&&(r-=e),(t.max==null||t.min!=null)&&(i+=e)):(u=t.autoscaleMargin,u!=null&&(t.min==null&&(r-=f*u,r<0&&n.datamin!=null&&n.datamin>=0&&(r=0)),t.max==null&&(i+=f*u,i>0&&n.datamax!=null&&n.datamax<=0&&(i=0))));n.min=r;n.max=i}function ki(t){var i=t.options,b,v,h,f,r,s,p,c;b=typeof i.ticks=="number"&&i.ticks>0?i.ticks:.3*Math.sqrt(t.direction=="x"?a.width:a.height);var l=(t.max-t.min)/b,o=-Math.floor(Math.log(l)/Math.LN10),e=i.tickDecimals;if(e!=null&&o>e&&(o=e),v=Math.pow(10,-o),h=l/v,h<1.5?f=1:h<3?(f=2,h>2.25&&(e==null||o+1<=e)&&(f=2.5,++o)):f=h<7.5?5:10,f*=v,i.minTickSize!=null&&f<i.minTickSize&&(f=i.minTickSize),t.delta=l,t.tickDecimals=Math.max(0,e!=null?e:o),t.tickSize=i.tickSize||f,i.mode=="time"&&!t.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");t.tickGenerator||(t.tickGenerator=function(n){var i=[],e=u(n.min,n.tickSize),r=0,t=Number.NaN,f;do f=t,t=e+r*n.tickSize,i.push(t),++r;while(t<n.max&&t!=f);return i},t.tickFormatter=function(n,t){var u=t.tickDecimals?Math.pow(10,t.tickDecimals):1,i=""+Math.round(n*u)/u,f,r;return t.tickDecimals!=null&&(f=i.indexOf("."),r=f==-1?0:i.length-f-1,r<t.tickDecimals)?(r?i:i+".")+(""+u).substr(1,t.tickDecimals-r):i});n.isFunction(i.tickFormatter)&&(t.tickFormatter=function(n,t){return""+i.tickFormatter(n,t)});i.alignTicksWithAxis!=null&&(r=(t.direction=="x"?y:w)[i.alignTicksWithAxis-1],r&&r.used&&r!=t&&(s=t.tickGenerator(t),s.length>0&&(i.min==null&&(t.min=Math.min(t.min,s[0])),i.max==null&&s.length>1&&(t.max=Math.max(t.max,s[s.length-1]))),t.tickGenerator=function(n){for(var u=[],t,i=0;i<r.ticks.length;++i)t=(r.ticks[i].v-r.min)/(r.max-r.min),t=n.min+t*(n.max-n.min),u.push(t);return u},t.mode||i.tickDecimals!=null||(p=Math.max(0,-Math.floor(Math.log(t.delta)/Math.LN10)+1),c=t.tickGenerator(t),c.length>1&&/\..*0$/.test((c[1]-c[0]).toFixed(p))||(t.tickDecimals=p))))}function di(t){var i=t.options.ticks,e=[],o,u,f,r;for(i==null||typeof i=="number"&&i>0?e=t.tickGenerator(t):i&&(e=n.isFunction(i)?i(t):i),t.ticks=[],o=0;o<e.length;++o)f=null,r=e[o],typeof r=="object"?(u=+r[0],r.length>1&&(f=r[1])):u=+r,f==null&&(f=t.tickFormatter(u,t)),isNaN(u)||t.ticks.push({v:u,label:f})}function gi(n,t){n.options.autoscaleMargin&&t.length>0&&(n.options.min==null&&(n.min=Math.min(n.min,t[0].v)),n.options.max==null&&t.length>1&&(n.max=Math.max(n.max,t[t.length-1].v)))}function vt(){var n,t;for(a.clear(),nt(p.drawBackground,[s]),n=o.grid,n.show&&n.backgroundColor&&nr(),n.show&&!n.aboveData&&pt(),t=0;t<c.length;++t)nt(p.drawSeries,[s,c[t]]),ir(c[t]);nt(p.draw,[s]);n.show&&n.aboveData&&pt();a.render();ut()}function yt(n,t){for(var f,i,r,u,o=it(),s,e=0;e<o.length;++e)if(f=o[e],f.direction==t&&(u=t+f.n+"axis",n[u]||f.n!=1||(u=t+"axis"),n[u])){i=n[u].from;r=n[u].to;break}return n[u]||(f=t=="x"?y[0]:w[0],i=n[t+"1"],r=n[t+"2"]),i!=null&&r!=null&&i>r&&(s=i,i=r,r=s),{from:i,to:r,axis:f}}function nr(){s.save();s.translate(h.left,h.top);s.fillStyle=ri(o.grid.backgroundColor,b,0,"rgba(255, 255, 255, 0)");s.fillRect(0,0,d,b);s.restore()}function pt(){var v,f,t,e,k,tt,w;if(s.save(),s.translate(h.left,h.top),k=o.grid.markings,k)for(n.isFunction(k)&&(f=l.getAxes(),f.xmin=f.xaxis.min,f.xmax=f.xaxis.max,f.ymin=f.yaxis.min,f.ymax=f.yaxis.max,k=k(f)),v=0;v<k.length;++v){var nt=k[v],i=yt(nt,"x"),r=yt(nt,"y");(i.from==null&&(i.from=i.axis.min),i.to==null&&(i.to=i.axis.max),r.from==null&&(r.from=r.axis.min),r.to==null&&(r.to=r.axis.max),i.to<i.axis.min||i.from>i.axis.max||r.to<r.axis.min||r.from>r.axis.max)||(i.from=Math.max(i.from,i.axis.min),i.to=Math.min(i.to,i.axis.max),r.from=Math.max(r.from,r.axis.min),r.to=Math.min(r.to,r.axis.max),i.from!=i.to||r.from!=r.to)&&(i.from=i.axis.p2c(i.from),i.to=i.axis.p2c(i.to),r.from=r.axis.p2c(r.from),r.to=r.axis.p2c(r.to),i.from==i.to||r.from==r.to?(s.beginPath(),s.strokeStyle=nt.color||o.grid.markingsColor,s.lineWidth=nt.lineWidth||o.grid.markingsLineWidth,s.moveTo(i.from,r.from),s.lineTo(i.to,r.to),s.stroke()):(s.fillStyle=nt.color||o.grid.markingsColor,s.fillRect(i.from,r.to,i.to-i.from,r.from-r.to)))}for(f=it(),t=o.grid.borderWidth,tt=0;tt<f.length;++tt){var u=f[tt],rt=u.box,g=u.tickLength,c,a,y,p;if(u.show&&u.ticks.length!=0){for(s.lineWidth=1,u.direction=="x"?(c=0,a=g=="full"?u.position=="top"?0:b:rt.top-h.top+(u.position=="top"?rt.height:0)):(a=0,c=g=="full"?u.position=="left"?0:d:rt.left-h.left+(u.position=="left"?rt.width:0)),u.innermost||(s.strokeStyle=u.options.color,s.beginPath(),y=p=0,u.direction=="x"?y=d+1:p=b+1,s.lineWidth==1&&(u.direction=="x"?a=Math.floor(a)+.5:c=Math.floor(c)+.5),s.moveTo(c,a),s.lineTo(c+y,a+p),s.stroke()),s.strokeStyle=u.options.tickColor,s.beginPath(),v=0;v<u.ticks.length;++v)(w=u.ticks[v].v,y=p=0,isNaN(w)||w<u.min||w>u.max||g=="full"&&(typeof t=="object"&&t[u.position]>0||t>0)&&(w==u.min||w==u.max))||(u.direction=="x"?(c=u.p2c(w),p=g=="full"?-b:g,u.position=="top"&&(p=-p)):(a=u.p2c(w),y=g=="full"?-d:g,u.position=="left"&&(y=-y)),s.lineWidth==1&&(u.direction=="x"?c=Math.floor(c)+.5:a=Math.floor(a)+.5),s.moveTo(c,a),s.lineTo(c+y,a+p));s.stroke()}}t&&(e=o.grid.borderColor,typeof t=="object"||typeof e=="object"?(typeof t!="object"&&(t={top:t,right:t,bottom:t,left:t}),typeof e!="object"&&(e={top:e,right:e,bottom:e,left:e}),t.top>0&&(s.strokeStyle=e.top,s.lineWidth=t.top,s.beginPath(),s.moveTo(0-t.left,0-t.top/2),s.lineTo(d,0-t.top/2),s.stroke()),t.right>0&&(s.strokeStyle=e.right,s.lineWidth=t.right,s.beginPath(),s.moveTo(d+t.right/2,0-t.top),s.lineTo(d+t.right/2,b),s.stroke()),t.bottom>0&&(s.strokeStyle=e.bottom,s.lineWidth=t.bottom,s.beginPath(),s.moveTo(d+t.right,b+t.bottom/2),s.lineTo(0,b+t.bottom/2),s.stroke()),t.left>0&&(s.strokeStyle=e.left,s.lineWidth=t.left,s.beginPath(),s.moveTo(0-t.left/2,b+t.bottom),s.lineTo(0-t.left/2,0),s.stroke())):(s.lineWidth=t,s.strokeStyle=o.grid.borderColor,s.strokeRect(-t/2,-t/2,d+t,b+t)));s.restore()}function tr(){n.each(it(),function(n,t){var i=t.box,l=t.direction+"Axis "+t.direction+t.n+"Axis",c="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+l,v=t.options.font||"flot-tick-label tickLabel",r,u,f,o,s,e;if(a.removeText(c),t.show&&t.ticks.length!=0)for(e=0;e<t.ticks.length;++e)(r=t.ticks[e],!r.label||r.v<t.min||r.v>t.max)||(t.direction=="x"?(o="center",u=h.left+t.p2c(r.v),t.position=="bottom"?f=i.top+i.padding:(f=i.top+i.height-i.padding,s="bottom")):(s="middle",f=h.top+t.p2c(r.v),t.position=="left"?(u=i.left+i.width-i.padding,o="right"):u=i.left+i.padding),a.addText(c,u,f,r.label,v,null,null,o,s))})}function ir(n){n.lines.show&&rr(n);n.bars.show&&fr(n);n.points.show&&ur(n)}function rr(n){function u(n,t,i,r,u){var l=n.points,a=n.pointsize,v=null,y=null,c;for(s.beginPath(),c=a;c<l.length;c+=a){var f=l[c-a],e=l[c-a+1],o=l[c],h=l[c+1];if(f!=null&&o!=null){if(e<=h&&e<u.min){if(h<u.min)continue;f=(u.min-e)/(h-e)*(o-f)+f;e=u.min}else if(h<=e&&h<u.min){if(e<u.min)continue;o=(u.min-e)/(h-e)*(o-f)+f;h=u.min}if(e>=h&&e>u.max){if(h>u.max)continue;f=(u.max-e)/(h-e)*(o-f)+f;e=u.max}else if(h>=e&&h>u.max){if(e>u.max)continue;o=(u.max-e)/(h-e)*(o-f)+f;h=u.max}if(f<=o&&f<r.min){if(o<r.min)continue;e=(r.min-f)/(o-f)*(h-e)+e;f=r.min}else if(o<=f&&o<r.min){if(f<r.min)continue;h=(r.min-f)/(o-f)*(h-e)+e;o=r.min}if(f>=o&&f>r.max){if(o>r.max)continue;e=(r.max-f)/(o-f)*(h-e)+e;f=r.max}else if(o>=f&&o>r.max){if(f>r.max)continue;h=(r.max-f)/(o-f)*(h-e)+e;o=r.max}(f!=v||e!=y)&&s.moveTo(r.p2c(f)+t,u.p2c(e)+i);v=o;y=h;s.lineTo(r.p2c(o)+t,u.p2c(h)+i)}}s.stroke()}function e(n,t,i){for(var c=n.points,o=n.pointsize,b=Math.min(Math.max(0,i.min),i.max),h=0,l=!1,a=1,p=0,w=0,v,y;;){if(o>0&&h>c.length+o)break;h+=o;var r=c[h-o],u=c[h-o+a],f=c[h],e=c[h+a];if(l){if(o>0&&r!=null&&f==null){w=h;o=-o;a=2;continue}if(o<0&&h==p+o){s.fill();l=!1;o=-o;a=1;h=p=w+o;continue}}if(r!=null&&f!=null){if(r<=f&&r<t.min){if(f<t.min)continue;u=(t.min-r)/(f-r)*(e-u)+u;r=t.min}else if(f<=r&&f<t.min){if(r<t.min)continue;e=(t.min-r)/(f-r)*(e-u)+u;f=t.min}if(r>=f&&r>t.max){if(f>t.max)continue;u=(t.max-r)/(f-r)*(e-u)+u;r=t.max}else if(f>=r&&f>t.max){if(r>t.max)continue;e=(t.max-r)/(f-r)*(e-u)+u;f=t.max}if(l||(s.beginPath(),s.moveTo(t.p2c(r),i.p2c(b)),l=!0),u>=i.max&&e>=i.max){s.lineTo(t.p2c(r),i.p2c(i.max));s.lineTo(t.p2c(f),i.p2c(i.max));continue}else if(u<=i.min&&e<=i.min){s.lineTo(t.p2c(r),i.p2c(i.min));s.lineTo(t.p2c(f),i.p2c(i.min));continue}v=r;y=f;u<=e&&u<i.min&&e>=i.min?(r=(i.min-u)/(e-u)*(f-r)+r,u=i.min):e<=u&&e<i.min&&u>=i.min&&(f=(i.min-u)/(e-u)*(f-r)+r,e=i.min);u>=e&&u>i.max&&e<=i.max?(r=(i.max-u)/(e-u)*(f-r)+r,u=i.max):e>=u&&e>i.max&&u<=i.max&&(f=(i.max-u)/(e-u)*(f-r)+r,e=i.max);r!=v&&s.lineTo(t.p2c(v),i.p2c(u));s.lineTo(t.p2c(r),i.p2c(u));s.lineTo(t.p2c(f),i.p2c(e));f!=y&&(s.lineTo(t.p2c(f),i.p2c(e)),s.lineTo(t.p2c(y),i.p2c(e)))}}}var t,i,r,f;s.save();s.translate(h.left,h.top);s.lineJoin="round";t=n.lines.lineWidth;i=n.shadowSize;t>0&&i>0&&(s.lineWidth=i,s.strokeStyle="rgba(0,0,0,0.1)",r=Math.PI/18,u(n.datapoints,Math.sin(r)*(t/2+i/2),Math.cos(r)*(t/2+i/2),n.xaxis,n.yaxis),s.lineWidth=i/2,u(n.datapoints,Math.sin(r)*(t/2+i/4),Math.cos(r)*(t/2+i/4),n.xaxis,n.yaxis));s.lineWidth=t;s.strokeStyle=n.color;f=ot(n.lines,n.color,0,b);f&&(s.fillStyle=f,e(n.datapoints,n.xaxis,n.yaxis));t>0&&u(n.datapoints,0,0,n.xaxis,n.yaxis);s.restore()}function ur(n){function r(n,t,i,r,u,f,e,o){for(var a=n.points,v=n.pointsize,h,c,l=0;l<a.length;l+=v)(h=a[l],c=a[l+1],h==null||h<f.min||h>f.max||c<e.min||c>e.max)||(s.beginPath(),h=f.p2c(h),c=e.p2c(c)+r,o=="circle"?s.arc(h,c,t,0,u?Math.PI:Math.PI*2,!1):o(s,h,c,t,u),s.closePath(),i&&(s.fillStyle=i,s.fill()),s.stroke())}var t;s.save();s.translate(h.left,h.top);var i=n.points.lineWidth,e=n.shadowSize,u=n.points.radius,f=n.points.symbol;i==0&&(i=.0001);i>0&&e>0&&(t=e/2,s.lineWidth=t,s.strokeStyle="rgba(0,0,0,0.1)",r(n.datapoints,u,null,t+t/2,!0,n.xaxis,n.yaxis,f),s.strokeStyle="rgba(0,0,0,0.2)",r(n.datapoints,u,null,t/2,!0,n.xaxis,n.yaxis,f));s.lineWidth=i;s.strokeStyle=n.color;r(n.datapoints,u,ot(n.points,n.color),0,!1,n.xaxis,n.yaxis,f);s.restore()}function wt(n,t,i,r,u,f,e,o,s,h,c){var l,y,a,v,p,w,b,k,d;(h?(k=w=b=!0,p=!1,l=i,y=n,v=t+r,a=t+u,y<l&&(d=y,y=l,l=d,p=!0,w=!1)):(p=w=b=!0,k=!1,l=n+r,y=n+u,a=i,v=t,v<a&&(d=v,v=a,a=d,k=!0,b=!1)),y<e.min||l>e.max||v<o.min||a>o.max)||(l<e.min&&(l=e.min,p=!1),y>e.max&&(y=e.max,w=!1),a<o.min&&(a=o.min,k=!1),v>o.max&&(v=o.max,b=!1),l=e.p2c(l),a=o.p2c(a),y=e.p2c(y),v=o.p2c(v),f&&(s.fillStyle=f(a,v),s.fillRect(l,v,y-l,a-v)),c>0&&(p||w||b||k)&&(s.beginPath(),s.moveTo(l,a),p?s.lineTo(l,v):s.moveTo(l,v),b?s.lineTo(y,v):s.moveTo(y,v),w?s.lineTo(y,a):s.moveTo(y,a),k?s.lineTo(l,a):s.moveTo(l,a),s.stroke()))}function fr(n){function r(t,i,r,u,f,e){for(var h=t.points,c=t.pointsize,o=0;o<h.length;o+=c)h[o]!=null&&wt(h[o],h[o+1],h[o+2],i,r,u,f,e,s,n.bars.horizontal,n.bars.lineWidth)}var t,i;s.save();s.translate(h.left,h.top);s.lineWidth=n.bars.lineWidth;s.strokeStyle=n.color;switch(n.bars.align){case"left":t=0;break;case"right":t=-n.bars.barWidth;break;default:t=-n.bars.barWidth/2}i=n.bars.fill?function(t,i){return ot(n.bars,n.color,t,i)}:null;r(n.datapoints,t,t+n.bars.barWidth,i,n.xaxis,n.yaxis);s.restore()}function ot(t,i,r,u){var e=t.fill,f;return e?t.fillColor?ri(t.fillColor,r,u,i):(f=n.color.parse(i),f.a=typeof e=="number"?e:.4,f.normalize(),f.toString()):null}function er(){var g,r,w,b,v,t,k;if(o.legend.container!=null?n(o.legend.container).html(""):i.find(".legend").remove(),o.legend.show){var f=[],e=[],y=!1,d=o.legend.labelFormatter,s,p;for(r=0;r<c.length;++r)s=c[r],s.label&&(p=d?d(s.label,s):s.label,p&&e.push({label:p,color:s.color}));for(o.legend.sorted&&(n.isFunction(o.legend.sorted)?e.sort(o.legend.sorted):o.legend.sorted=="reverse"?e.reverse():(g=o.legend.sorted!="descending",e.sort(function(n,t){return n.label==t.label?0:n.label<t.label!=g?1:-1}))),r=0;r<e.length;++r)w=e[r],r%o.legend.noColumns==0&&(y&&f.push("<\/tr>"),f.push("<tr>"),y=!0),f.push('<td class="legendColorBox"><div style="border:1px solid '+o.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+w.color+';overflow:hidden"><\/div><\/div><\/td><td class="legendLabel">'+w.label+"<\/td>");if(y&&f.push("<\/tr>"),f.length!=0)if(b='<table style="font-size:smaller;color:'+o.grid.color+'">'+f.join("")+"<\/table>",o.legend.container!=null)n(o.legend.container).html(b);else{var l="",a=o.legend.position,u=o.legend.margin;u[0]==null&&(u=[u,u]);a.charAt(0)=="n"?l+="top:"+(u[1]+h.top)+"px;":a.charAt(0)=="s"&&(l+="bottom:"+(u[1]+h.bottom)+"px;");a.charAt(1)=="e"?l+="right:"+(u[0]+h.right)+"px;":a.charAt(1)=="w"&&(l+="left:"+(u[0]+h.left)+"px;");v=n('<div class="legend">'+b.replace('style="','style="position:absolute;'+l+";")+"<\/div>").appendTo(i);o.legend.backgroundOpacity!=0&&(t=o.legend.backgroundColor,t==null&&(t=o.grid.backgroundColor,t=t&&typeof t=="string"?n.color.parse(t):n.color.extract(v,"background-color"),t.a=1,t=t.toString()),k=v.children(),n('<div style="position:absolute;width:'+k.width()+"px;height:"+k.height()+"px;"+l+"background-color:"+t+';"> <\/div>').prependTo(v).css("opacity",o.legend.backgroundOpacity))}}}function or(n,t,i){for(var w=o.grid.mouseActiveRadius,it=w*w+1,a=null,r,h,e,s,p,tt,u=c.length-1;u>=0;--u)if(i(c[u])){var f=c[u],b=f.xaxis,k=f.yaxis,l=f.datapoints.points,v=b.c2p(n),y=k.c2p(t),g=w/b.scale,nt=w/k.scale;if(h=f.datapoints.pointsize,b.options.inverseTransform&&(g=Number.MAX_VALUE),k.options.inverseTransform&&(nt=Number.MAX_VALUE),f.lines.show||f.points.show)for(r=0;r<l.length;r+=h)if((e=l[r],s=l[r+1],e!=null)&&!(e-v>g)&&!(e-v<-g)&&!(s-y>nt)&&!(s-y<-nt)){var rt=Math.abs(b.p2c(e)-n),ut=Math.abs(k.p2c(s)-t),ft=rt*rt+ut*ut;ft<it&&(it=ft,a=[u,r/h])}if(f.bars.show&&!a){switch(f.bars.align){case"left":p=0;break;case"right":p=-f.bars.barWidth;break;default:p=-f.bars.barWidth/2}for(tt=p+f.bars.barWidth,r=0;r<l.length;r+=h){var e=l[r],s=l[r+1],d=l[r+2];e!=null&&(c[u].bars.horizontal?v<=Math.max(d,e)&&v>=Math.min(d,e)&&y>=s+p&&y<=s+tt:v>=e+p&&v<=e+tt&&y>=Math.min(d,s)&&y<=Math.max(d,s))&&(a=[u,r/h])}}}return a?(u=a[0],r=a[1],h=c[u].datapoints.pointsize,{datapoint:c[u].datapoints.points.slice(r*h,(r+1)*h),dataIndex:r,series:c[u],seriesIndex:u}):null}function bt(n){o.grid.hoverable&&st("plothover",n,function(n){return n.hoverable!=!1})}function kt(n){o.grid.hoverable&&st("plothover",n,function(){return!1})}function dt(n){st("plotclick",n,function(n){return n.clickable!=!1})}function st(n,t,r){var e=k.offset(),l=t.pageX-e.left-h.left,a=t.pageY-e.top-h.top,c=ct({left:l,top:a}),u,s,f;if(c.pageX=t.pageX,c.pageY=t.pageY,u=or(l,a,r),u&&(u.pageX=parseInt(u.series.xaxis.p2c(u.datapoint[0])+e.left+h.left,10),u.pageY=parseInt(u.series.yaxis.p2c(u.datapoint[1])+e.top+h.top,10)),o.grid.autoHighlight){for(s=0;s<g.length;++s)f=g[s],f.auto!=n||u&&f.series==u.series&&f.point[0]==u.datapoint[0]&&f.point[1]==u.datapoint[1]||ti(f.series,f.point);u&&ni(u.series,u.datapoint,n)}i.trigger(n,[c,u])}function ut(){var n=o.interaction.redrawOverlayInterval;if(n==-1){gt();return}rt||(rt=setTimeout(gt,n))}function gt(){rt=null;v.save();tt.clear();v.translate(h.left,h.top);for(var n,t=0;t<g.length;++t)n=g[t],n.series.bars.show?hr(n.series,n.point):sr(n.series,n.point);v.restore();nt(p.drawOverlay,[v])}function ni(n,t,i){var r,u;typeof n=="number"&&(n=c[n]);typeof t=="number"&&(r=n.datapoints.pointsize,t=n.datapoints.points.slice(r*t,r*(t+1)));u=ii(n,t);u==-1?(g.push({series:n,point:t,auto:i}),ut()):i||(g[u].auto=!1)}function ti(n,t){var i,r;if(n==null&&t==null){g=[];ut();return}typeof n=="number"&&(n=c[n]);typeof t=="number"&&(i=n.datapoints.pointsize,t=n.datapoints.points.slice(i*t,i*(t+1)));r=ii(n,t);r!=-1&&(g.splice(r,1),ut())}function ii(n,t){for(var r,i=0;i<g.length;++i)if(r=g[i],r.series==n&&r.point[0]==t[0]&&r.point[1]==t[1])return i;return-1}function sr(t,i){var r=i[0],u=i[1],f=t.xaxis,e=t.yaxis,h=typeof t.highlightColor=="string"?t.highlightColor:n.color.parse(t.color).scale("a",.5).toString(),o,s;r<f.min||r>f.max||u<e.min||u>e.max||(o=t.points.radius+t.points.lineWidth/2,v.lineWidth=o,v.strokeStyle=h,s=1.5*o,r=f.p2c(r),u=e.p2c(u),v.beginPath(),t.points.symbol=="circle"?v.arc(r,u,s,0,2*Math.PI,!1):t.points.symbol(v,r,u,s,!1),v.closePath(),v.stroke())}function hr(t,i){var u=typeof t.highlightColor=="string"?t.highlightColor:n.color.parse(t.color).scale("a",.5).toString(),f=u,r;switch(t.bars.align){case"left":r=0;break;case"right":r=-t.bars.barWidth;break;default:r=-t.bars.barWidth/2}v.lineWidth=t.bars.lineWidth;v.strokeStyle=u;wt(i[0],i[1],i[2]||0,r,r+t.bars.barWidth,function(){return f},t.xaxis,t.yaxis,v,t.bars.horizontal,t.bars.lineWidth)}function ri(t,i,r,u){var h,e,c,f,o;if(typeof t=="string")return t;for(h=s.createLinearGradient(0,r,0,i),e=0,c=t.colors.length;e<c;++e)f=t.colors[e],typeof f!="string"&&(o=n.color.parse(u),f.brightness!=null&&(o=o.scale("rgb",f.brightness)),f.opacity!=null&&(o.a*=f.opacity),f=o.toString()),h.addColorStop(e/(c-1),f);return h}var c=[],o={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},a=null,tt=null,k=null,s=null,v=null,y=[],w=[],h={left:0,right:0,top:0,bottom:0},d=0,b=0,p={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},l=this,g,rt;l.setData=ht;l.setupGrid=at;l.draw=vt;l.getPlaceholder=function(){return i};l.getCanvas=function(){return a.element};l.getPlotOffset=function(){return h};l.width=function(){return d};l.height=function(){return b};l.offset=function(){var n=k.offset();return n.left+=h.left,n.top+=h.top,n};l.getData=function(){return c};l.getAxes=function(){var t={};return n.each(y.concat(w),function(n,i){i&&(t[i.direction+(i.n!=1?i.n:"")+"axis"]=i)}),t};l.getXAxes=function(){return y};l.getYAxes=function(){return w};l.c2p=ct;l.p2c=oi;l.getOptions=function(){return o};l.highlight=ni;l.unhighlight=ti;l.triggerRedrawOverlay=ut;l.pointOffset=function(n){return{left:parseInt(y[ft(n,"x")-1].p2c(+n.x)+h.left,10),top:parseInt(w[ft(n,"y")-1].p2c(+n.y)+h.top,10)}};l.shutdown=lt;l.destroy=function(){lt();i.removeData("plot").empty();c=[];o=null;a=null;tt=null;k=null;s=null;v=null;y=[];w=[];p=null;g=[];l=null};l.resize=function(){var n=i.width(),t=i.height();a.resize(n,t);tt.resize(n,t)};l.hooks=p;ui(l);fi(f);ci();ht(r);at();vt();li();g=[];rt=null}function u(n,t){return t*Math.floor(n/t)}var i=Object.prototype.hasOwnProperty;t.prototype.resize=function(n,t){if(n<=0||t<=0)throw new Error("Invalid dimensions for plot, width = "+n+", height = "+t);var i=this.element,u=this.context,r=this.pixelRatio;this.width!=n&&(i.width=n*r,i.style.width=n+"px",this.width=n);this.height!=t&&(i.height=t*r,i.style.height=t+"px",this.height=t);u.restore();u.save();u.scale(r,r)};t.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};t.prototype.render=function(){var h=this._textCache,r,u,f,c,t,e,o,s,n;for(r in h)if(i.call(h,r)){u=this.getTextLayer(r);f=h[r];u.hide();for(c in f)if(i.call(f,c)){t=f[c];for(e in t)if(i.call(t,e)){for(o=t[e].positions,s=0;n=o[s];s++)n.active?n.rendered||(u.append(n.element),n.rendered=!0):(o.splice(s--,1),n.rendered&&n.element.detach());o.length==0&&delete t[e]}}u.show()}};t.prototype.getTextLayer=function(t){var i=this.text[t];return i==null&&(this.textContainer==null&&(this.textContainer=n("<div class='flot-text'><\/div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),i=this.text[t]=n("<div><\/div>").addClass(t).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),i};t.prototype.getTextInfo=function(t,i,r,u,f){var h,o,s,c,e;return i=""+i,h=typeof r=="object"?r.style+" "+r.variant+" "+r.weight+" "+r.size+"px/"+r.lineHeight+"px "+r.family:r,o=this._textCache[t],o==null&&(o=this._textCache[t]={}),s=o[h],s==null&&(s=o[h]={}),c=s[i],c==null&&(e=n("<div><\/div>").html(i).css({position:"absolute","max-width":f,top:-9999}).appendTo(this.getTextLayer(t)),typeof r=="object"?e.css({font:h,color:r.color}):typeof r=="string"&&e.addClass(r),c=s[i]={width:e.outerWidth(!0),height:e.outerHeight(!0),element:e,positions:[]},e.detach()),c};t.prototype.addText=function(n,t,i,r,u,f,e,o,s){var h=this.getTextInfo(n,r,u,f,e),l=h.positions,a,c;for(o=="center"?t-=h.width/2:o=="right"&&(t-=h.width),s=="middle"?i-=h.height/2:s=="bottom"&&(i-=h.height),a=0;c=l[a];a++)if(c.x==t&&c.y==i){c.active=!0;return}c={active:!0,rendered:!1,element:l.length?h.element.clone():h.element,x:t,y:i};l.push(c);c.element.css({top:Math.round(i),left:Math.round(t),"text-align":o})};t.prototype.removeText=function(n,t,r,u,f,e){var h,a,l,v,c,o,s;if(u==null){if(h=this._textCache[n],h!=null)for(a in h)if(i.call(h,a)){l=h[a];for(v in l)if(i.call(l,v))for(c=l[v].positions,o=0;s=c[o];o++)s.active=!1}}else for(c=this.getTextInfo(n,u,f,e).positions,o=0;s=c[o];o++)s.x==t&&s.y==r&&(s.active=!1)};n.plot=function(t,i,u){return new r(n(t),i,u,n.plot.plugins)};n.plot.version="0.8.2";n.plot.plugins=[];n.fn.plot=function(t,i){return this.each(function(){n.plot(this,t,i)})}}(jQuery),function(n){function r(r){function w(t){l||(l=!0,a=t.getCanvas(),h=n(a).parent(),u=t.getOptions(),t.setData(b(t.getData())))}function b(t){for(var f=0,e=0,o=0,s=u.series.pie.combine.color,h=[],i,r=0;r<t.length;++r)i=t[r].data,n.isArray(i)&&i.length==1&&(i=i[0]),n.isArray(i)?i[1]=!isNaN(parseFloat(i[1]))&&isFinite(i[1])?+i[1]:0:i=!isNaN(parseFloat(i))&&isFinite(i)?[1,+i]:[1,0],t[r].data=[i];for(r=0;r<t.length;++r)f+=t[r].data[0][1];for(r=0;r<t.length;++r)i=t[r].data[0][1],i/f<=u.series.pie.combine.threshold&&(e+=i,o++,s||(s=t[r].color));for(r=0;r<t.length;++r)i=t[r].data[0][1],(o<2||i/f>u.series.pie.combine.threshold)&&h.push(n.extend(t[r],{data:[[1,i]],color:t[r].color,label:t[r].label,angle:i*Math.PI*2/f,percent:i/(f/100)}));return o>1&&h.push({data:[[1,e]],color:s,label:u.series.pie.combine.label,angle:e*Math.PI*2/f,percent:e/(f/100)}),h}function k(r,s){function k(){f.clearRect(0,0,y,p);h.children().filter(".pieLabel, .pieLabelBackground").remove()}function d(){var i=u.series.pie.shadow.left,r=u.series.pie.shadow.top,s=10,h=u.series.pie.shadow.alpha,n=u.series.pie.radius>1?u.series.pie.radius:o*u.series.pie.radius,t;if(!(n>=y/2-i)&&!(n*u.series.pie.tilt>=p/2-r)&&!(n<=s)){for(f.save(),f.translate(i,r),f.globalAlpha=h,f.fillStyle="#000",f.translate(e,c),f.scale(1,u.series.pie.tilt),t=1;t<=s;t++)f.beginPath(),f.arc(0,0,n,0,Math.PI*2,!1),f.fill(),n-=t;f.restore()}}function g(){function l(n,t,r){n<=0||isNaN(n)||(r?f.fillStyle=t:(f.strokeStyle=t,f.lineJoin="round"),f.beginPath(),Math.abs(n-Math.PI*2)>1e-9&&f.moveTo(0,0),f.arc(0,0,s,i,i+n/2,!1),f.arc(0,0,s,i+n/2,i+n,!1),f.closePath(),i+=n,r?f.fill():f.stroke())}function w(){function s(t,i,r){var w,s,b,v,nt;if(t.data[0][1]==0)return!0;w=u.legend.labelFormatter;b=u.series.pie.label.formatter;s=w?w(t.label,t):t.label;b&&(s=b(s,t));var k=(i+t.angle+i)/2,d=e+Math.round(Math.cos(k)*f),g=c+Math.round(Math.sin(k)*f)*u.series.pie.tilt,tt="<span class='pieLabel' id='pieLabel"+r+"' style='position:absolute;top:"+g+"px;left:"+d+"px;'>"+s+"<\/span>";h.append(tt);var o=h.children("#pieLabel"+r),l=g-o.height()/2,a=d-o.width()/2;return(o.css("top",l),o.css("left",a),0-l>0||0-a>0||p-(l+o.height())<0||y-(a+o.width())<0)?!1:(u.series.pie.label.background.opacity!=0&&(v=u.series.pie.label.background.color,v==null&&(v=t.color),nt="top:"+l+"px;left:"+a+"px;",n("<div class='pieLabelBackground' style='position:absolute;width:"+o.width()+"px;height:"+o.height()+"px;"+nt+"background-color:"+v+";'><\/div>").css("opacity",u.series.pie.label.background.opacity).insertBefore(o)),!0)}for(var i=r,f=u.series.pie.label.radius>1?u.series.pie.label.radius:o*u.series.pie.label.radius,t=0;t<a.length;++t){if(a[t].percent>=u.series.pie.label.threshold*100&&!s(a[t],i,t))return!1;i+=a[t].angle}return!0}var r=Math.PI*u.series.pie.startAngle,s=u.series.pie.radius>1?u.series.pie.radius:o*u.series.pie.radius,i,t;for(f.save(),f.translate(e,c),f.scale(1,u.series.pie.tilt),f.save(),i=r,t=0;t<a.length;++t)a[t].startAngle=i,l(a[t].angle,a[t].color,!0);if(f.restore(),u.series.pie.stroke.width>0){for(f.save(),f.lineWidth=u.series.pie.stroke.width,i=r,t=0;t<a.length;++t)l(a[t].angle,u.series.pie.stroke.color,!1);f.restore()}return v(f),f.restore(),u.series.pie.label.show?w():!0}var a,w;if(h){var y=r.getPlaceholder().width(),p=r.getPlaceholder().height(),b=h.children().filter(".legend").children().width()||0;f=s;l=!1;o=Math.min(y,p/u.series.pie.tilt)/2;c=p/2+u.series.pie.offset.top;e=y/2;u.series.pie.offset.left=="auto"?(u.legend.position.match("w")?e+=b/2:e-=b/2,e<o?e=o:e>y-o&&(e=y-o)):e+=u.series.pie.offset.left;a=r.getData();w=0;do w>0&&(o*=i),w+=1,k(),u.series.pie.tilt<=.8&&d();while(!g()&&w<t);w>=t&&(k(),h.prepend("<div class='error'>Could not draw pie with labels contained inside canvas<\/div>"));r.setSeries&&r.insertLegend&&(r.setSeries(a),r.insertLegend())}}function v(n){if(u.series.pie.innerRadius>0){n.save();var t=u.series.pie.innerRadius>1?u.series.pie.innerRadius:o*u.series.pie.innerRadius;n.globalCompositeOperation="destination-out";n.beginPath();n.fillStyle=u.series.pie.stroke.color;n.arc(0,0,t,0,Math.PI*2,!1);n.fill();n.closePath();n.restore();n.save();n.beginPath();n.strokeStyle=u.series.pie.stroke.color;n.arc(0,0,t,0,Math.PI*2,!1);n.stroke();n.closePath();n.restore()}}function d(n,t){for(var u=!1,i=-1,f=n.length,r=f-1;++i<f;r=i)(n[i][1]<=t[1]&&t[1]<n[r][1]||n[r][1]<=t[1]&&t[1]<n[i][1])&&t[0]<(n[r][0]-n[i][0])*(t[1]-n[i][1])/(n[r][1]-n[i][1])+n[i][0]&&(u=!u);return u}function g(n,t){for(var l=r.getData(),h=r.getOptions(),u=h.series.pie.radius>1?h.series.pie.radius:o*h.series.pie.radius,a,v,i,s=0;s<l.length;++s)if(i=l[s],i.pie.show){if(f.save(),f.beginPath(),f.moveTo(0,0),f.arc(0,0,u,i.startAngle,i.startAngle+i.angle/2,!1),f.arc(0,0,u,i.startAngle+i.angle/2,i.startAngle+i.angle,!1),f.closePath(),a=n-e,v=t-c,f.isPointInPath){if(f.isPointInPath(n-e,t-c))return f.restore(),{datapoint:[i.percent,i.data],dataIndex:0,series:i,seriesIndex:s}}else{var y=u*Math.cos(i.startAngle),p=u*Math.sin(i.startAngle),w=u*Math.cos(i.startAngle+i.angle/4),b=u*Math.sin(i.startAngle+i.angle/4),k=u*Math.cos(i.startAngle+i.angle/2),g=u*Math.sin(i.startAngle+i.angle/2),nt=u*Math.cos(i.startAngle+i.angle/1.5),tt=u*Math.sin(i.startAngle+i.angle/1.5),it=u*Math.cos(i.startAngle+i.angle),rt=u*Math.sin(i.startAngle+i.angle),ut=[[0,0],[y,p],[w,b],[k,g],[nt,tt],[it,rt]],ft=[a,v];if(d(ut,ft))return f.restore(),{datapoint:[i.percent,i.data],dataIndex:0,series:i,seriesIndex:s}}f.restore()}return null}function nt(n){y("plothover",n)}function tt(n){y("plotclick",n)}function y(n,t){var o=r.offset(),l=parseInt(t.pageX-o.left),a=parseInt(t.pageY-o.top),i=g(l,a),f,e,c;if(u.grid.autoHighlight)for(f=0;f<s.length;++f)e=s[f],e.auto!=n||i&&e.series==i.series||rt(e.series);i&&it(i.series,n);c={pageX:t.pageX,pageY:t.pageY};h.trigger(n,[c,i])}function it(n,t){var i=p(n);i==-1?(s.push({series:n,auto:t}),r.triggerRedrawOverlay()):t||(s[i].auto=!1)}function rt(n){n==null&&(s=[],r.triggerRedrawOverlay());var t=p(n);t!=-1&&(s.splice(t,1),r.triggerRedrawOverlay())}function p(n){for(var i,t=0;t<s.length;++t)if(i=s[t],i.series==n)return t;return-1}function ut(n,t){function f(n){n.angle<=0||isNaN(n.angle)||(t.fillStyle="rgba(255, 255, 255, "+i.series.pie.highlight.opacity+")",t.beginPath(),Math.abs(n.angle-Math.PI*2)>1e-9&&t.moveTo(0,0),t.arc(0,0,u,n.startAngle,n.startAngle+n.angle/2,!1),t.arc(0,0,u,n.startAngle+n.angle/2,n.startAngle+n.angle,!1),t.closePath(),t.fill())}var i=n.getOptions(),u=i.series.pie.radius>1?i.series.pie.radius:o*i.series.pie.radius,r;for(t.save(),t.translate(e,c),t.scale(1,i.series.pie.tilt),r=0;r<s.length;++r)f(s[r].series);v(t);t.restore()}var a=null,h=null,u=null,o=null,e=null,c=null,l=!1,f=null,s=[];r.hooks.processOptions.push(function(n,t){t.series.pie.show&&(t.grid.show=!1,t.series.pie.label.show=="auto"&&(t.series.pie.label.show=t.legend.show?!1:!0),t.series.pie.radius=="auto"&&(t.series.pie.radius=t.series.pie.label.show?3/4:1),t.series.pie.tilt>1?t.series.pie.tilt=1:t.series.pie.tilt<0&&(t.series.pie.tilt=0))});r.hooks.bindEvents.push(function(n,t){var i=n.getOptions();i.series.pie.show&&(i.grid.hoverable&&t.unbind("mousemove").mousemove(nt),i.grid.clickable&&t.unbind("click").click(tt))});r.hooks.processDatapoints.push(function(n,t,i,r){var u=n.getOptions();u.series.pie.show&&w(n,t,i,r)});r.hooks.drawOverlay.push(function(n,t){var i=n.getOptions();i.series.pie.show&&ut(n,t)});r.hooks.draw.push(function(n,t){var i=n.getOptions();i.series.pie.show&&k(n,t)})}var t=10,i=.95,u={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:3/2,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(n,t){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+t.color+";'>"+n+"<br/>"+Math.round(t.percent)+"%<\/div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};n.plot.plugins.push({init:r,options:u,name:"pie",version:"1.1"})}(jQuery),function(n){"use strict";function u(t){var i=t.data;t.isDefaultPrevented()||(t.preventDefault(),n(this).ajaxSubmit(i))}function f(t){var r=t.target,u=n(r),f,i,e;if(!u.is("[type=submit],[type=image]")){if(f=u.closest("[type=submit]"),f.length===0)return;r=f[0]}i=this;i.clk=r;r.type=="image"&&(t.offsetX!==undefined?(i.clk_x=t.offsetX,i.clk_y=t.offsetY):typeof n.fn.offset=="function"?(e=u.offset(),i.clk_x=t.pageX-e.left,i.clk_y=t.pageY-e.top):(i.clk_x=t.pageX-r.offsetLeft,i.clk_y=t.pageY-r.offsetTop));setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function t(){if(n.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var i={},r;i.fileapi=n("<input type='file'/>").get(0).files!==undefined;i.formdata=window.FormData!==undefined;r=!!n.fn.prop;n.fn.attr2=function(){if(!r)return this.attr.apply(this,arguments);var n=this.prop.apply(this,arguments);return n&&n.jquery||typeof n=="string"?n:this.attr.apply(this,arguments)};n.fn.ajaxSubmit=function(u){function ot(t){for(var r=n.param(t,u.traditional).split("&"),o=r.length,e=[],f,i=0;i<o;i++)r[i]=r[i].replace(/\+/g," "),f=r[i].split("="),e.push([decodeURIComponent(f[0]),decodeURIComponent(f[1])]);return e}function st(t){for(var e=new FormData,f,r,o,i=0;i<t.length;i++)e.append(t[i].name,t[i].value);if(u.extraData)for(f=ot(u.extraData),i=0;i<f.length;i++)f[i]&&e.append(f[i][0],f[i][1]);return u.data=null,r=n.extend(!0,{},n.ajaxSettings,u,{contentType:!1,processData:!1,cache:!1,type:h||"POST"}),u.uploadProgress&&(r.xhr=function(){var n=jQuery.ajaxSettings.xhr();return n.upload&&n.upload.addEventListener("progress",function(n){var t=0,i=n.loaded||n.position,r=n.total;n.lengthComputable&&(t=Math.ceil(i/r*100));u.uploadProgress(n,i,r,t)},!1),n}),r.data=null,o=r.beforeSend,r.beforeSend=function(n,t){t.data=e;o&&o.call(this,n,t)},n.ajax(r)}function ft(i){function ot(n){var i=null;try{n.contentWindow&&(i=n.contentWindow.document)}catch(r){t("cannot get iframe.contentWindow document: "+r)}if(i)return i;try{i=n.contentDocument?n.contentDocument:n.document}catch(r){t("cannot get iframe.contentDocument: "+r);i=n.document}return i}function st(){function s(){try{var n=ot(a).readyState;t("state = "+n);n&&n.toLowerCase()=="uninitialized"&&setTimeout(s,50)}catch(i){t("Server abort: ",i," (",i.name,")");b(tt);g&&clearTimeout(g);g=undefined}}var u=f.attr2("target"),o=f.attr2("action"),r,i,c;l.setAttribute("target",d);h||l.setAttribute("method","POST");o!=e.url&&l.setAttribute("action",e.url);e.skipEncodingOverride||h&&!/post/i.test(h)||f.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});e.timeout&&(g=setTimeout(function(){rt=!0;b(ut)},e.timeout));r=[];try{if(e.extraData)for(i in e.extraData)e.extraData.hasOwnProperty(i)&&(n.isPlainObject(e.extraData[i])&&e.extraData[i].hasOwnProperty("name")&&e.extraData[i].hasOwnProperty("value")?r.push(n('<input type="hidden" name="'+e.extraData[i].name+'">').val(e.extraData[i].value).appendTo(l)[0]):r.push(n('<input type="hidden" name="'+i+'">').val(e.extraData[i]).appendTo(l)[0]));e.iframeTarget||(v.appendTo("body"),a.attachEvent?a.attachEvent("onload",b):a.addEventListener("load",b,!1));setTimeout(s,15);try{l.submit()}catch(y){c=document.createElement("form").submit;c.apply(l)}}finally{l.setAttribute("action",o);u?l.setAttribute("target",u):f.removeAttr("target");n(r).remove()}}function b(i){var r,u,w,f,k,d,h,c,l;if(!o.aborted&&!lt){if(s=ot(a),s||(t("cannot access response document"),i=tt),i===ut&&o){o.abort("timeout");y.reject(o,"timeout");return}if(i==tt&&o){o.abort("server abort");y.reject(o,"error","server abort");return}if(s&&s.location.href!=e.iframeSrc||rt){a.detachEvent?a.detachEvent("onload",b):a.removeEventListener("load",b,!1);r="success";try{if(rt)throw"timeout";if(w=e.dataType=="xml"||s.XMLDocument||n.isXMLDoc(s),t("isXml="+w),!w&&window.opera&&(s.body===null||!s.body.innerHTML)&&--ct){t("requeing onLoad callback, DOM not available");setTimeout(b,250);return}f=s.body?s.body:s.documentElement;o.responseText=f?f.innerHTML:null;o.responseXML=s.XMLDocument?s.XMLDocument:s;w&&(e.dataType="xml");o.getResponseHeader=function(n){var t={"content-type":e.dataType};return t[n]};f&&(o.status=Number(f.getAttribute("status"))||o.status,o.statusText=f.getAttribute("statusText")||o.statusText);k=(e.dataType||"").toLowerCase();d=/(json|script|text)/.test(k);d||e.textarea?(h=s.getElementsByTagName("textarea")[0],h?(o.responseText=h.value,o.status=Number(h.getAttribute("status"))||o.status,o.statusText=h.getAttribute("statusText")||o.statusText):d&&(c=s.getElementsByTagName("pre")[0],l=s.getElementsByTagName("body")[0],c?o.responseText=c.textContent?c.textContent:c.innerText:l&&(o.responseText=l.textContent?l.textContent:l.innerText))):k=="xml"&&!o.responseXML&&o.responseText&&(o.responseXML=at(o.responseText));try{ht=yt(o,k,e)}catch(nt){r="parsererror";o.error=u=nt||r}}catch(nt){t("error caught: ",nt);r="error";o.error=u=nt||r}o.aborted&&(t("upload aborted"),r=null);o.status&&(r=o.status>=200&&o.status<300||o.status===304?"success":"error");r==="success"?(e.success&&e.success.call(e.context,ht,"success",o),y.resolve(o.responseText,"success",o),p&&n.event.trigger("ajaxSuccess",[o,e])):r&&(u===undefined&&(u=o.statusText),e.error&&e.error.call(e.context,o,r,u),y.reject(o,"error",u),p&&n.event.trigger("ajaxError",[o,e,u]));p&&n.event.trigger("ajaxComplete",[o,e]);p&&!--n.active&&n.event.trigger("ajaxStop");e.complete&&e.complete.call(e.context,o,r);lt=!0;e.timeout&&clearTimeout(g);setTimeout(function(){e.iframeTarget||v.remove();o.responseXML=null},100)}}}var l=f[0],it,nt,e,p,d,v,a,o,k,w,rt,g,y=n.Deferred(),ut,tt,ft,et,ht,s,ct,lt;if(i)for(nt=0;nt<c.length;nt++)it=n(c[nt]),r?it.prop("disabled",!1):it.removeAttr("disabled");if(e=n.extend(!0,{},n.ajaxSettings,u),e.context=e.context||e,d="jqFormIO"+(new Date).getTime(),e.iframeTarget?(v=n(e.iframeTarget),w=v.attr2("name"),w?d=w:v.attr2("name",d)):(v=n('<iframe name="'+d+'" src="'+e.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),a=v[0],o={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(i){var r=i==="timeout"?"timeout":"aborted";t("aborting upload... "+r);this.aborted=1;try{a.contentWindow.document.execCommand&&a.contentWindow.document.execCommand("Stop")}catch(u){}v.attr("src",e.iframeSrc);o.error=r;e.error&&e.error.call(e.context,o,r,i);p&&n.event.trigger("ajaxError",[o,e,r]);e.complete&&e.complete.call(e.context,o,r)}},p=e.global,p&&0==n.active++&&n.event.trigger("ajaxStart"),p&&n.event.trigger("ajaxSend",[o,e]),e.beforeSend&&e.beforeSend.call(e.context,o,e)===!1)return e.global&&n.active--,y.reject(),y;if(o.aborted)return y.reject(),y;k=l.clk;k&&(w=k.name,w&&!k.disabled&&(e.extraData=e.extraData||{},e.extraData[w]=k.value,k.type=="image"&&(e.extraData[w+".x"]=l.clk_x,e.extraData[w+".y"]=l.clk_y)));ut=1;tt=2;ft=n("meta[name=csrf-token]").attr("content");et=n("meta[name=csrf-param]").attr("content");et&&ft&&(e.extraData=e.extraData||{},e.extraData[et]=ft);e.forceSync?st():setTimeout(st,10);ct=50;var at=n.parseXML||function(n,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(n)):t=(new DOMParser).parseFromString(n,"text/xml"),t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null},vt=n.parseJSON||function(s){return window.eval("("+s+")")},yt=function(t,i,r){var f=t.getResponseHeader("content-type")||"",e=i==="xml"||!i&&f.indexOf("xml")>=0,u=e?t.responseXML:t.responseText;return e&&u.documentElement.nodeName==="parsererror"&&n.error&&n.error("parsererror"),r&&r.dataFilter&&(u=r.dataFilter(u,i)),typeof u=="string"&&(i==="json"||!i&&f.indexOf("json")>=0?u=vt(u):(i==="script"||!i&&f.indexOf("javascript")>=0)&&n.globalEval(u)),u};return y}var h,b,e,f,a,v,c,y,o,l,s,d,g,nt,ut,p,w;if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;if(f=this,typeof u=="function"&&(u={success:u}),h=u.type||this.attr2("method"),b=u.url||this.attr2("action"),e=typeof b=="string"?n.trim(b):"",e=e||window.location.href||"",e&&(e=(e.match(/^([^#]+)/)||[])[1]),u=n.extend(!0,{url:e,success:n.ajaxSettings.success,type:h||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},u),a={},this.trigger("form-pre-serialize",[this,u,a]),a.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(u.beforeSerialize&&u.beforeSerialize(this,u)===!1)return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;if(v=u.traditional,v===undefined&&(v=n.ajaxSettings.traditional),c=[],o=this.formToArray(u.semantic,c),u.data&&(u.extraData=u.data,y=n.param(u.data,v)),u.beforeSubmit&&u.beforeSubmit(o,this,u)===!1)return t("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[o,this,u,a]),a.veto)return t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;l=n.param(o,v);y&&(l=l?l+"&"+y:y);u.type.toUpperCase()=="GET"?(u.url+=(u.url.indexOf("?")>=0?"&":"?")+l,u.data=null):u.data=l;s=[];u.resetForm&&s.push(function(){f.resetForm()});u.clearForm&&s.push(function(){f.clearForm(u.includeHidden)});!u.dataType&&u.target?(d=u.success||function(){},s.push(function(t){var i=u.replaceTarget?"replaceWith":"html";n(u.target)[i](t).each(d,arguments)})):u.success&&s.push(u.success);u.success=function(n,t,i){for(var o=u.context||this,r=0,e=s.length;r<e;r++)s[r].apply(o,[n,t,i||f,f])};u.error&&(g=u.error,u.error=function(n,t,i){var r=u.context||this;g.apply(r,[n,t,i,f])});u.complete&&(nt=u.complete,u.complete=function(n,t){var i=u.context||this;nt.apply(i,[n,t,f])});var et=n('input[type=file]:enabled[value!=""]',this),tt=et.length>0,it="multipart/form-data",rt=f.attr("enctype")==it||f.attr("encoding")==it,k=i.fileapi&&i.formdata;for(t("fileAPI :"+k),ut=(tt||rt)&&!k,u.iframe!==!1&&(u.iframe||ut)?u.closeKeepAlive?n.get(u.closeKeepAlive,function(){p=ft(o)}):p=ft(o):p=(tt||rt)&&k?st(o):n.ajax(u),f.removeData("jqxhr").data("jqxhr",p),w=0;w<c.length;w++)c[w]=null;return this.trigger("form-submit-notify",[this,u]),this};n.fn.ajaxForm=function(i){if(i=i||{},i.delegation=i.delegation&&n.isFunction(n.fn.on),!i.delegation&&this.length===0){var r={s:this.selector,c:this.context};return!n.isReady&&r.s?(t("DOM not ready, queuing ajaxForm"),n(function(){n(r.s,r.c).ajaxForm(i)}),this):(t("terminating; zero elements found by selector"+(n.isReady?"":" (DOM not ready)")),this)}if(i.delegation){n(document).off("submit.form-plugin",this.selector,u).off("click.form-plugin",this.selector,f).on("submit.form-plugin",this.selector,i,u).on("click.form-plugin",this.selector,i,f);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",i,u).bind("click.form-plugin",i,f)};n.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};n.fn.formToArray=function(t,r){var o=[],e,c,l,s,f,h,u,p,w,a,y,v;if(this.length===0||(e=this[0],c=t?e.getElementsByTagName("*"):e.elements,!c))return o;for(l=0,p=c.length;l<p;l++)if(u=c[l],f=u.name,f&&!u.disabled){if(t&&e.clk&&u.type=="image"){e.clk==u&&(o.push({name:f,value:n(u).val(),type:u.type}),o.push({name:f+".x",value:e.clk_x},{name:f+".y",value:e.clk_y}));continue}if(h=n.fieldValue(u,!0),h&&h.constructor==Array)for(r&&r.push(u),s=0,w=h.length;s<w;s++)o.push({name:f,value:h[s]});else if(i.fileapi&&u.type=="file")if(r&&r.push(u),a=u.files,a.length)for(s=0;s<a.length;s++)o.push({name:f,value:a[s],type:u.type});else o.push({name:f,value:"",type:u.type});else h!==null&&typeof h!="undefined"&&(r&&r.push(u),o.push({name:f,value:h,type:u.type,required:u.required}))}return!t&&e.clk&&(y=n(e.clk),v=y[0],f=v.name,f&&!v.disabled&&v.type=="image"&&(o.push({name:f,value:y.val()}),o.push({name:f+".x",value:e.clk_x},{name:f+".y",value:e.clk_y}))),o};n.fn.formSerialize=function(t){return n.param(this.formToArray(t))};n.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var f=this.name,r,u,e;if(f)if(r=n.fieldValue(this,t),r&&r.constructor==Array)for(u=0,e=r.length;u<e;u++)i.push({name:f,value:r[u]});else r!==null&&typeof r!="undefined"&&i.push({name:this.name,value:r})}),n.param(i)};n.fn.fieldValue=function(t){for(var f,i,r=[],u=0,e=this.length;u<e;u++)(f=this[u],i=n.fieldValue(f,t),i!==null&&typeof i!="undefined"&&(i.constructor!=Array||i.length))&&(i.constructor==Array?n.merge(r,i):r.push(i));return r};n.fieldValue=function(t,i){var a=t.name,u=t.type,h=t.tagName.toLowerCase(),e,o,r,f;if(i===undefined&&(i=!0),i&&(!a||t.disabled||u=="reset"||u=="button"||(u=="checkbox"||u=="radio")&&!t.checked||(u=="submit"||u=="image")&&t.form&&t.form.clk!=t||h=="select"&&t.selectedIndex==-1))return null;if(h=="select"){if(e=t.selectedIndex,e<0)return null;var c=[],l=t.options,s=u=="select-one",v=s?e+1:l.length;for(o=s?e:0;o<v;o++)if(r=l[o],r.selected){if(f=r.value,f||(f=r.attributes&&r.attributes.value&&!r.attributes.value.specified?r.text:r.value),s)return f;c.push(f)}return c}return n(t).val()};n.fn.clearForm=function(t){return this.each(function(){n("input,select,textarea",this).clearFields(t)})};n.fn.clearFields=n.fn.clearInputs=function(t){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,u=this.tagName.toLowerCase();i.test(r)||u=="textarea"?this.value="":r=="checkbox"||r=="radio"?this.checked=!1:u=="select"?this.selectedIndex=-1:r=="file"?/MSIE/.test(navigator.userAgent)?n(this).replaceWith(n(this).clone(!0)):n(this).val(""):t&&(t===!0&&/hidden/.test(r)||typeof t=="string"&&n(this).is(t))&&(this.value="")})};n.fn.resetForm=function(){return this.each(function(){typeof this.reset!="function"&&(typeof this.reset!="object"||this.reset.nodeType)||this.reset()})};n.fn.enable=function(n){return n===undefined&&(n=!0),this.each(function(){this.disabled=!n})};n.fn.selected=function(t){return t===undefined&&(t=!0),this.each(function(){var r=this.type,i;r=="checkbox"||r=="radio"?this.checked=t:this.tagName.toLowerCase()=="option"&&(i=n(this).parent("select"),t&&i[0]&&i[0].type=="select-one"&&i.find("option").selected(!1),this.selected=t)})};n.fn.ajaxSubmit.debug=!1}(jQuery),function(n){n.fn.infinite=function(t){function c(){var t=n(document).height(),u=r.outerHeight(),f=t*i.percentage-u,e=r.scrollTop();return e>f}function l(){var u=n(document).height(),t=r.outerHeight(),f=u*i.percentage-t;return f<t}function a(){r.on("scroll."+u,function(){i.allow&&c()&&(i.allow=!1,s())})}function s(){n.ajax({url:i.path,data:i.ajaxData,dataType:"html",cache:!1,beforeSend:function(){y()},complete:function(){},error:function(){},success:function(t){var f=n(t).find(i.item);f.length?(i.target.append(f),i.ajaxData.page++,i.allow=!0,r.data(u,i),i.fnAfterLoad(t),p()):(v(),o.destroy())}})}function v(){i.loading.removeClass(f.loading).show().find("."+f.message).text(i.msgDone);setTimeout(function(){i.loading.fadeOut(function(){n(this).remove()})},5e3)}function y(){i.loading.addClass(f.loading).show()}function p(){i.loading.removeClass(f.loading).hide()}var r,i={},u="infinite",h={msg:"Getting more items",msgDone:"No more items",more:null,target:null,item:null,percentage:.8,fnAfterLoad:function(){}},e={loading:null,path:null,ajaxData:null,allow:!0},f={messageWrapper:"load-msg-wrapper infinite-scroll-msg",message:"load-msg",loading:"load-msg-loading"},o={init:function(t){if(n.extend(i,h,t),i.more&&i.more.length||n.error("jQuery."+u+": Must provide a more link."),i.target&&i.target.length||n.error("jQuery."+u+": Must provide a target element."),typeof i.more=="string"&&(i.more=n(i.more)),typeof i.target=="string"&&(i.target=n(i.target)),i.more.length){i.more.parent().hide();var o=i.more.url();e.path=o.attr("path");e.ajaxData=o.param();e.ajaxData.isInfiniteScroll=!0;e.loading=n("<div />",{"class":f.messageWrapper}).html(n("<div />",{"class":f.message}).text(i.msg)).insertAfter(i.more.parent());n.extend(i,e);r.data(u,i);a();l()&&s()}},destroy:function(){r.off("."+u).removeData(u)}};if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).infinite(t)});if(r=n(this),o[t])return i=r.data(u),o[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method "+t+" does not exist on jQuery."+u);else return o.init.apply(this,arguments)}}(jQuery,window),function(n){n.Jcrop=function(t,i){function h(n){return Math.round(n)+"px"}function ft(n){return r.baseClass+"-"+n}function bi(){return n.fx.step.hasOwnProperty("backgroundColor")}function et(t){var i=n(t).offset();return[i.left,i.top]}function nt(n){return[n.pageX-b[0],n.pageY-b[1]]}function ri(t){typeof t!="object"&&(t={});r=n.extend(r,t);n.each(["onChange","onSelect","onRelease","onDblClick"],function(n,t){typeof r[t]!="function"&&(r[t]=function(){})})}function ui(n,t,i){if(b=et(e),p.setCursor(n==="move"?n:n+"-resize"),n==="move")return p.activateHandlers(di(t),pt,i);var u=s.getFixed(),r=fi(n),f=s.getCorner(fi(r));s.setPressed(s.getCorner(r));s.setCurrent(f);p.activateHandlers(ki(n,u),pt,i)}function ki(n,t){return function(i){if(r.aspectRatio)switch(n){case"e":i[1]=t.y+1;break;case"w":i[1]=t.y+1;break;case"n":i[0]=t.x+1;break;case"s":i[0]=t.x+1}else switch(n){case"e":i[1]=t.y2;break;case"w":i[1]=t.y2;break;case"n":i[0]=t.x2;break;case"s":i[0]=t.x2}s.setCurrent(i);u.update()}}function di(n){var t=n;return kt.watchKeys(),function(n){s.moveOffset([n[0]-t[0],n[1]-t[1]]);t=n;u.update()}}function fi(n){switch(n){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function ei(n){return function(t){return r.disabled?!1:n==="move"&&!r.allowMove?!1:(b=et(e),ut=!0,ui(n,nt(t)),t.stopPropagation(),t.preventDefault(),!1)}}function oi(n,t,i){var r=n.width(),u=n.height();r>t&&t>0&&(r=t,u=t/n.width()*n.height());u>i&&i>0&&(u=i,r=i/n.height()*n.width());l=n.width()/r;a=n.height()/u;n.width(r).height(u)}function ot(n){return{x:n.x*l,y:n.y*a,x2:n.x2*l,y2:n.y2*a,w:n.w*l,h:n.h*a}}function pt(){var n=s.getFixed();n.w>r.minSelect[0]&&n.h>r.minSelect[1]?(u.enableHandles(),u.done()):u.release();p.setCursor(r.allowSelect?"crosshair":"default")}function si(n){if(r.disabled||!r.allowSelect)return!1;ut=!0;b=et(e);u.disableHandles();p.setCursor("crosshair");var t=nt(n);return s.setPressed(t),u.update(),p.activateHandlers(gi,pt,n.type.substring(0,5)==="touch"),kt.watchKeys(),n.stopPropagation(),n.preventDefault(),!1}function gi(n){s.setCurrent(n);u.update()}function hi(){var t=n("<div><\/div>").addClass(ft("tracker"));return ti&&t.css({opacity:0,backgroundColor:"white"}),t}function nr(n){w.removeClass().addClass(ft("holder")).addClass(n)}function tr(n,t){function b(){window.setTimeout(k,d)}var c=n[0]/l,y=n[1]/a,p=n[2]/l,w=n[3]/a,k;if(!bt){var o=s.flipCoords(c,y,p,w),h=s.getFixed(),e=[h.x,h.y,h.x2,h.y2],i=e,d=r.animationDelay,g=o[0]-e[0],nt=o[1]-e[1],tt=o[2]-e[2],it=o[3]-e[3],f=0,rt=r.swingSpeed;c=i[0];y=i[1];p=i[2];w=i[3];u.animMode(!0);k=function(){return function(){f+=(100-f)/rt;i[0]=Math.round(c+f/100*g);i[1]=Math.round(y+f/100*nt);i[2]=Math.round(p+f/100*tt);i[3]=Math.round(w+f/100*it);f>=99.8&&(f=100);f<100?(yi(i),b()):(u.done(),u.animMode(!1),typeof t=="function"&&t.call(v))}}();b()}}function vi(n){yi([n[0]/l,n[1]/a,n[2]/l,n[3]/a]);r.onSelect.call(v,ot(s.getFixed()));u.enableHandles()}function yi(n){s.setPressed([n[0],n[1]]);s.setCurrent([n[2],n[3]]);u.update()}function ir(){return ot(s.getFixed())}function rr(){return s.getFixed()}function ur(n){ri(n);gt()}function pi(){r.disabled=!0;u.disableHandles();u.setCursor("default");p.setCursor("default")}function wi(){r.disabled=!1;gt()}function fr(){u.done();p.activateHandlers(null,null)}function er(){w.remove();c.show();c.css("visibility","visible");n(t).removeData("Jcrop")}function or(n,t){u.release();pi();var i=new Image;i.onload=function(){var u=i.width,s=i.height,h=r.boxWidth,c=r.boxHeight;e.width(u).height(s);e.attr("src",n);k.attr("src",n);oi(e,h,c);o=e.width();f=e.height();k.width(o).height(f);d.width(o+rt*2).height(f+rt*2);w.width(o).height(f);g.resize(o,f);wi();typeof t=="function"&&t.call(v)};i.src=n}function dt(n,t,i){var u=t||r.bgColor;r.bgFade&&bi()&&r.fadeTime&&!i?n.animate({backgroundColor:u},{queue:!1,duration:r.fadeTime}):n.css("backgroundColor",u)}function gt(n){r.allowResize?n?u.enableOnly():u.enableHandles():u.disableHandles();p.setCursor(r.allowSelect?"crosshair":"default");u.setCursor(r.allowMove?"move":"default");r.hasOwnProperty("trueSize")&&(l=r.trueSize[0]/o,a=r.trueSize[1]/f);r.hasOwnProperty("setSelect")&&(vi(r.setSelect),u.done(),delete r.setSelect);g.refresh();r.bgColor!=li&&(dt(r.shade?g.getShades():w,r.shade?r.shadeColor||r.bgColor:r.bgColor),li=r.bgColor);st!=r.bgOpacity&&(st=r.bgOpacity,r.shade?g.refresh():u.setBgOpacity(st));ht=r.maxSize[0]||0;ct=r.maxSize[1]||0;lt=r.minSize[0]||0;at=r.minSize[1]||0;r.hasOwnProperty("outerImage")&&(e.attr("src",r.outerImage),delete r.outerImage);u.refresh()}var r=n.extend({},n.Jcrop.defaults),b,ni=navigator.userAgent.toLowerCase(),ti=/msie/.test(ni),ii=/msie [1-6]\./.test(ni),vt,e,v;typeof t!="object"&&(t=n(t)[0]);typeof i!="object"&&(i={});ri(i);var wt={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},c=n(t),ci=!0;t.tagName=="IMG"?(c[0].width!=0&&c[0].height!=0?(c.width(c[0].width),c.height(c[0].height)):(vt=new Image,vt.src=c[0].src,c.width(vt.width),c.height(vt.height)),e=c.clone().removeAttr("id").css(wt).show(),e.width(c.width()),e.height(c.height()),c.after(e).hide()):(e=c.css(wt).show(),ci=!1,r.shade===null&&(r.shade=!0));oi(e,r.boxWidth,r.boxHeight);var o=e.width(),f=e.height(),w=n("<div />").width(o).height(f).addClass(ft("holder")).css({position:"relative",backgroundColor:r.bgColor}).insertAfter(c).append(e);r.addClass&&w.addClass(r.addClass);var k=n("<div />"),yt=n("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),tt=n("<div />").width("100%").height("100%").css("zIndex",320),it=n("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var n=s.getFixed();r.onDblClick.call(v,n)}).insertBefore(e).append(yt,tt);ci&&(k=n("<img />").attr("src",e.attr("src")).css(wt).width(o).height(f),yt.append(k));ii&&it.css({overflowY:"hidden"});var rt=r.boundary,d=hi().width(o+rt*2).height(f+rt*2).css({position:"absolute",top:h(-rt),left:h(-rt),zIndex:290}).mousedown(si),li=r.bgColor,st=r.bgOpacity,ht,ct,lt,at,l,a,ut,bt,ai;b=et(e);var y=function(){function n(){var i={},u=["touchstart","touchmove","touchend"],f=document.createElement("div"),t,n,r;try{for(t=0;t<u.length;t++)n=u[t],n="on"+n,r=n in f,r||(f.setAttribute(n,"return;"),r=typeof f[n]=="function"),i[u[t]]=r;return i.touchstart&&i.touchend&&i.touchmove}catch(e){return!1}}function t(){return r.touchSupport===!0||r.touchSupport===!1?r.touchSupport:n()}return{createDragger:function(n){return function(t){return r.disabled?!1:n==="move"&&!r.allowMove?!1:(b=et(e),ut=!0,ui(n,nt(y.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1)}},newSelection:function(n){return si(y.cfilter(n))},cfilter:function(n){return n.pageX=n.originalEvent.changedTouches[0].pageX,n.pageY=n.originalEvent.changedTouches[0].pageY,n},isSupported:n,support:t()}}(),s=function(){function p(r){r=v(r);u=n=r[0];i=t=r[1]}function w(n){n=v(n);s=n[0]-u;h=n[1]-i;u=n[0];i=n[1]}function b(){return[s,h]}function k(r){var e=r[0],s=r[1];0>n+e&&(e-=e+n);0>t+s&&(s-=s+t);f<i+s&&(s+=f-(i+s));o<u+e&&(e+=o-(u+e));n+=e;u+=e;t+=s;i+=s}function d(n){var t=c();switch(n){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function c(){if(!r.aspectRatio)return g();var c=r.aspectRatio,b=r.minSize[0]/l,w=r.maxSize[0]/l,nt=r.maxSize[1]/a,k=u-n,d=i-t,tt=Math.abs(k),it=Math.abs(d),rt=tt/it,s,h,v,p;return w===0&&(w=o*10),nt===0&&(nt=f*10),rt<c?(h=i,v=it*c,s=k<0?n-v:v+n,s<0?(s=0,p=Math.abs((s-n)/c),h=d<0?t-p:p+t):s>o&&(s=o,p=Math.abs((s-n)/c),h=d<0?t-p:p+t)):(s=u,p=tt/c,h=d<0?t-p:t+p,h<0?(h=0,v=Math.abs((h-t)*c),s=k<0?n-v:v+n):h>f&&(h=f,v=Math.abs(h-t)*c,s=k<0?n-v:v+n)),s>n?(s-n<b?s=n+b:s-n>w&&(s=n+w),h=h>t?t+(s-n)/c:t-(s-n)/c):s<n&&(n-s<b?s=n-b:n-s>w&&(s=n-w),h=h>t?t+(n-s)/c:t-(n-s)/c),s<0?(n-=s,s=0):s>o&&(n-=s-o,s=o),h<0?(t-=h,h=0):h>f&&(t-=h-f,h=f),y(e(n,t,s,h))}function v(n){return n[0]<0&&(n[0]=0),n[1]<0&&(n[1]=0),n[0]>o&&(n[0]=o),n[1]>f&&(n[1]=f),[Math.round(n[0]),Math.round(n[1])]}function e(n,t,i,r){var u=n,f=i,e=t,o=r;return i<n&&(u=i,f=n),r<t&&(e=r,o=t),[u,e,f,o]}function g(){var s=u-n,h=i-t,r;return ht&&Math.abs(s)>ht&&(u=s>0?n+ht:n-ht),ct&&Math.abs(h)>ct&&(i=h>0?t+ct:t-ct),at/a&&Math.abs(h)<at/a&&(i=h>0?t+at/a:t-at/a),lt/l&&Math.abs(s)<lt/l&&(u=s>0?n+lt/l:n-lt/l),n<0&&(u-=n,n-=n),t<0&&(i-=t,t-=t),u<0&&(n-=u,u-=u),i<0&&(t-=i,i-=i),u>o&&(r=u-o,n-=r,u-=r),i>f&&(r=i-f,t-=r,i-=r),n>o&&(r=n-f,i-=r,t-=r),t>f&&(r=t-f,i-=r,t-=r),y(e(n,t,u,i))}function y(n){return{x:n[0],y:n[1],x2:n[2],y2:n[3],w:n[2]-n[0],h:n[3]-n[1]}}var n=0,t=0,u=0,i=0,s,h;return{flipCoords:e,setPressed:p,setCurrent:w,getOffset:b,moveOffset:k,getCorner:d,getFixed:c}}(),g=function(){function nt(n,t){i.left.css({height:h(t)});i.right.css({height:h(t)})}function v(){return y(s.getFixed())}function y(n){i.top.css({left:h(n.x),width:h(n.w),height:h(n.y)});i.bottom.css({top:h(n.y2),left:h(n.x),width:h(n.w),height:h(f-n.y2)});i.right.css({left:h(n.x2),width:h(o-n.x2)});i.left.css({width:h(n.x)})}function l(){return n("<div />").css({position:"absolute",backgroundColor:r.shadeColor||r.bgColor}).appendTo(t)}function p(){c||(c=!0,t.insertBefore(e),v(),u.setBgOpacity(1,0,1),k.hide(),b(r.shadeColor||r.bgColor,1),u.isAwake()?a(r.bgOpacity,1):a(1,1))}function b(n,t){dt(g(),n,t)}function d(){c&&(t.remove(),k.show(),c=!1,u.isAwake()?u.setBgOpacity(r.bgOpacity,1,1):(u.setBgOpacity(1,1,1),u.disableHandles()),dt(w,0,1))}function a(n,i){c&&(r.bgFade&&!i?t.animate({opacity:1-n},{queue:!1,duration:r.fadeTime}):t.css({opacity:1-n}))}function tt(){r.shade?p():d();u.isAwake()&&a(r.bgOpacity)}function g(){return t.children()}var c=!1,t=n("<div />").css({position:"absolute",zIndex:240,opacity:0}),i={top:l(),left:l().height(f),right:l().height(f),bottom:l()};return{update:v,updateRaw:y,getShades:g,setBgColor:b,enable:p,disable:d,resize:nt,refresh:tt,opacity:a}}(),u=function(){function et(t){var i=n("<div />").css({position:"absolute",opacity:r.borderOpacity}).addClass(ft(t));return yt.append(i),i}function l(t,i){var r=n("<div />").mousedown(ei(t)).css({cursor:t+"-resize",position:"absolute",zIndex:i}).addClass("ord-"+t);return y.support&&r.bind("touchstart.jcrop",y.createDragger(t)),tt.append(r),r}function ht(n){var t=r.handleSize,i=l(n,c++).css({opacity:r.handleOpacity}).addClass(ft("handle"));return t&&i.width(t).height(t),i}function ct(n){return l(n,c++).addClass("jcrop-dragbar")}function lt(n){for(var t=0;t<n.length;t++)ut[n[t]]=ct(n[t])}function at(n){for(var t,i=0;i<n.length;i++){switch(n[i]){case"n":t="hline";break;case"s":t="hline bottom";break;case"e":t="vline right";break;case"w":t="vline"}nt[n[i]]=et(t)}}function vt(n){for(var t=0;t<n.length;t++)rt[n[t]]=ht(n[t])}function pt(n,t){r.shade||k.css({top:h(-t),left:h(-n)});it.css({top:h(t),left:h(n)})}function wt(n,t){it.width(Math.round(n)).height(Math.round(t))}function a(){var n=s.getFixed();s.setPressed([n.x,n.y]);s.setCurrent([n.x2,n.y2]);p()}function p(n){if(t)return w(n)}function w(n){var i=s.getFixed();wt(i.w,i.h);pt(i.x,i.y);r.shade&&g.updateRaw(i);t||kt();n?r.onSelect.call(v,ot(i)):r.onChange.call(v,ot(i))}function o(n,i,u){(t||i)&&(r.bgFade&&!u?e.animate({opacity:n},{queue:!1,duration:r.fadeTime}):e.css("opacity",n))}function kt(){it.show();r.shade?g.opacity(st):o(st,!0);t=!0}function dt(){u();it.hide();r.shade?g.opacity(1):o(1);t=!1;r.onRelease.call(v)}function gt(){i&&tt.show()}function b(){return i=!0,r.allowResize?(tt.show(),!0):void 0}function u(){i=!1;tt.hide()}function d(n){n?(bt=!0,u()):(bt=!1,b())}function ni(){d(!1);a()}var t,c=370,nt={},rt={},ut={},i=!1,f;return r.dragEdges&&n.isArray(r.createDragbars)&&lt(r.createDragbars),n.isArray(r.createHandles)&&vt(r.createHandles),r.drawBorders&&n.isArray(r.createBorders)&&at(r.createBorders),n(document).bind("touchstart.jcrop-ios",function(t){n(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()}),f=hi().mousedown(ei("move")).css({cursor:"move",position:"absolute",zIndex:360}),y.support&&f.bind("touchstart.jcrop",y.createDragger("move")),yt.append(f),u(),{updateVisible:p,update:w,release:dt,refresh:a,isAwake:function(){return t},setCursor:function(n){f.css("cursor",n)},enableHandles:b,enableOnly:function(){i=!0},showHandles:gt,disableHandles:u,animMode:d,setBgOpacity:o,done:ni}}(),p=function(){function c(t){d.css({zIndex:450});t?n(document).bind("touchmove.jcrop",p).bind("touchend.jcrop",w):o&&n(document).bind("mousemove.jcrop",h).bind("mouseup.jcrop",i)}function l(){d.css({zIndex:290});n(document).unbind(".jcrop")}function h(n){return t(nt(n)),!1}function i(n){return n.preventDefault(),n.stopPropagation(),ut&&(ut=!1,f(nt(n)),u.isAwake()&&r.onSelect.call(v,ot(s.getFixed())),l(),t=function(){},f=function(){}),!1}function a(n,i,r){return ut=!0,t=n,f=i,c(r),!1}function p(n){return t(nt(y.cfilter(n))),!1}function w(n){return i(y.cfilter(n))}function b(n){d.css("cursor",n)}var t=function(){},f=function(){},o=r.trackDocument;return o||d.mousemove(h).mouseup(i).mouseout(i),e.before(d),{activateHandlers:a,setCursor:b}}(),kt=function(){function o(){r.keySupport&&(t.show(),t.focus())}function h(){t.hide()}function i(n,t,i){r.allowMove&&(s.moveOffset([t,i]),u.updateVisible(!0));n.preventDefault();n.stopPropagation()}function c(n){if(n.ctrlKey||n.metaKey)return!0;ai=n.shiftKey?!0:!1;var t=ai?10:1;switch(n.keyCode){case 37:i(n,-t,0);break;case 39:i(n,t,0);break;case 38:i(n,0,-t);break;case 40:i(n,0,t);break;case 27:r.allowSelect&&u.release();break;case 9:return!0}return!1}var t=n('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),f=n("<div />").css({position:"absolute",overflow:"hidden"}).append(t);return r.keySupport&&(t.keydown(c).blur(h),ii||!r.fixedSupport?(t.css({position:"absolute",left:"-20px"}),f.append(t).insertBefore(e)):t.insertBefore(e)),{watchKeys:o}}();return y.support&&d.bind("touchstart.jcrop",y.newSelection),tt.hide(),gt(!0),v={setImage:or,animateTo:tr,setSelect:vi,setOptions:ur,tellSelect:ir,tellScaled:rr,setClass:nr,disable:pi,enable:wi,cancel:fr,release:u.release,destroy:er,focus:kt.watchKeys,getBounds:function(){return[o*l,f*a]},getWidgetSize:function(){return[o,f]},getScaleFactor:function(){return[l,a]},getOptions:function(){return r},ui:{holder:w,selection:it}},ti&&w.bind("selectstart",function(){return!1}),c.data("Jcrop",v),v};n.fn.Jcrop=function(t,i){var r;return this.each(function(){if(n(this).data("Jcrop")){if(t==="api")return n(this).data("Jcrop");n(this).data("Jcrop").setOptions(t)}else this.tagName=="IMG"?n.Jcrop.Loader(this,function(){n(this).css({display:"block",visibility:"hidden"});r=n.Jcrop(this,t);n.isFunction(i)&&i.call(r)}):(n(this).css({display:"block",visibility:"hidden"}),r=n.Jcrop(this,t),n.isFunction(i)&&i.call(r))}),this};n.Jcrop.Loader=function(t,i,r){function e(){f.complete?(u.unbind(".jcloader"),n.isFunction(i)&&i.call(f)):window.setTimeout(e,50)}var u=n(t),f=u[0];u.bind("load.jcloader",e).bind("error.jcloader",function(){u.unbind(".jcloader");n.isFunction(r)&&r.call(f)});f.complete&&n.isFunction(i)&&(u.unbind(".jcloader"),i.call(f))};n.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),function(n,t){function r(n){var t;return typeof n=="string"&&(n=/^([0-9]+)([mgk]?)$/.exec(n.toLowerCase().replace(/[^0-9mkg]/g,"")),t=n[2],n=+n[1],t=="g"?n*=1073741824:t=="m"?n*=1048576:t=="k"&&(n*=1024)),n}function u(n){return/(?:\.([^.]+))?$/.exec(n)[1]}function i(n){console=console||{};console.log(n)}n.fn.jdoc=function(f){function p(n){return n==="pdf"}function w(t){return n.inArray(t,["jpg","jpeg","gif","png","bmp"])!==-1}function b(t){return n.inArray(t,["txt","csv","xml"])!==-1}function v(){e.fnBeforeLoad(o)&&(e.view===h.thumbs||e.view===h.edit||e.view===h.split?o.addClass("preview-thumbs"):o.addClass("preview-full"),p(e.ext)?y(e.url,e.renderMode):w(e.ext)?nt():b(e.ext)?tt():s(!0,e.msg.unsupportedType))}function y(r,u){function b(){s(!0,e.msg.loading);n.ajax({type:"get",url:r,error:function(){s(!0,"Document could not be loaded.")},success:function(t){if(t.hasError){e.renderMode="flatten";y(r,"flatten");return}v(t.files.length,function(){var r,u,f,e;for(i("Loading file as base64 strings."),r=0,u=t.files.length;r<u;r++)f=r+1,e=t.files[r],a(f,e,n.noop);p()})}})}function l(){s(!0,e.msg.loading);t.PDFJS.workerSrc=e.pdfjsWorkerUrl;var u=document.createElement("canvas"),f=u.getContext("2d"),n=1;t.PDFJS.getDocument(r).then(function(t){function r(){t.getPage(n).then(function(i){var s=i.rotate||0,e=i.getViewport(2,s),o;u.height=e.height;u.width=e.width;o={canvasContext:f,viewport:e};i.render(o).then(function(){var i=u.toDataURL(),e=f.canvas.width,o=f.canvas.height;a(n,i,function(){f.clearRect(0,0,e,o)});n<t.numPages?(n++,r()):p()})})}i("Loading file with pdf.js.");v(t.numPages,function(){n<=t.numPages&&r()})}).catch(function(n){i(n);s(!0,e.msg.unsupportedType)})}function a(t,i,r){var u=n('[data-num="'+t+'"]'),f=u.find("img")[0];f.onload=function(){u.removeClass("thumb-isLoading");r()};f.src=i}function v(t,i){for(var u=[],r=1;r<=t;r++)u.push({id:"thumb"+r,pageNumber:r,isEdit:e.view==h.edit||e.view==h.split,isSplit:e.view==h.split});model={pages:u};n.Mustache.load("/assets/templates/PdfThumb.htm").done(function(){o.mustache("pdf-thumb",model,{method:"append"});i()})}function p(){s(!1);e.fnAfterLoad();d();w()}function k(){if(e.view==h.full||e.view==h.thumbs){n("#btnViewFullPage").off(".switch").on("click.switch",function(n){n.preventDefault();n.stopPropagation();f({isFullPageView:!0})});n("#btnViewThumbnails").off(".switch").on("click.switch",function(n){n.preventDefault();n.stopPropagation();f({isFullPageView:!1})})}else n("#btnViewFullPage, #btnViewThumbnails").off(".switch")}function w(){if(o.removeClass("can-zoom"),e.view==h.thumbs)o.addClass("can-zoom").on("click.expand",".thumb img",function(){f({isFullPageView:!0});var r=n(this).closest(".thumb").data("num")||1,u=o.find('[data-num="'+r+'"]').offset().top,i=u-n("#documentTopDetails").outerHeight();n.ctvsuper2("isOpen")?(i=i-n(t).scrollTop(),n.ctvsuper2("get").scrollTop(i)):n(t).scrollTop(i);o.off("click.expand")})}function d(){if(e.view===h.edit){function t(t){o.find(".thumb:not(.removed-page) input:checkbox:checked").each(function(){var y=n(this),c=y.closest(".thumb"),u=c.find("img"),p=parseInt(c.attr("data-rotate")||0),w=(p+t)%360,v,l;c.attr("data-rotate",w);var f=document.createElement("canvas"),a=f.getContext("2d"),i=u.width(),r=u.height(),e=0,o=0,s=0,h=0;switch(t){case 90:e=r;o=i;s=0;h=r*-1;break;case 180:e=i;o=r;s=i*-1;h=r*-1;break;case 270:e=r;o=i;s=i*-1;h=0}f.setAttribute("width",e);f.setAttribute("height",o);a.rotate(t*Math.PI/180);a.drawImage(u.get(0),s,h,i,r);v=f.toDataURL();l=new Image;l.onload=function(){n(this).width("100%").height("auto");u.replaceWith(this)};l.src=v})}n("#editActions").on("click."+c,"[data-edit]",function(i){i.preventDefault();var r=n(this).data("edit");r=="270"?t(270):r=="90"?t(90):r=="180"?t(180):r=="remove"&&g()});n("#select-all-pages").selectall({container:o,item:".thumb:not(.removed-page)",itemCheckbox:"input:checkbox",selected:""});o.sortable({items:".thumb",containment:"parent",opacity:.6,scroll:!0,refreshPositions:!0,tolerance:"pointer"})}}function f(n){var t="preview-full",i="preview-thumbs";n.isFullPageView?(o.removeClass(i).addClass(t),e.view=h.full):(o.removeClass(t).addClass(i),e.view=h.thumbs);w()}k();u==="base64"?b():Modernizr.canvas&&Modernizr.filereader?t.PDFJS===undefined?n.when(n.getScript(e.pdfjsUrl),n.getScript(e.pdfjsCompatibilityUrl),n.getScript(e.pdfjsWorkerUrl)).then(l):l():s(!0,e.msg.unsupportedBrowser)}function k(){var t=[],i=o.find(".thumb").each(function(i,r){var u=n(r);t.push({id:u.attr("data-num"),remove:u.hasClass("removed-page"),rotate:u.attr("data-rotate")||0,order:i})});return t}function d(){var t=[],i=o.find(".thumb").each(function(i,r){var u=n(r);t.push({id:u.attr("data-num"),file:u.find("select").val()})});return t}function g(){o.find(".thumb input:checkbox:checked").each(function(){var t=n(this);t.closest(".thumb").addClass("removed-page");t.one("click",function(){t.closest(".thumb").removeClass("removed-page")})})}function nt(){s(!0,e.msg.loading);var t=n("<img />").css("opacity",0).error(function(){s(!0,e.msg.fileNotFound)}).load(function(){s(!1);t.appendTo(o).animate({opacity:1});e.fnAfterLoad()}).attr("src",e.url)}function tt(){s(!0,e.msg.loading);var t=n("<pre />").css("opacity",0);n.ajax({url:e.url,dataType:"text",error:function(){s(!0,e.msg.fileNotFound)},success:function(n){s(!1);t.text(n).appendTo(o).animate({opacity:1});e.fnAfterLoad()}})}function s(n,t){n&&t?l.html(t).removeClass("hide"):l.empty().addClass("hide")}var o,l,c="jdoc",h={full:"full",thumbs:"thumbs",edit:"edit",split:"split"},e={mobileDisabled:!1,url:null,ext:null,size:null,maxSize:null,view:"full",pdfjsUrl:"pdfjs.js",pdfjsWorkerUrl:"pdf.worker.js",pdfjsCompatibilityUrl:"compatibility.js",renderMode:null,fnAfterLoad:n.noop,fnBeforeLoad:function(){return!0},msg:{unsupportedBrowser:"Your browser does not support viewing this file type. <br/>To view the document, please click Download above.",unsupportedType:"This file cannot display in your browser. Please download it to view.",unsupportedDevice:"Document preview is unavailable on this device.",fileNotFound:"Sorry, that file was not found.",loading:"One moment please. We are loading this document now.",get:"Click here to preview this document."}},a={init:function(i){var f,h,a;if(n.extend(e,i),e.url||n.error(c+": file URL needed."),e.ext=e.ext||u(e.url),e.ext||n.error(c+": file type could not be detected."),l&&l.length||(f=n('<div class="load-msg-wrapper"><div class="load-msg"><\/div><\/div>'),o.append(f),l=o.find(".load-msg")),e.mobileDisabled&&n(t).width()<=574){s(!0,e.msg.unsupportedDevice);return}h=o.data(c);h||o.data(c,e);e.size&&e.maxSize&&r(e.size)>r(e.maxSize)?(a=n("<button />",{"class":"btn-link",type:"button"}).text(e.msg.get).on("click",function(n){n.preventDefault();n.stopPropagation();v()}),s(!0,a)):v()},msg:function(n){s(!0,n)},next:function(){},prev:function(){},serialize:function(){return e.view==h.edit?k():e.view==h.split?d():[]}};if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).jdoc(f)});if(o=n(this),l=n("#previewMsg"),a[f])return e=o.data(c),a[f].apply(this,Array.prototype.slice.call(arguments,1));if(typeof f!="object"&&f)n.error("Method "+f+" does not exist on jQuery."+c);else return a.init.apply(this,arguments)}}(jQuery,window),function(n){function r(t){var i=t||window.event,e=[].slice.call(arguments,1),r=0,f=0,u=0;return t=n.event.fix(i),t.type="mousewheel",i.wheelDelta&&(r=i.wheelDelta/120),i.detail&&(r=-i.detail/3),u=r,i.axis!==undefined&&i.axis===i.HORIZONTAL_AXIS&&(u=0,f=-1*r),i.wheelDeltaY!==undefined&&(u=i.wheelDeltaY/120),i.wheelDeltaX!==undefined&&(f=i.wheelDeltaX/-120),e.unshift(t,r,f,u),(n.event.dispatch||n.event.handle).apply(this,e)}var t=["DOMMouseScroll","mousewheel"],i;if(n.event.fixHooks)for(i=t.length;i;)n.event.fixHooks[t[--i]]=n.event.mouseHooks;n.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var n=t.length;n;)this.addEventListener(t[--n],r,!1);else this.onmousewheel=r},teardown:function(){if(this.removeEventListener)for(var n=t.length;n;)this.removeEventListener(t[--n],r,!1);else this.onmousewheel=null}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}})}(jQuery),function(n,t){"use strict";function e(){return r===null&&(r=t.Mustache,r===void 0&&n.error("Failed to locate Mustache instance, are you sure it has been loaded?")),r}function o(n){return i[n]!==void 0}function f(t,r){if(!u.allowOverwrite&&o(t)){n.error("TemplateName: "+t+" is already mapped.");return}i[t]=n.trim(r)}function h(){var t;t=arguments.length===0?n('script[type="'+u.domTemplateType+'"]').map(function(){return this.id}):n.makeArray(arguments);n.each(t,function(){var t=document.getElementById(this);t===null?n.error("No such elementId: #"+this):f(this,n(t).html())})}function c(n){var t=i[n];return delete i[n],t}function l(){i={};e().clearCache()}function s(t,r){return o(t)?e().to_html(i[t],r,i):(u.warnOnMissingTemplates&&n.error("No template registered for: "+t),"")}function a(t,i){return n.ajax({url:t,dataType:u.externalTemplateDataType}).done(function(t){n(t).filter("script").each(function(t,i){f(i.id,n(i).html())});n.isFunction(i)&&i()})}function v(){return n.map(i,function(n,t){return t})}var i={},r=null,u={warnOnMissingTemplates:!1,allowOverwrite:!0,domTemplateType:"text/html",externalTemplateDataType:"text"};n.Mustache={options:u,load:a,add:f,addFromDom:h,remove:c,clear:l,render:s,templates:v,instance:r};n.fn.mustache=function(t,i,r){var f=n.extend({method:"append"},r),u=function(i,r){n(i)[f.method](s(t,r))};return this.each(function(){var t=this;n.isArray(i)?n.each(i,function(){u(t,this)}):u(t,i)})}}(jQuery,window),function(n){"use strict";n.fn.pin=function(t){var u=0,i=[],e=!1,r=n(window);t=t||{};var f=function(){for(var u,f=0,h=i.length;f<h;f++){if(u=i[f],t.minWidth&&r.width()<=t.minWidth){u.parent().is(".pin-wrapper")&&u.unwrap();u.css({width:"",left:"",top:"",position:""});t.activeClass&&u.removeClass(t.activeClass);e=!0;continue}else e=!1;var o=t.containerSelector?u.closest(t.containerSelector):n(document.body),c=u.offset(),s=o.offset(),l=u.offsetParent().offset();u.parent().is(".pin-wrapper")||u.wrap("<div class='pin-wrapper'>");u.data("pin",{from:t.containerSelector?s.top:c.top,to:s.top+o.height()-u.outerHeight(),end:s.top+o.height(),parentTop:l.top});u.css({width:u.outerWidth()});u.parent().css("height",u.outerHeight())}},o=function(){var o,c;if(!e)for(u=r.scrollTop(),o=0,c=i.length;o<c;o++){var f=n(i[o]),s=f.data("pin"),l=s.from,h=s.to;if(l+f.outerHeight()>s.end){f.css("position","");continue}l<u&&h>u?(f.css("position")=="fixed"||f.css({left:f.offset().left,top:0}).css("position","fixed"),t.activeClass&&f.addClass(t.activeClass)):u>=h?(f.css({left:"",top:h-s.parentTop}).css("position","absolute"),t.activeClass&&f.addClass(t.activeClass)):(f.css({position:"",top:"",left:""}),t.activeClass&&f.removeClass(t.activeClass))}},s=function(){f();o()};return this.each(function(){var r=n(this),t=n(this).data("pin")||{};if(!t||!t.update){i.push(r);n("img",this).one("load",f);t.update=s;n(this).data("pin",t)}}),r.scroll(o),r.resize(function(){f()}),f(),r.load(s),this}}(jQuery),function(n,t){n.fn.popover=function(i){function h(){n(t).on("popover.open",function(){e()})}function c(){n(document).on("click",function(){e()})}function l(){u.on(r.triggerEvents,function(n){n.stopPropagation();r.content.hasClass("vh")?a():e()})}function a(){function i(u){function f(i){return i<n(t).scrollTop()}function a(i){return i<n(t).scrollLeft()}function v(i){return i+s>n(t).width()+n(t).scrollLeft()}if(u.location.indexOf("below")>-1||u.location.indexOf("above")>-1){if(u.location.indexOf("above")>-1){if(u.y=o-l-r.tip,f(u.y))return u.location=u.location.replace("above","below"),i(u)}else u.y=o+c+r.tip;if(u.location.indexOf("center")>-1){if(u.x=y-s/2,a(u.x))return u.location=u.location.replace("center","left"),i(u);if(v(u.x))return u.location=u.location.replace("center","right"),i(u)}else if(u.location.indexOf("left")>-1){if(u.x=e,a(u.x))return u.location=u.location.replace("left","right"),i(u)}else if(u.location.indexOf("right")>-1&&(u.x=e+h-s,v(u.x)))return u.location=u.location.replace("right","left"),i(u)}else if(u.location.indexOf("after")>-1||u.location.indexOf("before")>-1){if(u.location.indexOf("after")>-1){if(u.x=e+h+r.tip,v(u.x))return u.location="below center",i(u)}else if(u.location.indexOf("before")>-1&&(u.x=e-s-r.tip,a(u.x)))return u.location="below center",i(u);if(u.location.indexOf("bottom")>-1){if(u.y=o+c-l,f(u.y))return u.location=u.location.replace("bottom","middle"),i(u)}else if(u.location.indexOf("middle")>-1){if(u.y=p-l/2,f(u.y))return u.location=u.location.replace("middle","top"),i(u)}else if(u.location.indexOf("top")>-1&&(u.y=o,f(u.y)))return u.location="below center",i(u)}return u}var f;n(t).trigger("popover.open");f=r.content;f.removeClass("hide vh").css("visibility","hidden");f.removeClass("tip above after below before left center right top middle bottom");var e=u.offset().left,o=u.offset().top,h=u.outerWidth(),c=u.outerHeight(),y=e+h/2,p=o+c/2,s=f.outerWidth(),l=f.outerHeight(),a=i({location:r.position,x:0,y:0}),v=f.css({top:0,left:0}).offset(),w=a.y-v.top,b=a.x-v.left;f.css({top:w+"px",left:b+"px"}).addClass("tip "+a.location).removeClass("vh hide").css("visibility","visible");u.hasClass("tooltip")&&n.fn.tipsy&&u.tipsy("hide");r.onOpen()}function e(){r.content.addClass("vh").css({left:"-1px"});r.onClose()}function s(t){n.error(f+": "+t)}var u,f="jquery.popover",r={content:null,triggerEvents:"click",position:"below center",tip:0,onOpen:n.noop,onClose:n.noop},o={init:function(t){n.extend(r,t);r.content||s("jquery object expected for _settings.content.");var i=u.data(f);i||u.data(f,r);c();l();h()},close:function(){e()}};if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).popover(i)});if(u=n(this),o[i])return r=u.data(f),o[i].apply(this,Array.prototype.slice.call(arguments,1));if(typeof i!="object"&&i)s('Method "'+i+'" does not exist.');else return o.init.apply(this,arguments)}}(jQuery,window),function(n){typeof define=="function"&&define.amd?define(n):window.purl=n()}(function(){function c(n,t){for(var u=decodeURI(n),e=h[t||!1?"strict":"loose"].exec(u),i={attr:{},param:{},seg:{}},r=14;r--;)i.attr[o[r]]=e[r]||"";return i.param.query=f(i.attr.query),i.param.fragment=f(i.attr.fragment),i.seg.path=i.attr.path.replace(/^\/+|\/+$/g,"").split("/"),i.seg.fragment=i.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),i.attr.base=i.attr.host?(i.attr.protocol?i.attr.protocol+"://"+i.attr.host:i.attr.host)+(i.attr.port?":"+i.attr.port:""):"",i}function l(n){var t=n.tagName;return typeof t!="undefined"?e[t.toLowerCase()]:t}function u(n,t){var i,r;if(n[t].length===0)return n[t]={};i={};for(r in n[t])i[r]=n[t][r];return n[t]=i,i}function r(t,f,e,o){var h=t.shift(),s;h?(s=f[e]=f[e]||[],"]"==h?n(s)?""!==o&&s.push(o):"object"==typeof s?s[w(s).length]=o:s=f[e]=[f[e],o]:~h.indexOf("]")?(h=h.substr(0,h.length-1),!i.test(h)&&n(s)&&(s=u(f,e)),r(t,s,h,o)):(!i.test(h)&&n(s)&&(s=u(f,e)),r(t,s,h,o))):n(f[e])?f[e].push(o):f[e]="object"==typeof f[e]?o:"undefined"==typeof f[e]?o:[f[e],o]}function a(t,u,f){var s,e,o;if(~u.indexOf("]"))s=u.split("["),r(s,t,"base",f);else{if(!i.test(u)&&n(t.base)){e={};for(o in t.base)e[o]=t.base[o];t.base=e}u!==""&&v(t.base,u,f)}return t}function f(n){return p(String(n).split(/&|;/),function(n,t){try{t=decodeURIComponent(t.replace(/\+/g," "))}catch(e){}var u=t.indexOf("="),f=y(t),r=t.substr(0,f||u),i=t.substr(f||u,t.length);return i=i.substr(i.indexOf("=")+1,i.length),r===""&&(r=t,i=""),a(n,r,i)},{base:{}}).base}function v(t,i,r){var u=t[i];typeof u=="undefined"?t[i]=r:n(u)?u.push(r):t[i]=[u,r]}function y(n){for(var u=n.length,r,i,t=0;t<u;++t)if(i=n[t],"]"==i&&(r=!1),"["==i&&(r=!0),"="==i&&!r)return t}function p(n,t){for(var i=0,u=n.length>>0,r=arguments[2];i<u;)i in n&&(r=t.call(undefined,r,n[i],i,n)),++i;return r}function n(n){return Object.prototype.toString.call(n)==="[object Array]"}function w(n){var i=[],t;for(t in n)n.hasOwnProperty(t)&&i.push(t);return i}function t(n,t){return arguments.length===1&&n===!0&&(t=!0,n=undefined),t=t||!1,n=n||window.location.toString(),{data:c(n,t),attr:function(n){return n=s[n]||n,typeof n!="undefined"?this.data.attr[n]:this.data.attr},param:function(n){return typeof n!="undefined"?this.data.param.query[n]:this.data.param.query},fparam:function(n){return typeof n!="undefined"?this.data.param.fragment[n]:this.data.param.fragment},segment:function(n){return typeof n=="undefined"?this.data.seg.path:(n=n<0?this.data.seg.path.length+n:n-1,this.data.seg.path[n])},fsegment:function(n){return typeof n=="undefined"?this.data.seg.fragment:(n=n<0?this.data.seg.fragment.length+n:n-1,this.data.seg.fragment[n])}}}var e={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],s={anchor:"fragment"},h={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},i=/^[0-9]+$/;return t.jQuery=function(n){n!=null&&(n.fn.url=function(i){var r="";return this.length&&(r=n(this).attr(l(this[0]))||""),t(r,i)},n.url=t)},t.jQuery(window.jQuery),t}),function(n){typeof n.fn.each2=="undefined"&&n.extend(n.fn,{each2:function(t){for(var i=n([0]),r=-1,u=this.length;++r<u&&(i.context=i[0]=this[r])&&t.call(i[0],r,i)!==!1;);return this}})}(jQuery),function(n,t){"use strict";function nt(t){var i=n(document.createTextNode(""));t.before(i);i.before(t);i.remove()}function c(n){function t(n){return lt[n]||n}return n.replace(/[^\u0000-\u007E]/g,t)}function e(n,t){for(var i=0,r=t.length;i<r;i=i+1)if(f(n,t[i]))return i;return-1}function at(){var t=n(ct),i;return t.appendTo("body"),i={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight},t.remove(),i}function f(n,i){return n===i?!0:n===t||i===t?!1:n===null||i===null?!1:n.constructor===String?n+""==i+"":i.constructor===String?i+""==n+"":!1}function w(t,i){var u,r,f;if(t===null||t.length<1)return[];for(u=t.split(i),r=0,f=u.length;r<f;r=r+1)u[r]=n.trim(u[r]);return u}function tt(n){return n.outerWidth(!1)-n.width()}function it(i){var r="keyup-change-value";i.on("keydown",function(){n.data(i,r)===t&&n.data(i,r,i.val())});i.on("keyup",function(){var u=n.data(i,r);u!==t&&i.val()!==u&&(n.removeData(i,r),i.trigger("keyup-change"))})}function vt(i){i.on("mousemove",function(i){var r=v;(r===t||r.x!==i.pageX||r.y!==i.pageY)&&n(i.target).trigger("mousemove-filtered",i)})}function rt(n,i,r){r=r||t;var u;return function(){var t=arguments;window.clearTimeout(u);u=window.setTimeout(function(){i.apply(r,t)},n)}}function yt(n,t){var i=rt(n,function(n){t.trigger("scroll-debounced",n)});t.on("scroll",function(n){e(n.target,t.get())>=0&&i(n)})}function pt(n){n[0]!==document.activeElement&&window.setTimeout(function(){var t=n[0],r=n.val().length,i,u;n.focus();u=t.offsetWidth>0||t.offsetHeight>0;u&&t===document.activeElement&&(t.setSelectionRange?t.setSelectionRange(r,r):t.createTextRange&&(i=t.createTextRange(),i.collapse(!1),i.select()))},0)}function wt(t){var i,r,u;return t=n(t)[0],i=0,r=0,"selectionStart"in t?(i=t.selectionStart,r=t.selectionEnd-i):"selection"in document&&(t.focus(),u=document.selection.createRange(),r=document.selection.createRange().text.length,u.moveStart("character",-t.value.length),i=u.text.length-r),{offset:i,length:r}}function r(n){n.preventDefault();n.stopPropagation()}function bt(n){n.preventDefault();n.stopImmediatePropagation()}function kt(t){if(!s){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);s=n(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"});s.attr("class","select2-sizer");n("body").append(s)}return s.text(t.val()),s.width()}function a(t,i,r){var u,f=[],e;u=n.trim(t.attr("class"));u&&(u=""+u,n(u.split(/\s+/)).each2(function(){this.indexOf("select2-")===0&&f.push(this)}));u=n.trim(i.attr("class"));u&&(u=""+u,n(u.split(/\s+/)).each2(function(){this.indexOf("select2-")!==0&&(e=r(this),e&&f.push(e))}));t.attr("class",f.join(" "))}function ut(n,t,i,r){var u=c(n.toUpperCase()).indexOf(c(t.toUpperCase())),f=t.length;if(u<0){i.push(r(n));return}i.push(r(n.substring(0,u)));i.push("<span class='select2-match'>");i.push(r(n.substring(u,u+f)));i.push("<\/span>");i.push(r(n.substring(u+f,n.length)))}function ft(n){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(n).replace(/[&<>"'\/\\]/g,function(n){return t[n]})}function et(i){var f,r=null,e=i.quietMillis||100,o=i.url,u=this;return function(s){window.clearTimeout(f);f=window.setTimeout(function(){var e=i.data,f=o,c=i.transport||n.fn.select2.ajaxDefaults.transport,l={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||t,dataType:i.dataType||"json"},h=n.extend({},n.fn.select2.ajaxDefaults.params,l);e=e?e.call(u,s.term,s.page,s.context):null;f=typeof f=="function"?f.call(u,s.term,s.page,s.context):f;r&&typeof r.abort=="function"&&r.abort();i.params&&(n.isFunction(i.params)?n.extend(h,i.params.call(u)):n.extend(h,i.params));n.extend(h,{url:f,dataType:i.dataType,data:e,success:function(n){var t=i.results(n,s.page,s);s.callback(t)},error:function(n,t,i){var r={hasError:!0,jqXHR:n,textStatus:t,errorThrown:i};s.callback(r)}});r=c.call(u,h)},e)}}function ot(t){var i=t,e,u,r=function(n){return""+n.text},f;return n.isArray(i)&&(u=i,i={results:u}),n.isFunction(i)===!1&&(u=i,i=function(){return u}),f=i(),f.text&&(r=f.text,n.isFunction(r)||(e=f.text,r=function(n){return n[e]})),function(t){var u=t.term,e={results:[]},f;if(u===""){t.callback(i());return}f=function(i,e){var o,s;if(i=i[0],i.children){o={};for(s in i)i.hasOwnProperty(s)&&(o[s]=i[s]);o.children=[];n(i.children).each2(function(n,t){f(t,o.children)});(o.children.length||t.matcher(u,r(o),i))&&e.push(o)}else t.matcher(u,r(i),i)&&e.push(i)};n(i().results).each2(function(n,t){f(t,e.results)});t.callback(e)}}function st(i){var r=n.isFunction(i);return function(u){var f=u.term,e={results:[]},o=r?i(u):i;n.isArray(o)&&(n(o).each(function(){var n=this.text!==t,i=n?this.text:this;(f===""||u.matcher(f,i))&&e.results.push(n?this:{id:this,text:this})}),u.callback(e))}}function o(t,i){if(n.isFunction(t))return!0;if(!t)return!1;if(typeof t=="string")return!0;throw new Error(i+" must be a string, function, or falsy value");}function u(t,i){if(n.isFunction(t)){var r=Array.prototype.slice.call(arguments,2);return t.apply(i,r)}return t}function ht(t){var i=0;return n.each(t,function(n,t){t.children?i+=ht(t.children):i++}),i}function dt(n,i,r,u){var a=n,c=!1,e,s,o,h,l;if(!u.createSearchChoice||!u.tokenSeparators||u.tokenSeparators.length<1)return t;for(;;){for(s=-1,o=0,h=u.tokenSeparators.length;o<h;o++)if(l=u.tokenSeparators[o],s=n.indexOf(l),s>=0)break;if(s<0)break;if(e=n.substring(0,s),n=n.substring(s+l.length),e.length>0&&(e=u.createSearchChoice.call(this,e,i),e!==t&&e!==null&&u.id(e)!==t&&u.id(e)!==null)){for(c=!1,o=0,h=i.length;o<h;o++)if(f(u.id(e),u.id(i[o]))){c=!0;break}c||r(e)}}if(a!==n)return n}function b(){var t=this;n.each(arguments,function(n,i){t[i].remove();t[i]=null})}function k(t,i){var r=function(){};return r.prototype=new t,r.prototype.constructor=r,r.prototype.parent=t.prototype,r.prototype=n.extend(r.prototype,i),r}if(window.Select2===t){var l,d,g,h,s,v={x:0,y:0},y,p,i={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(n){n=n.which?n.which:n;switch(n){case i.LEFT:case i.RIGHT:case i.UP:case i.DOWN:return!0}return!1},isControl:function(n){var t=n.which;switch(t){case i.SHIFT:case i.CTRL:case i.ALT:return!0}return n.metaKey?!0:!1},isFunctionKey:function(n){return n=n.which?n.which:n,n>=112&&n<=123}},ct="<div class='select2-measure-scrollbar'><\/div>",lt={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};y=n(document);h=function(){var n=1;return function(){return n++}}();l=k(Object,{bind:function(n){var t=this;return function(){n.apply(t,arguments)}},init:function(i){var f,e,o=".select2-results",s,c;this.opts=i=this.prepareOpts(i);this.id=i.id;i.element.data("select2")!==t&&i.element.data("select2")!==null&&i.element.data("select2").destroy();this.container=this.createContainer();this.liveRegion=n("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body);this.containerId="s2id_"+(i.element.attr("id")||"autogen"+h());this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);this.container.attr("title",i.element.attr("title"));this.body=n("body");a(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.attr("style",i.element.attr("style"));this.container.css(u(i.containerCss,this.opts.element));this.container.addClass(u(i.containerCssClass,this.opts.element));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",r);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");a(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(u(i.dropdownCssClass,this.opts.element));this.dropdown.data("select2",this);this.dropdown.on("click",r);this.results=f=this.container.find(o);this.search=e=this.container.find("input.select2-input");this.queryCount=0;this.resultsPage=0;this.context=null;this.initContainer();this.container.on("click",r);vt(this.results);this.dropdown.on("mousemove-filtered",o,this.bind(this.highlightUnderEvent));this.dropdown.on("touchstart touchmove touchend",o,this.bind(function(n){this._touchEvent=!0;this.highlightUnderEvent(n)}));this.dropdown.on("touchmove",o,this.bind(this.touchMoved));this.dropdown.on("touchstart touchend",o,this.bind(this.clearTouchMoved));this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())}));yt(80,this.results);this.dropdown.on("scroll-debounced",o,this.bind(this.loadMoreIfNeeded));n(this.container).on("change",".select2-input",function(n){n.stopPropagation()});n(this.dropdown).on("change",".select2-input",function(n){n.stopPropagation()});n.fn.mousewheel&&f.mousewheel(function(n,t,i,u){var e=f.scrollTop();u>0&&e-u<=0?(f.scrollTop(0),r(n)):u<0&&f.get(0).scrollHeight-f.scrollTop()+u<=f.height()&&(f.scrollTop(f.get(0).scrollHeight-f.height()),r(n))});it(e);e.on("keyup-change input paste",this.bind(this.updateResults));e.on("focus",function(){e.addClass("select2-focused")});e.on("blur",function(){e.removeClass("select2-focused")});this.dropdown.on("mouseup",o,this.bind(function(t){n(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))}));this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(n){n.stopPropagation()});this.nextSearchTerm=t;n.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource());i.maximumInputLength!==null&&this.search.attr("maxlength",i.maximumInputLength);s=i.element.prop("disabled");s===t&&(s=!1);this.enable(!s);c=i.element.prop("readonly");c===t&&(c=!1);this.readonly(c);p=p||at();this.autofocus=i.element.prop("autofocus");i.element.prop("autofocus",!1);this.autofocus&&this.focus();this.search.attr("placeholder",i.searchInputPlaceholder)},destroy:function(){var n=this.opts.element,i=n.data("select2"),r=this;this.close();n.length&&n[0].detachEvent&&n.each(function(){this.detachEvent("onpropertychange",r._sync)});this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null);this._sync=null;i!==t&&(i.container.remove(),i.liveRegion.remove(),i.dropdown.remove(),n.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?n.attr({tabindex:this.elementTabIndex}):n.removeAttr("tabindex"),n.show());b.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(n){return n.is("option")?{id:n.prop("value"),text:n.text(),element:n.get(),css:n.attr("class"),disabled:n.prop("disabled"),locked:f(n.attr("locked"),"locked")||f(n.data("locked"),!0)}:n.is("optgroup")?{text:n.attr("label"),children:[],element:n.get(),css:n.attr("class")}:void 0},prepareOpts:function(i){var e,o,s,r,u=this;if(e=i.element,e.get(0).tagName.toLowerCase()==="select"&&(this.select=o=i.element),o&&n.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");}),i=n.extend({},{populateResults:function(r,f,e){var o,s=this.opts.id,c=this.liveRegion;o=function(r,f,l){var p,nt,v,tt,b,k,a,y,w,d,g;for(r=i.sortResults(r,f,e),g=[],p=0,nt=r.length;p<nt;p=p+1)v=r[p],b=v.disabled===!0,tt=!b&&s(v)!==t,k=v.children&&v.children.length>0,a=n("<li><\/li>"),a.addClass("select2-results-dept-"+l),a.addClass("select2-result"),a.addClass(tt?"select2-result-selectable":"select2-result-unselectable"),b&&a.addClass("select2-disabled"),k&&a.addClass("select2-result-with-children"),a.addClass(u.opts.formatResultCssClass(v)),a.attr("role","presentation"),y=n(document.createElement("div")),y.addClass("select2-result-label"),y.attr("id","select2-result-label-"+h()),y.attr("role","option"),d=i.formatResult(v,y,e,u.opts.escapeMarkup),d!==t&&(y.html(d),a.append(y)),k&&(w=n("<ul><\/ul>"),w.addClass("select2-result-sub"),o(v.children,w,l+1),a.append(w)),a.data("select2-data",v),g.push(a[0]);f.append(g);c.text(i.formatMatches(r.length))};o(f,r,0)}},n.fn.select2.defaults,i),typeof i.id!="function"&&(s=i.id,i.id=function(n){return n[s]}),n.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(o?(i.query=this.bind(function(n){var o={results:[],more:!1},s=n.term,i,r,f;f=function(t,i){var r;t.is("option")?n.matcher(s,t.text(),t)&&i.push(u.optionToData(t)):t.is("optgroup")&&(r=u.optionToData(t),t.children().each2(function(n,t){f(t,r.children)}),r.children.length>0&&i.push(r))};i=e.children();this.getPlaceholder()!==t&&i.length>0&&(r=this.getPlaceholderOption(),r&&(i=i.not(r)));i.each2(function(n,t){f(t,o.results)});n.callback(o)}),i.id=function(n){return n.id}):"query"in i||("ajax"in i?(r=i.element.data("ajax-url"),r&&r.length>0&&(i.ajax.url=r),i.query=et.call(i.element,i.ajax)):"data"in i?i.query=ot(i.data):"tags"in i&&(i.query=st(i.tags),i.createSearchChoice===t&&(i.createSearchChoice=function(t){return{id:n.trim(t),text:n.trim(t)}}),i.initSelection===t&&(i.initSelection=function(t,r){var u=[];n(w(t.val(),i.separator)).each(function(){var r={id:this,text:this},t=i.tags;n.isFunction(t)&&(t=t());n(t).each(function(){if(f(this.id,r.id))return r=this,!1});u.push(r)});r(u)}))),typeof i.query!="function")throw"query function not defined for Select2 "+i.element.attr("id");if(i.createSearchChoicePosition==="top")i.createSearchChoicePosition=function(n,t){n.unshift(t)};else if(i.createSearchChoicePosition==="bottom")i.createSearchChoicePosition=function(n,t){n.push(t)};else if(typeof i.createSearchChoicePosition!="function")throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return i},monitorSource:function(){var i=this.opts.element,r,f=this;i.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()}));this._sync=this.bind(function(){var r=i.prop("disabled"),n;r===t&&(r=!1);this.enable(!r);n=i.prop("readonly");n===t&&(n=!1);this.readonly(n);a(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(u(this.opts.containerCssClass,this.opts.element));a(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(u(this.opts.dropdownCssClass,this.opts.element))});i.length&&i[0].attachEvent&&i.each(function(){this.attachEvent("onpropertychange",f._sync)});r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;r!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new r(function(t){n.each(t,f._sync)}),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var i=n.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(t){t=t||{};t=n.extend({},t,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(t);this.opts.element.data("select2-change-triggered",!1);this.opts.element.click();this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var n=this._enabled&&!this._readonly,t=!n;return n===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=n,!0)},enable:function(n){(n===t&&(n=!0),this._enabled!==n)&&(this._enabled=n,this.opts.element.prop("disabled",!n),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(n){(n===t&&(n=!1),this._readonly!==n)&&(this._readonly=n,this.opts.element.prop("readonly",n),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var t=this.dropdown,r=this.container.offset(),v=this.container.outerHeight(!1),s=this.container.outerWidth(!1),h=t.outerHeight(!1),e=n(window),d=e.width(),g=e.height(),l=e.scrollLeft()+d,nt=e.scrollTop()+g,a=r.top+v,o=r.left,tt=a+h<=nt,it=r.top-h>=e.scrollTop(),i=t.outerWidth(!1),y=o+i<=l,rt=t.hasClass("select2-drop-above"),w,c,b,f,k;rt?(c=!0,!it&&tt&&(b=!0,c=!1)):(c=!1,!tt&&it&&(b=!0,c=!0));b&&(t.hide(),r=this.container.offset(),v=this.container.outerHeight(!1),s=this.container.outerWidth(!1),h=t.outerHeight(!1),l=e.scrollLeft()+d,nt=e.scrollTop()+g,a=r.top+v,o=r.left,i=t.outerWidth(!1),y=o+i<=l,t.show(),this.focusSearch());this.opts.dropdownAutoWidth?(k=n(".select2-results",t)[0],t.addClass("select2-drop-auto-width"),t.css("width",""),i=t.outerWidth(!1)+(k.scrollHeight===k.clientHeight?0:p.width),i>s?s=i:i=s,h=t.outerHeight(!1),y=o+i<=l):this.container.removeClass("select2-drop-auto-width");this.body.css("position")!=="static"&&(w=this.body.offset(),a-=w.top,o-=w.left);y||(o=r.left+this.container.outerWidth(!1)-i);f={left:o,width:s};c?(f.top=r.top-h,f.bottom="auto",this.container.addClass("select2-drop-above"),t.addClass("select2-drop-above")):(f.top=a,f.bottom="auto",this.container.removeClass("select2-drop-above"),t.removeClass("select2-drop-above"));f=n.extend(f,u(this.opts.dropdownCss,this.opts.element));t.css(f)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=n.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return!1;this.opening();y.on("mousemove.select2Event",function(n){v.x=n.pageX;v.y=n.pageY});return!0},opening:function(){var i=this.containerEventName,u="scroll."+i,f="resize."+i,e="orientationchange."+i,t,r;if(this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),t=n("#select2-drop-mask"),t.length==0){t=n(document.createElement("div"));t.attr("id","select2-drop-mask").attr("class","select2-drop-mask");t.hide();t.appendTo(this.body);t.on("mousedown touchstart click",function(i){nt(t);var u=n("#select2-drop"),r;u.length>0&&(r=u.data("select2"),r.opts.selectOnBlur&&r.selectHighlighted({noFocus:!0}),r.close(),i.preventDefault(),i.stopPropagation())})}this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t);n("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");t.show();this.positionDropdown();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");r=this;this.container.parents().add(window).each(function(){n(this).on(f+" "+u+" "+e,function(){r.opened()&&r.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerEventName,i="scroll."+t,r="resize."+t,u="orientationchange."+t;this.container.parents().add(window).each(function(){n(this).off(i).off(r).off(u)});this.clearDropdownAlignmentPreference();n("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();y.off("mousemove.select2Event");this.clearSearch();this.search.removeClass("select2-active");this.opts.element.trigger(n.Event("select2-close"))}},externalSearch:function(n){this.open();this.search.val(n);this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return u(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t=this.results,e,i,r,u,o,s,f,h;if(i=this.highlight(),!(i<0)){if(i==0){t.scrollTop(0);return}e=this.findHighlightableChoices().find(".select2-result-label");r=n(e[i]);h=(r.offset()||{}).top||0;u=h+r.outerHeight(!0);i===e.length-1&&(f=t.find("li.select2-more-results"),f.length>0&&(u=f.offset().top+f.outerHeight(!0)));o=t.offset().top+t.outerHeight(!0);u>o&&t.scrollTop(t.scrollTop()+(u-o));s=h-t.offset().top;s<0&&r.css("display")!="none"&&t.scrollTop(t.scrollTop()+s)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var u=this.findHighlightableChoices(),i=this.highlight(),r;i>-1&&i<u.length;)if(i+=t,r=n(u[i]),r.hasClass("select2-result-selectable")&&!r.hasClass("select2-disabled")&&!r.hasClass("select2-selected")){this.highlight(i);break}},highlight:function(t){var i=this.findHighlightableChoices(),r,u;if(arguments.length===0)return e(i.filter(".select2-highlighted")[0],i.get());t>=i.length&&(t=i.length-1);t<0&&(t=0);this.removeHighlight();r=n(i[t]);r.addClass("select2-highlighted");this.search.attr("aria-activedescendant",r.find(".select2-result-label").attr("id"));this.ensureHighlightVisible();this.liveRegion.text(r.text());u=r.data("select2-data");u&&this.opts.element.trigger({type:"select2-highlight",val:this.id(u),choice:u})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var i=n(t.target).closest(".select2-result-selectable"),r;i.length>0&&!i.is(".select2-highlighted")?(r=this.findHighlightableChoices(),this.highlight(r.index(i))):i.length==0&&this.removeHighlight()},loadMoreIfNeeded:function(){var t=this.results,i=t.find("li.select2-more-results"),f,r=this.resultsPage+1,n=this,e=this.search.val(),o=this.context;i.length!==0&&(f=i.offset().top-t.offset().top-t.height(),f<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:e,page:r,context:o,matcher:this.opts.matcher,callback:this.bind(function(f){n.opened()&&(n.opts.populateResults.call(this,t,f.results,{term:e,page:r,context:o}),n.postprocessResults(f,!1,!1),f.more===!0?(i.detach().appendTo(t).text(u(n.opts.formatLoadMore,n.opts.element,r+1)),window.setTimeout(function(){n.loadMoreIfNeeded()},10)):i.remove(),n.positionDropdown(),n.resultsPage=r,n.context=f.context,this.opts.element.trigger({type:"select2-loaded",items:f}))})})))},tokenize:function(){},updateResults:function(i){function b(){e.removeClass("select2-active");s.positionDropdown();c.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?s.liveRegion.text(c.text()):s.liveRegion.text(s.opts.formatMatches(c.find(".select2-result-selectable").length))}function h(n){c.html(n);b()}var e=this.search,c=this.results,r=this.opts,v,s=this,l,y=e.val(),p=n.data(this.container,"select2-last-term"),w,a;if((i===!0||!p||!f(y,p))&&(n.data(this.container,"select2-last-term",y),i===!0||this.showSearchInput!==!1&&this.opened())){if(w=++this.queryCount,a=this.getMaximumSelectionSize(),a>=1&&(v=this.data(),n.isArray(v)&&v.length>=a&&o(r.formatSelectionTooBig,"formatSelectionTooBig"))){h("<li class='select2-selection-limit'>"+u(r.formatSelectionTooBig,r.element,a)+"<\/li>");return}if(e.val().length<r.minimumInputLength){o(r.formatInputTooShort,"formatInputTooShort")?h("<li class='select2-no-results'>"+u(r.formatInputTooShort,r.element,e.val(),r.minimumInputLength)+"<\/li>"):h("");i&&this.showSearch&&this.showSearch(!0);return}if(r.maximumInputLength&&e.val().length>r.maximumInputLength){o(r.formatInputTooLong,"formatInputTooLong")?h("<li class='select2-no-results'>"+u(r.formatInputTooLong,r.element,e.val(),r.maximumInputLength)+"<\/li>"):h("");return}r.formatSearching&&this.findHighlightableChoices().length===0&&h("<li class='select2-searching'>"+u(r.formatSearching,r.element)+"<\/li>");e.addClass("select2-active");this.removeHighlight();l=this.tokenize();l!=t&&l!=null&&e.val(l);this.resultsPage=1;r.query({element:r.element,term:e.val(),page:this.resultsPage,context:null,matcher:r.matcher,callback:this.bind(function(l){var a;if(w==this.queryCount){if(!this.opened()){this.search.removeClass("select2-active");return}if(l.hasError!==t&&o(r.formatAjaxError,"formatAjaxError")){h("<li class='select2-ajax-error'>"+u(r.formatAjaxError,r.element,l.jqXHR,l.textStatus,l.errorThrown)+"<\/li>");return}if(this.context=l.context===t?null:l.context,this.opts.createSearchChoice&&e.val()!==""&&(a=this.opts.createSearchChoice.call(s,e.val(),l.results),a!==t&&a!==null&&s.id(a)!==t&&s.id(a)!==null&&n(l.results).filter(function(){return f(s.id(this),s.id(a))}).length===0&&this.opts.createSearchChoicePosition(l.results,a)),l.results.length===0&&o(r.formatNoMatches,"formatNoMatches")){h("<li class='select2-no-results'>"+u(r.formatNoMatches,r.element,e.val())+"<\/li>");return}c.empty();s.opts.populateResults.call(this,c,l.results,{term:e.val(),page:this.resultsPage,context:null});l.more===!0&&o(r.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+r.escapeMarkup(u(r.formatLoadMore,r.element,this.resultsPage))+"<\/li>"),window.setTimeout(function(){s.loadMoreIfNeeded()},10));this.postprocessResults(l,i);b();this.opts.element.trigger({type:"select2-loaded",items:l})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0});this.close();this.container.removeClass("select2-container-active");this.search[0]===document.activeElement&&this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){pt(this.search)},selectHighlighted:function(n){if(this._touchMoved){this.clearTouchMoved();return}var i=this.highlight(),r=this.results.find(".select2-highlighted"),t=r.closest(".select2-result").data("select2-data");if(t){this.highlight(i);this.onSelect(t,n)}else n&&n.noFocus&&this.close()},getPlaceholder:function(){var n;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((n=this.getPlaceholderOption())!==t?n.text():t)},getPlaceholderOption:function(){if(this.select){var i=this.select.children("option").first();if(this.opts.placeholderOption!==t)return this.opts.placeholderOption==="first"&&i||typeof this.opts.placeholderOption=="function"&&this.opts.placeholderOption(this.select);if(n.trim(i.text())===""&&i.val()==="")return i}},initContainerWidth:function(){function r(){var i,f,u,r,e,o;if(this.opts.width==="off")return null;if(this.opts.width==="element")return this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px";if(this.opts.width==="copy"||this.opts.width==="resolve"){if(i=this.opts.element.attr("style"),i!==t)for(f=i.split(";"),r=0,e=f.length;r<e;r=r+1)if(o=f[r].replace(/\s/g,""),u=o.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),u!==null&&u.length>=1)return u[1];return this.opts.width==="resolve"?(i=this.opts.element.css("width"),i.indexOf("%")>0)?i:this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px":null}return n.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=r.call(this);i!==null&&this.container.css("width",i)}});d=k(l,{createContainer:function(){return n(document.createElement("div")).attr({"class":"select2-container"}).html("<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>   <span class='select2-chosen'>&#160;<\/span><abbr class='select2-search-choice-close'><\/abbr>   <span class='select2-arrow' role='presentation'><b role='presentation'><\/b><\/span><\/a><label for='' class='select2-offscreen'><\/label><input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' /><div class='select2-drop select2-display-none'>   <div class='select2-search'>       <label for='' class='select2-offscreen'><\/label>       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'       aria-autocomplete='list' />   <\/div>   <ul class='select2-results' role='listbox'>   <\/ul><\/div>")},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var i,r,u;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0);this.parent.opening.apply(this,arguments);this.showSearchInput!==!1&&this.search.val(this.focusser.val());this.opts.shouldFocusInput(this)&&(this.search.focus(),i=this.search.get(0),i.createTextRange?(r=i.createTextRange(),r.collapse(!1),r.select()):i.setSelectionRange&&(u=this.search.val().length,i.setSelectionRange(u,u)));this.search.val()===""&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select());this.focusser.prop("disabled",!0).val("");this.updateResults(!0);this.opts.element.trigger(n.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.prop("disabled",!1);this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){n("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments);b.call(this,"selection","focusser")},initContainer:function(){var t,e=this.container,s=this.dropdown,u=h(),f,o;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0);this.selection=t=e.find(".select2-choice");this.focusser=e.find(".select2-focusser");t.find(".select2-chosen").attr("id","select2-chosen-"+u);this.focusser.attr("aria-labelledby","select2-chosen-"+u);this.results.attr("id","select2-results-"+u);this.search.attr("aria-owns","select2-results-"+u);this.focusser.attr("id","s2id_autogen"+u);f=n("label[for='"+this.opts.element.attr("id")+"']");this.focusser.prev().text(f.text()).attr("for",this.focusser.attr("id"));o=this.opts.element.attr("title");this.opts.element.attr("title",o||f.text());this.focusser.attr("tabindex",this.elementTabIndex);this.search.attr("id",this.focusser.attr("id")+"_search");this.search.prev().text(n("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.search.on("keydown",this.bind(function(n){if(this.isInterfaceEnabled()&&229!=n.keyCode){if(n.which===i.PAGE_UP||n.which===i.PAGE_DOWN){r(n);return}switch(n.which){case i.UP:case i.DOWN:this.moveHighlight(n.which===i.UP?-1:1);r(n);return;case i.ENTER:this.selectHighlighted();r(n);return;case i.TAB:this.selectHighlighted({noFocus:!0});return;case i.ESC:this.cancel(n);r(n);return}}}));this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)}));this.focusser.on("keydown",this.bind(function(n){if(this.isInterfaceEnabled()&&n.which!==i.TAB&&!i.isControl(n)&&!i.isFunctionKey(n)&&n.which!==i.ESC){if(this.opts.openOnEnter===!1&&n.which===i.ENTER){r(n);return}if(n.which==i.DOWN||n.which==i.UP||n.which==i.ENTER&&this.opts.openOnEnter){if(n.altKey||n.ctrlKey||n.shiftKey||n.metaKey)return;this.open();r(n);return}if(n.which==i.DELETE||n.which==i.BACKSPACE){this.opts.allowClear&&this.clear();r(n);return}}}));it(this.focusser);this.focusser.on("keyup-change input",this.bind(function(n){if(this.opts.minimumResultsForSearch>=0){if(n.stopPropagation(),this.opened())return;this.open()}}));t.on("mousedown touchstart","abbr",this.bind(function(n){this.isInterfaceEnabled()&&(this.clear(),bt(n),this.close(),this.selection.focus())}));t.on("mousedown touchstart",this.bind(function(i){nt(t);this.container.hasClass("select2-container-active")||this.opts.element.trigger(n.Event("select2-focus"));this.opened()?this.close():this.isInterfaceEnabled()&&this.open();r(i)}));s.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()}));t.on("focus",this.bind(function(n){r(n)}));this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(n.Event("select2-focus"));this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(n.Event("select2-blur")))}));this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(n.Event("select2-focus"));this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.setPlaceholder()},clear:function(t){var i=this.selection.data("select2-data"),r,u;if(i){if(r=n.Event("select2-clearing"),this.opts.element.trigger(r),r.isDefaultPrevented())return;u=this.getPlaceholderOption();this.opts.element.val(u?u.val():"");this.selection.find(".select2-chosen").empty();this.selection.removeData("select2-data");this.setPlaceholder();t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},initSelection:function(){var n;this.isPlaceholderOptionSelected()?(this.updateSelection(null),this.close(),this.setPlaceholder()):(n=this,this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&i!==null&&(n.updateSelection(i),n.close(),n.setPlaceholder(),n.nextSearchTerm=n.opts.nextSearchTerm(i,n.search.val()))}))},isPlaceholderOptionSelected:function(){var n;return this.getPlaceholder()===t?!1:(n=this.getPlaceholderOption())!==t&&n.prop("selected")||this.opts.element.val()===""||this.opts.element.val()===t||this.opts.element.val()===null},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return t.element.get(0).tagName.toLowerCase()==="select"?t.initSelection=function(n,t){var r=n.find("option").filter(function(){return this.selected&&!this.disabled});t(i.optionToData(r))}:"data"in t&&(t.initSelection=t.initSelection||function(i,r){var e=i.val(),u=null;t.query({matcher:function(n,i,r){var o=f(e,t.id(r));return o&&(u=r),o},callback:n.isFunction(r)?function(){r(u)}:n.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var n=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&n!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(n));this.selection.addClass("select2-default");this.container.removeClass("select2-allowclear")}},postprocessResults:function(n,t,i){var r=0,e=this,u;this.findHighlightableChoices().each2(function(n,t){if(f(e.id(t.data("select2-data")),e.opts.element.val()))return r=n,!1});i!==!1&&(t===!0&&r>=0?this.highlight(r):this.highlight(0));t===!0&&(u=this.opts.minimumResultsForSearch,u>=0&&this.showSearch(ht(n.results)>=u))},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),n(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(n,t){if(this.triggerSelect(n)){var i=this.opts.element.val(),r=this.data();this.opts.element.val(this.id(n));this.updateSelection(n);this.opts.element.trigger({type:"select2-selected",val:this.id(n),choice:n});this.nextSearchTerm=this.opts.nextSearchTerm(n,this.search.val());this.close();t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus();f(i,this.id(n))||this.triggerChange({added:n,removed:r})}},updateSelection:function(n){var i=this.selection.find(".select2-chosen"),r,u;this.selection.data("select2-data",n);i.empty();n!==null&&(r=this.opts.formatSelection(n,i,this.opts.escapeMarkup));r!==t&&i.append(r);u=this.opts.formatSelectionCssClass(n,i);u!==t&&i.addClass(u);this.selection.removeClass("select2-default");this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var i,r=!1,u=null,n=this,f=this.data();if(arguments.length===0)return this.opts.element.val();if(i=arguments[0],arguments.length>1&&(r=arguments[1]),this.select)this.select.val(i).find("option").filter(function(){return this.selected}).each2(function(t,i){return u=n.optionToData(i),!1}),this.updateSelection(u),this.setPlaceholder(),r&&this.triggerChange({added:u,removed:f});else{if(!i&&i!==0){this.clear(r);return}if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(i);this.opts.initSelection(this.opts.element,function(t){n.opts.element.val(t?n.id(t):"");n.updateSelection(t);n.setPlaceholder();r&&n.triggerChange({added:t,removed:f})})}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(n){var i,r=!1;if(arguments.length===0)return i=this.selection.data("select2-data"),i==t&&(i=null),i;arguments.length>1&&(r=arguments[1]);n?(i=this.data(),this.opts.element.val(n?this.id(n):""),this.updateSelection(n),r&&this.triggerChange({added:n,removed:i})):this.clear(r)}});g=k(l,{createContainer:function(){return n(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html("<ul class='select2-choices'>  <li class='select2-search-field'>    <label for='' class='select2-offscreen'><\/label>    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>  <\/li><\/ul><div class='select2-drop select2-drop-multi select2-display-none'>   <ul class='select2-results'>   <\/ul><\/div>")},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return t.element.get(0).tagName.toLowerCase()==="select"?t.initSelection=function(n,t){var r=[];n.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(n,t){r.push(i.optionToData(t))});t(r)}:"data"in t&&(t.initSelection=t.initSelection||function(i,r){var e=w(i.val(),t.separator),u=[];t.query({matcher:function(i,r,o){var s=n.grep(e,function(n){return f(n,t.id(o))}).length;return s&&u.push(o),s},callback:n.isFunction(r)?function(){for(var s=[],h,n,o,i=0;i<e.length;i++)for(h=e[i],n=0;n<u.length;n++)if(o=u[n],f(h,t.id(o))){s.push(o);u.splice(n,1);break}r(s)}:n.noop})}),t},selectChoice:function(n){var t=this.container.find(".select2-search-choice-focus");t.length&&n&&n[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),n&&n.length&&(this.close(),n.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",n)))},destroy:function(){n("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments);b.call(this,"searchContainer","selection")},initContainer:function(){var t=".select2-choices",u,f;this.searchContainer=this.container.find(".select2-search-field");this.selection=u=this.container.find(t);f=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){f.search[0].focus();f.selectChoice(n(this))});this.search.attr("id","s2id_autogen"+h());this.search.prev().text(n("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&this.search.val().length==0||this.isInterfaceEnabled()&&(this.opened()||this.open())}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(n){var t;if(this.isInterfaceEnabled()){++this.keydowns;var f=u.find(".select2-search-choice-focus"),o=f.prev(".select2-search-choice:not(.select2-locked)"),e=f.next(".select2-search-choice:not(.select2-locked)"),s=wt(this.search);if(f.length&&(n.which==i.LEFT||n.which==i.RIGHT||n.which==i.BACKSPACE||n.which==i.DELETE||n.which==i.ENTER)){t=f;n.which==i.LEFT&&o.length?t=o:n.which==i.RIGHT?t=e.length?e:null:n.which===i.BACKSPACE?this.unselect(f.first())&&(this.search.width(10),t=o.length?o:e):n.which==i.DELETE?this.unselect(f.first())&&(this.search.width(10),t=e.length?e:null):n.which==i.ENTER&&(t=null);this.selectChoice(t);r(n);t&&t.length||this.open();return}if((n.which!==i.BACKSPACE||this.keydowns!=1)&&n.which!=i.LEFT||s.offset!=0||s.length)this.selectChoice(null);else{this.selectChoice(u.find(".select2-search-choice:not(.select2-locked)").last());r(n);return}if(this.opened())switch(n.which){case i.UP:case i.DOWN:this.moveHighlight(n.which===i.UP?-1:1);r(n);return;case i.ENTER:this.selectHighlighted();r(n);return;case i.TAB:this.selectHighlighted({noFocus:!0});this.close();return;case i.ESC:this.cancel(n);r(n);return}if(n.which!==i.TAB&&!i.isControl(n)&&!i.isFunctionKey(n)&&n.which!==i.BACKSPACE&&n.which!==i.ESC){if(n.which===i.ENTER){if(this.opts.openOnEnter===!1)return;if(n.altKey||n.ctrlKey||n.shiftKey||n.metaKey)return}this.open();(n.which===i.PAGE_UP||n.which===i.PAGE_DOWN)&&r(n);n.which===i.ENTER&&r(n)}}}));this.search.on("keyup",this.bind(function(){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.selectChoice(null);this.opened()||this.clearSearch();t.stopImmediatePropagation();this.opts.element.trigger(n.Event("select2-blur"))}));this.container.on("click",t,this.bind(function(t){this.isInterfaceEnabled()&&(n(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(n.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))}));this.container.on("focus",t,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(n.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){var n;this.opts.element.val()===""&&this.opts.element.text()===""&&(this.updateSelection([]),this.close(),this.clearSearch());(this.select||this.opts.element.val()!=="")&&(n=this,this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&i!==null&&(n.updateSelection(i),n.close(),n.clearSearch())}))},clearSearch:function(){var n=this.getPlaceholder(),i=this.getMaxSearchWidth();n!==t&&this.getVal().length===0&&this.search.hasClass("select2-focused")===!1?(this.search.val(n).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();this.search.val()===""&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select());this.updateResults(!0);this.opts.shouldFocusInput(this)&&this.search.focus();this.opts.element.trigger(n.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var r=[],u=[],i=this;n(t).each(function(){e(i.id(this),r)<0&&(r.push(i.id(this)),u.push(this))});t=u;this.selection.find(".select2-search-choice").remove();n(t).each(function(){i.addSelectedChoice(this)});i.postprocessResults()},tokenize:function(){var n=this.search.val();n=this.opts.tokenizer.call(this,n,this.data(),this.bind(this.onSelect),this.opts);n!=null&&n!=t&&(this.search.val(n),n.length>0&&this.open())},onSelect:function(n,i){this.triggerSelect(n)&&n.text!==""&&(this.addSelectedChoice(n),this.opts.element.trigger({type:"selected",val:this.id(n),choice:n}),this.nextSearchTerm=this.opts.nextSearchTerm(n,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(n,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:n}),i&&i.noFocus||this.focusSearch())},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(i){var o=!i.locked,h=n("<li class='select2-search-choice'>    <div><\/div>    <a href='#' class='select2-search-choice-close' tabindex='-1'><\/a><\/li>"),c=n("<li class='select2-search-choice select2-locked'><div><\/div><\/li>"),u=o?h:c,l=this.id(i),s=this.getVal(),f,e;if(f=this.opts.formatSelection(i,u.find("div"),this.opts.escapeMarkup),f!=t&&u.find("div").replaceWith("<div>"+f+"<\/div>"),e=this.opts.formatSelectionCssClass(i,u.find("div")),e!=t&&u.addClass(e),o)u.find(".select2-search-choice-close").on("mousedown",r).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(this.unselect(n(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),r(t),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}));u.data("select2-data",i);u.insertBefore(this.searchContainer);s.push(l);this.setVal(s)},unselect:function(t){var u=this.getVal(),i,f,r;if(t=t.closest(".select2-search-choice"),t.length===0)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(i=t.data("select2-data"),i){if(r=n.Event("select2-removing"),r.val=this.id(i),r.choice=i,this.opts.element.trigger(r),r.isDefaultPrevented())return!1;while((f=e(this.id(i),u))>=0)u.splice(f,1),this.setVal(u),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}),!0}},postprocessResults:function(n,t,i){var s=this.getVal(),f=this.results.find(".select2-result"),h=this.results.find(".select2-result-with-children"),r=this;f.each2(function(n,t){var i=r.id(t.data("select2-data"));e(i,s)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))});h.each2(function(n,t){t.is(".select2-result-selectable")||t.find(".select2-result-selectable:not(.select2-selected)").length!==0||t.addClass("select2-selected")});this.highlight()==-1&&i!==!1&&r.highlight(0);!this.opts.createSearchChoice&&!f.filter(".select2-result:not(.select2-selected)").length>0&&(n&&(!n||n.more||this.results.find(".select2-no-results").length!==0)||o(r.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+u(r.opts.formatNoMatches,r.opts.element,r.search.val())+"<\/li>"))},getMaxSearchWidth:function(){return this.selection.width()-tt(this.search)},resizeSearch:function(){var i,u,t,f,n,r=tt(this.search);i=kt(this.search)+10;u=this.search.offset().left;t=this.selection.width();f=this.selection.offset().left;n=t-(u-f)-r;n<i&&(n=t-r);n<40&&(n=t-r);n<=0&&(n=i);this.search.width(Math.floor(n))},getVal:function(){var n;return this.select?(n=this.select.val(),n===null?[]:n):(n=this.opts.element.val(),w(n,this.opts.separator))},setVal:function(t){var i;this.select?this.select.val(t):(i=[],n(t).each(function(){e(this,i)<0&&i.push(this)}),this.opts.element.val(i.length===0?"":i.join(this.opts.separator)))},buildChangeDetails:function(n,t){for(var t=t.slice(0),n=n.slice(0),r,i=0;i<t.length;i++)for(r=0;r<n.length;r++)f(this.opts.id(t[i]),this.opts.id(n[r]))&&(t.splice(i,1),i>0&&i--,n.splice(r,1),r--);return{added:t,removed:n}},val:function(i,r){var f,u=this;if(arguments.length===0)return this.getVal();if(f=this.data(),f.length||(f=[]),!i&&i!==0){this.opts.element.val("");this.updateSelection([]);this.clearSearch();r&&this.triggerChange({added:this.data(),removed:f});return}if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),r&&this.triggerChange(this.buildChangeDetails(f,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var i=n.map(t,u.id);u.setVal(i);u.updateSelection(t);u.clearSearch();r&&u.triggerChange(u.buildChangeDetails(f,u.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){t.push(i.opts.id(n(this).data("select2-data")))});this.setVal(t);this.triggerChange()},data:function(t,i){var f=this,r,u;if(arguments.length===0)return this.selection.children(".select2-search-choice").map(function(){return n(this).data("select2-data")}).get();u=this.data();t||(t=[]);r=n.map(t,function(n){return f.opts.id(n)});this.setVal(r);this.updateSelection(t);this.clearSearch();i&&this.triggerChange(this.buildChangeDetails(u,this.data()))}});n.fn.select2=function(){var i=Array.prototype.slice.call(arguments,0),r,u,f,o,s,c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],l=["opened","isFocused","container","dropdown"],a=["val","data"],h={search:"externalSearch"};return this.each(function(){if(i.length===0||typeof i[0]=="object")r=i.length===0?{}:n.extend({},i[0]),r.element=n(this),r.element.get(0).tagName.toLowerCase()==="select"?s=r.element.prop("multiple"):(s=r.multiple||!1,"tags"in r&&(r.multiple=s=!0)),u=s?new window.Select2["class"].multi:new window.Select2["class"].single,u.init(r);else if(typeof i[0]=="string"){if(e(i[0],c)<0)throw"Unknown method: "+i[0];if(o=t,u=n(this).data("select2"),u===t)return;if(f=i[0],f==="container"?o=u.container:f==="dropdown"?o=u.dropdown:(h[f]&&(f=h[f]),o=u[f].apply(u,i.slice(1))),e(i[0],l)>=0||e(i[0],a)>=0&&i.length==1)return!1}else throw"Invalid arguments to select2 plugin: "+i;}),o===t?this:o};n.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(n,t,i,r){var u=[];return ut(n.text,i.term,u,r),u.join("")},formatSelection:function(n,i,r){return n?r(n.text):t},sortResults:function(n){return n},formatResultCssClass:function(n){return n.css},formatSelectionCssClass:function(){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(n){return n==t?null:n.id},matcher:function(n,t){return c(""+t).toUpperCase().indexOf(c(""+n).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:dt,escapeMarkup:ft,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(n){return n},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(n){var t="ontouchstart"in window||navigator.msMaxTouchPoints>0;return t?n.opts.minimumResultsForSearch<0?!1:!0:!0}};n.fn.select2.locales=[];n.fn.select2.locales.en={formatMatches:function(n){return n===1?"One result is available, press enter to select it.":n+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(n,t){var i=t-n.length;return"Please enter "+i+" or more character"+(i==1?"":"s")},formatInputTooLong:function(n,t){var i=n.length-t;return"Please delete "+i+" character"+(i==1?"":"s")},formatSelectionTooBig:function(n){return"You can only select "+n+" item"+(n==1?"":"s")},formatLoadMore:function(){return"Loading more results"},formatSearching:function(){return"Searching"}};n.extend(n.fn.select2.defaults,n.fn.select2.locales.en);n.fn.select2.ajaxDefaults={transport:n.ajax,params:{type:"GET",cache:!1,dataType:"json"}};window.Select2={query:{ajax:et,local:ot,tags:st},util:{debounce:rt,markMatch:ut,escapeMarkup:ft,stripDiacritics:c},"class":{abstract:l,single:d,multi:g}}}}(jQuery),function(n){n.fn.selectall=function(t){function e(t){n.error(r+": "+t)}var r="jquery.selectall",u,i={container:".container",item:".item",itemCheckbox:"input:checkbox",selected:"selected",fnHandleSelectAll:function(){},fnHandleSelectItem:function(){}},f={init:function(t){n.extend(i,t);i.container=n(i.container);u.on("change."+r,function(){var n=i.container.find(i.item),t=u.is(":checked");t?n.addClass(i.selected).find(i.itemCheckbox).attr("checked",!0):n.removeClass(i.selected).find(i.itemCheckbox).attr("checked",!1);i.fnHandleSelectAll(n,t)});n(i.container).off(r).on("change."+r,i.itemCheckbox,function(){var f=n(this),t=f.closest(i.item),e=f.is(":checked"),o,r;e?t.addClass(i.selected):t.removeClass(i.selected);o=i.container.find(i.itemCheckbox+":checked");r=o.length>0;r||u.attr("checked",!1);i.fnHandleSelectItem(t,e,r)});u.data(r,i)}};if(u=n(this),f[t])return i=u.data(r),f[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)e("Method "+t+" does not exist.");else return f.init.apply(this,arguments)}}(jQuery,window),function(n){function t(t,r){var u,f,e,o=t.nodeName.toLowerCase();return"area"===o?(u=t.parentNode,f=u.name,!t.href||!f||u.nodeName.toLowerCase()!=="map")?!1:(e=n("img[usemap=#"+f+"]")[0],!!e&&i(e)):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||r:r)&&i(t)}function i(t){return n.expr.filters.visible(t)&&!n(t).parents().addBack().filter(function(){return n.css(this,"visibility")==="hidden"}).length}n.extend(n.expr[":"],{focusable:function(i){return t(i,!isNaN(n.attr(i,"tabindex")))},tabbable:function(i){var r=n.attr(i,"tabindex"),u=isNaN(r);return(u||r>=0)&&t(i,!u)}})}(jQuery,window),function(n){n.fn.serializeObject=function(){var i,t;return i=this.serializeArray(),t={},n.each(i,function(){var n;n=this.value!=null?this.value:"";t[this.name]!=null?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(n)):t[this.name]=n}),t}}(jQuery),function(n){var i=!1,u=!1,t={isUrl:function(n){var t=RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return t.test(n)?!0:!1},loadContent:function(n,t){n.html(t)},addPrefix:function(n){var i=n.attr("id"),t=n.attr("class");"string"==typeof i&&""!==i&&n.attr("id",i.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-id-$1"));"string"==typeof t&&""!==t&&"sidr-inner"!==t&&n.attr("class",t.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-class-$1"));n.removeAttr("style")},execute:function(t,f,e){"function"==typeof f?(e=f,f="sidr"):f||(f="sidr");var s,h,c,o=n("#"+f),l=n(o.data("body")),a=n("html"),v=o.outerWidth(!0),y=o.data("speed"),p=o.data("side");if("open"!==t&&("toogle"!==t||o.is(":visible"))){if(!o.is(":visible")||i)return;i=!0;"left"===p?(s={left:0},h={left:"-"+v+"px"}):(s={right:0},h={right:"-"+v+"px"});c=a.scrollTop();a.removeAttr("style").scrollTop(c);l.animate(s,y);o.animate(h,y,function(){o.removeAttr("style");l.removeAttr("style");n("html").removeAttr("style");i=!1;u=!1;"function"==typeof e&&e(f)})}else{if(o.is(":visible")||i)return;if(u!==!1)return r.close(u,function(){r.open(f)}),void 0;i=!0;"left"===p?(s={left:v+"px"},h={left:"0px"}):(s={right:v+"px"},h={right:"0px"});c=a.scrollTop();a.css("overflow-x","hidden").scrollTop(c);l.css({width:l.width(),position:"absolute"}).animate(s,y);o.css("display","block").animate(h,y,function(){i=!1;u=f;"function"==typeof e&&e(f)})}}},r={open:function(n,i){t.execute("open",n,i)},close:function(n,i){t.execute("close",n,i)},toogle:function(n,i){t.execute("toogle",n,i)}};n.sidr=function(t){return r[t]?r[t].apply(this,Array.prototype.slice.call(arguments,1)):"function"!=typeof t&&"string"!=typeof t&&t?(n.error("Method "+t+" does not exist on jQuery.sidr"),void 0):r.toogle.apply(this,arguments)};n.fn.sidr=function(i){var u=n.extend({name:"sidr",speed:200,side:"left",source:null,renaming:!0,body:"body"},i),e=u.name,f=n("#"+e),h,o,c,s;return(0===f.length&&(f=n("<div />").attr("id",e).appendTo(n("body"))),f.addClass("sidr").addClass(u.side).data({speed:u.speed,side:u.side,body:u.body}),"function"==typeof u.source)?(h=u.source(e),t.loadContent(f,h)):"string"==typeof u.source&&t.isUrl(u.source)?n.get(u.source,function(n){t.loadContent(f,n)}):"string"==typeof u.source?(o="",c=u.source.split(","),(n.each(c,function(t,i){o+='<div class="sidr-inner">'+n(i).html()+"<\/div>"}),u.renaming)&&(s=n("<div />").html(o),s.find("*").each(function(i,r){var u=n(r);t.addPrefix(u)}),o=s.html()),t.loadContent(f,o)):null!==u.source&&n.error("Invalid Sidr Source"),this.each(function(){var t=n(this),i=t.data("sidr");i||(t.data("sidr",e),t.click(function(n){n.preventDefault();r.toogle(e)}))})}}(jQuery),function(n,t){n.fn.sticky=function(i){function c(i){return i!==undefined&&(n.isFunction(i)&&i()||typeof i=="number"&&n(t).width()<i)?!1:!0}function l(){n(t).on("resize."+u,function(){s();h()})}function s(){var n=f.outerHeight();f.parent().css("height",n)}function h(){if(c(r.disableOn)){r.container.on("scroll."+u,function(){e()});r.container.on("touchstart."+u,function(){v()});r.container.on("touchmove."+u,function(){e()});r.container.on("touchend."+u+" touchcancel."+u,function(){a()});e()}else y()}function a(){r.container.on("scroll."+u,e)}function v(){r.container.off("scroll."+u)}function e(){var u=f.outerHeight(),e=f.parent().offset().top,s=r.container.outerHeight(),o=r.container.scrollTop(),i=!1,t=null;r.location==="top"?(t="sticky-top",i=n.isWindow(r.container[0])?o>=e:!0):r.location==="bottom"&&(t="sticky-bottom",i=n.isWindow(r.container[0])?o+s<e+u:!0);i?f.addClass("sticky").addClass(t).parent().height(u):f.removeClass("sticky").removeClass(t).parent().height("auto")}function y(){r.container.off("."+u);r.parent().css({height:"auto"})}function p(t){n.error("jQuery."+u+": "+t)}var f,u="sticky",r={debug:!1,container:n(t),location:"top",disableOn:null},o={init:function(t){t.location=t.location||f.data("location");n.extend(r,t);typeof r.container=="function"?r.container=r.container(f):typeof r.container=="string"&&(r.container=n(r.container));var i=f.data(u);i||f.data(u,r);f.wrap(function(){return n("<div />")});l();s();h()},reposition:function(){e()}};if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).sticky(i)});if(f=n(this),o[i])return r=f.data(u),o[i].apply(this,Array.prototype.slice.call(arguments,1));if(typeof i!="object"&&i)p('Method "'+i+'" does not exist.');else return o.init.apply(this,arguments)}}(jQuery,window),function(n,t){n.store=function(t,i){var r=this,u;if(typeof t=="string")if(n.store.drivers[t])this.driver=n.store.drivers[t];else throw new Error("Unknown driver "+t);else if(typeof t=="object"){if(u=!n.isFunction(t.init)||!n.isFunction(t.get)||!n.isFunction(t.set)||!n.isFunction(t.del)||!n.isFunction(t.flush),u)throw new Error("The specified driver does not fulfill the API requirements");this.driver=t}else n.each(n.store.drivers,function(){return!n.isFunction(this.available)||!this.available()?!0:(r.driver=this,r.driver.init()===!1)?(r.driver=null,!0):!1});i||(i=n.store.serializers);this.serializers={};n.each(i,function(t){if(!n.isFunction(this.init))return!0;r.serializers[t]=this;r.serializers[t].init(r.encoders,r.decoders)})};n.extend(n.store.prototype,{get:function(n){var t=this.driver.get(n);return this.driver.encodes?t:this.unserialize(t)},set:function(n,t){this.driver.set(n,this.driver.encodes?t:this.serialize(t))},del:function(n){this.driver.del(n)},flush:function(){this.driver.flush()},driver:t,encoders:[],decoders:[],serialize:function(t){var i=this;return n.each(this.encoders,function(){var n=i.serializers[this+""];if(!n||!n.encode)return!0;try{t=n.encode(t)}catch(r){}}),t},unserialize:function(t){var i=this;return t?(n.each(this.decoders,function(){var n=i.serializers[this+""];if(!n||!n.decode)return!0;t=n.decode(t)}),t):t}});n.store.drivers={localStorage:{ident:"$.store.drivers.localStorage",scope:"browser",available:function(){try{return!window.localStorage?!1:(window.localStorage.setItem("jQuery Store Availability test",!0),window.localStorage.removeItem("jQuery Store Availability test"),!0)}catch(n){return!1}},init:n.noop,get:function(n){return window.localStorage.getItem(n)},set:function(n,t){window.localStorage.setItem(n,t)},del:function(n){window.localStorage.removeItem(n)},flush:function(){window.localStorage.clear()}},userData:{ident:"$.store.drivers.userData",element:null,nodeName:"userdatadriver",scope:"browser",initialized:!1,available:function(){try{return!!(document.documentElement&&document.documentElement.addBehavior)}catch(n){return!1}},init:function(){if(!this.initialized)try{this.element=document.createElement(this.nodeName);document.documentElement.insertBefore(this.element,document.getElementsByTagName("title")[0]);this.element.addBehavior("#default#userData");this.initialized=!0}catch(n){return!1}},get:function(n){return this.element.load(this.nodeName),this.element.getAttribute(n)},set:function(n,t){this.element.setAttribute(n,t);this.element.save(this.nodeName)},del:function(n){this.element.removeAttribute(n);this.element.save(this.nodeName)},flush:function(){for(var t=this.element.xmlDocument.firstChild.attributes,n=t.length-1;n>=0;n--)this.element.removeAttribute(t[n].nodeName);this.element.save(this.nodeName)}},windowName:{ident:"$.store.drivers.windowName",scope:"window",cache:{},encodes:!0,available:function(){return!0},init:function(){this.load()},save:function(){window.name=n.store.serializers.json.encode(this.cache)},load:function(){try{this.cache=n.store.serializers.json.decode(window.name+"");typeof this.cache!="object"&&(this.cache={})}catch(t){this.cache={};window.name="{}"}},get:function(n){return this.cache[n]},set:function(n,t){this.cache[n]=t;this.save()},del:function(n){try{delete this.cache[n]}catch(i){this.cache[n]=t}this.save()},flush:function(){window.name="{}"}}};n.store.serializers={json:{ident:"$.store.serializers.json",init:function(n,t){n.push("json");t.push("json")},encode:JSON.stringify,decode:JSON.parse},xml:{ident:"$.store.serializers.xml",init:function(n,t){n.unshift("xml");t.push("xml")},isXML:function(n){var t=(n?n.ownerDocument||n:0).documentElement;return t?t.nodeName.toLowerCase()!=="html":!1},encode:function(n){if(!n||n._serialized||!this.isXML(n))return n;var t={_serialized:this.ident,value:n};try{return t.value=(new XMLSerializer).serializeToString(n),t}catch(i){try{return t.value=n.xml,t}catch(r){}}return n},decode:function(n){if(!n||!n._serialized||n._serialized!=this.ident)return n;var i="DOMParser"in window&&(new DOMParser).parseFromString;return(!i&&window.ActiveXObject&&(i=function(n){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(n),t}),!i)?t:(n.value=i.call("DOMParser"in window&&new DOMParser||window,n.value,"text/xml"),this.isXML(n.value)?n.value:t)}}}}(jQuery),function(n){function t(n,t){return typeof n=="function"?n.call(t):n}function i(t,i){this.$element=n(t);this.options=i;this.enabled=!0;this.fixTitle()}i.prototype={show:function(){var s=this.getTitle(),r;if(s&&this.enabled){r=this.tip();r.find(".tipsy-inner")[this.options.html?"html":"text"](s);r[0].className="tipsy";r.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var i=n.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),e=r[0].offsetWidth,o=r[0].offsetHeight,f=t(this.options.gravity,this.$element[0]),u;switch(f.charAt(0)){case"n":u={top:i.top+i.height+this.options.offset,left:i.left+i.width/2-e/2};break;case"s":u={top:i.top-o-this.options.offset,left:i.left+i.width/2-e/2};break;case"e":u={top:i.top+i.height/2-o/2,left:i.left-e-this.options.offset};break;case"w":u={top:i.top+i.height/2-o/2,left:i.left+i.width+this.options.offset}}f.length==2&&(u.left=f.charAt(1)=="w"?i.left+i.width/2-15:i.left+i.width/2-e+15);r.css(u).addClass("tipsy-"+f);r.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+f.charAt(0);this.options.className&&r.addClass(t(this.options.className,this.$element[0]));this.options.fade?r.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):r.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){n(this).remove()}):this.tip().remove()},fixTitle:function(){var n=this.$element;(n.attr("title")||typeof n.attr("original-title")!="string")&&n.attr("original-title",n.attr("title")||"").removeAttr("title")},getTitle:function(){var i=this.$element,n=this.options,t;return this.fixTitle(),n=this.options,typeof n.title=="string"?t=i.attr(n.title=="title"?"original-title":n.title):typeof n.title=="function"&&(t=n.title.call(i[0])),t=(""+t).replace(/(^\s*|\s*$)/,""),t||n.fallback},tip:function(){return this.$tip||(this.$tip=n('<div class="tipsy"><\/div>').html('<div class="tipsy-arrow"><\/div><div class="tipsy-inner" style="text-shadow:0px 0px 1px #fff;"><\/div>')),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}};n.fn.tipsy=function(t){function u(r){var u=n.data(r,"tipsy");return u||(u=new i(r,n.fn.tipsy.elementOptions(r,t)),n.data(r,"tipsy",u)),u}function e(){var n=u(this);n.hoverState="in";t.delayIn==0?n.show():(n.fixTitle(),setTimeout(function(){n.hoverState=="in"&&n.show()},t.delayIn))}function o(){var n=u(this);n.hoverState="out";t.delayOut==0?n.hide():setTimeout(function(){n.hoverState=="out"&&n.hide()},t.delayOut)}var r;if(t===!0)return this.data("tipsy");if(typeof t=="string")return r=this.data("tipsy"),r&&r[t](),this;if(t=n.extend({},n.fn.tipsy.defaults,t),t.live||this.each(function(){u(this)}),t.trigger!="manual"){var f=t.live?"live":"bind",s=t.trigger=="hover"?"mouseenter":"focus",h=t.trigger=="hover"?"mouseleave":"blur";this[f](s,e)[f](h,o)}return this};n.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.9,title:"title",trigger:"hover"};n.fn.tipsy.elementOptions=function(t,i){return n.metadata?n.extend({},i,n(t).metadata()):i};n.fn.tipsy.autoNS=function(){return n(this).offset().top>n(document).scrollTop()+n(window).height()/2?"s":"n"};n.fn.tipsy.autoWE=function(){return n(this).offset().left>n(document).scrollLeft()+n(window).width()/2?"e":"w"};n.fn.tipsy.autoBounds=function(t,i){return function(){var r={ns:i[0],ew:i.length>1?i[1]:!1},f=n(document).scrollTop()+t,e=n(document).scrollLeft()+t,u=n(this);return u.offset().top<f&&(r.ns="n"),u.offset().left<e&&(r.ew="w"),n(window).width()+n(document).scrollLeft()-u.offset().left<t&&(r.ew="e"),n(window).height()+n(document).scrollTop()-u.offset().top<t&&(r.ns="s"),r.ns+(r.ew?r.ew:"")}}}(jQuery),function(n,t){n.fn.vheight=function(i){function o(){var e=u.match.offset().top+u.match.height(),i=e-r.offset().top,f;u.fillWindow&&(f=n(t).height()-r.offset().top-30,i=Math.max(i,f));u.setMaxHeight?r.css({maxHeight:i}):r.css({height:i})}var r,f="vheight",u={match:null,fillWindow:!1,setMaxHeight:!1,disableOn:function(){return n(t).width()>574}},e={init:function(t){n.extend(u,t);u.match&&u.match.length||n.error(f+": need to declare an element to match to.");var i=r.data(f);i||r.data(f,u);r.css({overflowY:"auto"});o()},update:function(){o()}};if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).vheight(i)});if(r=n(this),e[i])return settings=r.data(f),e[i].apply(this,Array.prototype.slice.call(arguments,1));if(typeof i!="object"&&i)n.error("Method "+i+" does not exist on jQuery."+f);else return e.init.apply(this,arguments)}}(jQuery,window),function(n,t,i){var u="watermark",f="watermarkClass",h="watermarkFocus",s="watermarkSubmit",c="watermarkMaxLength",e="watermarkPassword",r="watermarkText",o=/\r/g,p=/^(button|checkbox|hidden|image|radio|range|reset|submit)$/i,y="input:data("+u+"),textarea:data("+u+")",l=":watermarkable",a=["Page_ClientValidate"],v=!1,w="placeholder"in document.createElement("input");n.watermark=n.watermark||{version:"3.1.4",runOnce:!0,options:{className:"watermark",useNative:!0,hideBeforeUnload:!0},hide:function(t){n(t).filter(y).each(function(){n.watermark._hide(n(this))})},_hide:function(n,i){var h=n[0],y=(h.value||"").replace(o,""),l=n.data(r)||"",a=n.data(c)||0,v=n.data(f),u,s;l.length&&y==l&&(h.value="",n.data(e)&&(n.attr("type")||"")==="text"&&(u=n.data(e)||[],s=n.parent()||[],u.length&&s.length&&(s[0].removeChild(n[0]),s[0].appendChild(u[0]),n=u)),a&&(n.attr("maxLength",a),n.removeData(c)),i&&(n.attr("autocomplete","off"),t.setTimeout(function(){n.select()},1)));v&&n.removeClass(v)},show:function(t){n(t).filter(y).each(function(){n.watermark._show(n(this))})},_show:function(t){var a=t[0],p=(a.value||"").replace(o,""),i=t.data(r)||"",y=t.attr("type")||"",w=t.data(f),u,s,l;p.length!=0&&p!=i||t.data(h)?n.watermark._hide(t):(v=!0,t.data(e)&&y==="password"&&(u=t.data(e)||[],s=t.parent()||[],u.length&&s.length&&(s[0].removeChild(t[0]),s[0].appendChild(u[0]),t=u,t.attr("maxLength",i.length),a=t[0])),(y==="text"||y==="search")&&(l=t.attr("maxLength")||0,l>0&&i.length>l&&(t.data(c,l),t.attr("maxLength",i.length))),w&&t.addClass(w),a.value=i)},hideAll:function(){v&&(n.watermark.hide(l),v=!1)},showAll:function(){n.watermark.show(l)}};n.fn.watermark=n.fn.watermark||function(i,c){if(!this.length)return this;var v=!1,a=typeof i=="string";return a&&(i=i.replace(o,"")),typeof c=="object"?(v=typeof c.className=="string",c=n.extend({},n.watermark.options,c)):typeof c=="string"?(v=!0,c=n.extend({},n.watermark.options,{className:c})):c=n.watermark.options,typeof c.useNative!="function"&&(c.useNative=c.useNative?function(){return!0}:function(){return!1}),this.each(function(){var y=n(this),d,p,b,k;if(y.is(l)){if(y.data(u))(a||v)&&(n.watermark._hide(y),a&&y.data(r,i),v&&y.data(f,c.className));else{if(w&&c.useNative.call(this,y)&&(y.attr("tagName")||"")!=="TEXTAREA"){a&&y.attr("placeholder",i);return}y.data(r,a?i:"");y.data(f,c.className);y.data(u,1);(y.attr("type")||"")==="password"?(d=y.wrap("<span>").parent(),p=n(d.html().replace(/type=["']?password["']?/i,'type="text"')),p.data(r,y.data(r)),p.data(f,y.data(f)),p.data(u,1),p.attr("maxLength",i.length),p.focus(function(){n.watermark._hide(p,!0)}).bind("dragenter",function(){n.watermark._hide(p)}).bind("dragend",function(){t.setTimeout(function(){p.blur()},1)}),y.blur(function(){n.watermark._show(y)}).bind("dragleave",function(){n.watermark._show(y)}),p.data(e,y),y.data(e,p)):y.focus(function(){y.data(h,1);n.watermark._hide(y,!0)}).blur(function(){y.data(h,0);n.watermark._show(y)}).bind("dragenter",function(){n.watermark._hide(y)}).bind("dragleave",function(){n.watermark._show(y)}).bind("dragend",function(){t.setTimeout(function(){n.watermark._show(y)},1)}).bind("drop",function(n){var t=y[0],i=n.originalEvent.dataTransfer.getData("Text");(t.value||"").replace(o,"").replace(i,"")===y.data(r)&&(t.value=i);y.focus()});this.form&&(b=this.form,k=n(b),k.data(s)||(k.submit(n.watermark.hideAll),b.submit?(k.data(s,b.submit),b.submit=function(t,i){return function(){var r=i.data(s);n.watermark.hideAll();r.apply?r.apply(t,Array.prototype.slice.call(arguments)):r()}}(b,k)):(k.data(s,1),b.submit=function(t){return function(){n.watermark.hideAll();delete t.submit;t.submit()}}(b))))}n.watermark._show(y)}})};n.watermark.runOnce&&(n.watermark.runOnce=!1,n.extend(n.expr[":"],{data:n.expr.createPseudo?n.expr.createPseudo(function(t){return function(i){return!!n.data(i,t)}}):function(t,i,r){return!!n.data(t,r[3])},watermarkable:function(n){var t,i=n.nodeName;return i==="TEXTAREA"?!0:i!=="INPUT"?!1:(t=n.getAttribute("type"),!t||!p.test(t))}}),function(t){n.fn.val=function(){var f=Array.prototype.slice.call(arguments),e;return this.length?f.length?(t.apply(this,f),n.watermark.show(this),this):this.data(u)?(e=(this[0].value||"").replace(o,""),e===(this.data(r)||"")?"":e):t.apply(this):f.length?this:i}}(n.fn.val),a.length&&n(function(){for(var r,u,i=a.length-1;i>=0;i--)r=a[i],u=t[r],typeof u=="function"&&(t[r]=function(t){return function(){return n.watermark.hideAll(),t.apply(null,Array.prototype.slice.call(arguments))}}(u))}),n(t).bind("beforeunload",function(){n.watermark.options.hideBeforeUnload&&n.watermark.hideAll()}))}(jQuery,window),function(){function l(){this.returnValue=!1}function a(){this.cancelBubble=!0}var h=0,u=[],e={},o={},s={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},c=/[<>&\"\']/g,i,f=window.setTimeout,r={},t,n;(function(n){for(var r=n.split(/,/),i,u,t=0;t<r.length;t+=2)for(u=r[t+1].split(/ /),i=0;i<u.length;i++)o[u[i]]=r[t]})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe");n={VERSION:"1.5.5",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:o,ua:function(){var t=navigator,i=t.userAgent,f=t.vendor,n,r,u;return n=/WebKit/.test(i),u=n&&f.indexOf("Apple")!==-1,r=window.opera&&window.opera.buildNumber,{windows:navigator.platform.indexOf("Win")!==-1,ie:!n&&!r&&/MSIE/gi.test(i)&&/Explorer/gi.test(t.appName),webkit:n,gecko:!n&&/Gecko/.test(i),safari:u,opera:!!r}}(),typeOf:function(n){return{}.toString.call(n).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(t){return n.each(arguments,function(i,r){r>0&&n.each(i,function(n,i){t[i]=n})}),t},cleanName:function(n){for(var i=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],t=0;t<i.length;t+=2)n=n.replace(i[t],i[t+1]);return n=n.replace(/\s+/g,"_"),n.replace(/[^a-z0-9_\-\.]+/gi,"")},addRuntime:function(n,t){return t.name=n,u[n]=t,u.push(t),t},guid:function(){for(var i=(new Date).getTime().toString(32),t=0;t<5;t++)i+=Math.floor(Math.random()*65535).toString(32);return(n.guidPrefix||"p")+i+(h++).toString(32)},buildUrl:function(t,i){var r="";return n.each(i,function(n,t){r+=(r?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(n)}),r&&(t+=(t.indexOf("?")>0?"&":"?")+r),t},each:function(n,t){var f,u,r;if(n)if(f=n.length,f===i){for(u in n)if(n.hasOwnProperty(u)&&t(n[u],u)===!1)return}else for(r=0;r<f;r++)if(t(n[r],r)===!1)return},formatSize:function(t){return t===i||/\D/.test(t)?n.translate("N/A"):t>1073741824?Math.round(t/1073741824,1)+" GB":t>1048576?Math.round(t/1048576,1)+" MB":t>1024?Math.round(t/1024,1)+" KB":t+" b"},getPos:function(n,t){function s(n){var t,i,u=0,f=0;return n&&(i=n.getBoundingClientRect(),t=r.compatMode==="CSS1Compat"?r.documentElement:r.body,u=i.left+t.scrollLeft,f=i.top+t.scrollTop),{x:u,y:f}}var u=0,f=0,i,r=document,e,o;if(n=n,t=t||r.body,n&&n.getBoundingClientRect&&navigator.userAgent.indexOf("MSIE")>0&&r.documentMode<8)return e=s(n),o=s(t),{x:e.x-o.x,y:e.y-o.y};for(i=n;i&&i!=t&&i.nodeType;)u+=i.offsetLeft||0,f+=i.offsetTop||0,i=i.offsetParent;for(i=n.parentNode;i&&i!=t&&i.nodeType;)u-=i.scrollLeft||0,f-=i.scrollTop||0,i=i.parentNode;return{x:u,y:f}},getSize:function(n){return{w:n.offsetWidth||n.clientWidth,h:n.offsetHeight||n.clientHeight}},parseSize:function(n){var t;return typeof n=="string"&&(n=/^([0-9]+)([mgk]?)$/.exec(n.toLowerCase().replace(/[^0-9mkg]/g,"")),t=n[2],n=+n[1],t=="g"&&(n*=1073741824),t=="m"&&(n*=1048576),t=="k"&&(n*=1024)),n},xmlEncode:function(n){return n?(""+n).replace(c,function(n){return s[n]?"&"+s[n]+";":n}):n},toArray:function(n){for(var i=[],t=0;t<n.length;t++)i[t]=n[t];return i},inArray:function(n,t){if(t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,n);for(var i=0,r=t.length;i<r;i++)if(t[i]===n)return i}return-1},addI18n:function(t){return n.extend(e,t)},translate:function(n){return e[n]||n},isEmptyObj:function(n){if(n===i)return!0;for(var t in n)return!1;return!0},hasClass:function(n,t){var i;return n.className==""?!1:(i=new RegExp("(^|\\s+)"+t+"(\\s+|$)"),i.test(n.className))},addClass:function(t,i){n.hasClass(t,i)||(t.className=t.className==""?i:t.className.replace(/\s+$/,"")+" "+i)},removeClass:function(n,t){var i=new RegExp("(^|\\s+)"+t+"(\\s+|$)");n.className=n.className.replace(i,function(n,t,i){return t===" "&&i===" "?" ":""})},getStyle:function(n,t){return n.currentStyle?n.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(n,null)[t]:void 0},addEvent:function(u,f,e){var o,s,h;h=arguments[3];f=f.toLowerCase();t===i&&(t="Plupload_"+n.guid());u.addEventListener?(o=e,u.addEventListener(f,o,!1)):u.attachEvent&&(o=function(){var n=window.event;n.target||(n.target=n.srcElement);n.preventDefault=l;n.stopPropagation=a;e(n)},u.attachEvent("on"+f,o));u[t]===i&&(u[t]=n.guid());r.hasOwnProperty(u[t])||(r[u[t]]={});s=r[u[t]];s.hasOwnProperty(f)||(s[f]=[]);s[f].push({func:o,orig:e,key:h})},removeEvent:function(u,f){var e,s,h,o;if(typeof arguments[2]=="function"?s=arguments[2]:h=arguments[2],f=f.toLowerCase(),u[t]&&r[u[t]]&&r[u[t]][f])e=r[u[t]][f];else return;for(o=e.length-1;o>=0;o--)if((e[o].key===h||e[o].orig===s)&&(u.removeEventListener?u.removeEventListener(f,e[o].func,!1):u.detachEvent&&u.detachEvent("on"+f,e[o].func),e[o].orig=null,e[o].func=null,e.splice(o,1),s!==i))break;if(e.length||delete r[u[t]][f],n.isEmptyObj(r[u[t]])){delete r[u[t]];try{delete u[t]}catch(c){u[t]=i}}},removeAllEvents:function(u){var f=arguments[1];u[t]!==i&&u[t]&&n.each(r[u[t]],function(t,i){n.removeEvent(u,i,f)})}};n.Uploader=function(t){function h(){var t,u=0,i;if(this.state==n.STARTED){for(i=0;i<r.length;i++)t||r[i].status!=n.QUEUED?u++:(t=r[i],t.status=n.UPLOADING,this.trigger("BeforeUpload",t)&&this.trigger("UploadFile",t));u==r.length&&(this.stop(),this.trigger("UploadComplete",r))}}function s(){var u,t;for(e.reset(),u=0;u<r.length;u++)t=r[u],t.size!==i?(e.size+=t.size,e.loaded+=t.loaded):e.size=i,t.status==n.DONE?e.uploaded++:t.status==n.FAILED?e.failed++:e.queued++;e.size===i?e.percent=r.length>0?Math.ceil(e.uploaded/r.length*100):0:(e.bytesPerSec=Math.ceil(e.loaded/((+new Date-c||1)/1e3)),e.percent=e.size>0?Math.ceil(e.loaded/e.size*100):0)}var o={},e,r=[],c,l=!1;e=new n.QueueProgress;t=n.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},t);n.extend(this,{state:n.STOPPED,runtime:"",features:{},files:r,settings:t,total:e,id:n.guid(),init:function(){function v(){var i=l[y++],u,t,r;if(i){if(u=i.getFeatures(),t=e.settings.required_features,t)for(t=t.split(","),r=0;r<t.length;r++)if(!u[t[r]]){v();return}i.init(e,function(n){n&&n.success?(e.features=u,e.runtime=i.name,e.trigger("Init",{runtime:i.name}),e.trigger("PostInit"),e.refresh()):v()})}else e.trigger("Error",{code:n.INIT_ERROR,message:n.translate("Init error.")})}var e=this,o,l,y=0,a;if(typeof t.preinit=="function"?t.preinit(e):n.each(t.preinit,function(n,t){e.bind(t,n)}),t.page_url=t.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/"),/^(\w+:\/\/|\/)/.test(t.url)||(t.url=t.page_url+t.url),t.chunk_size=n.parseSize(t.chunk_size),t.max_file_size=n.parseSize(t.max_file_size),e.bind("FilesAdded",function(u,o){var c,s,a=0,h,l=t.filters;for(l&&l.length&&(h=[],n.each(l,function(t){n.each(t.extensions.split(/,/),function(n){/^\s*\*\s*$/.test(n)?h.push("\\.*"):h.push("\\."+n.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),h=new RegExp(h.join("|")+"$","i")),c=0;c<o.length;c++){if(s=o[c],s.loaded=0,s.percent=0,s.status=n.QUEUED,h&&!h.test(s.name)){u.trigger("Error",{code:n.FILE_EXTENSION_ERROR,message:n.translate("File extension error."),file:s});continue}if(s.size!==i&&s.size>t.max_file_size){u.trigger("Error",{code:n.FILE_SIZE_ERROR,message:n.translate("File size error."),file:s});continue}r.push(s);a++}if(a)f(function(){e.trigger("QueueChanged");e.refresh()},1);else return!1}),t.unique_names&&e.bind("UploadFile",function(n,t){var i=t.name.match(/\.([^.]+)$/),r="tmp";i&&(r=i[1]);t.target_name=t.id+"."+r}),e.bind("UploadProgress",function(n,t){t.percent=t.size>0?Math.ceil(t.loaded/t.size*100):100;s()}),e.bind("StateChanged",function(t){if(t.state==n.STARTED)c=+new Date;else if(t.state==n.STOPPED)for(o=t.files.length-1;o>=0;o--)t.files[o].status==n.UPLOADING&&(t.files[o].status=n.QUEUED,s())}),e.bind("QueueChanged",s),e.bind("Error",function(t,i){i.file&&(i.file.status=n.FAILED,s(),t.state==n.STARTED&&f(function(){h.call(e)},1))}),e.bind("FileUploaded",function(t,i){i.status=n.DONE;i.loaded=i.size;t.trigger("UploadProgress",i);f(function(){h.call(e)},1)}),t.runtimes)for(l=[],a=t.runtimes.split(/\s?,\s?/),o=0;o<a.length;o++)u[a[o]]&&l.push(u[a[o]]);else l=u;v();typeof t.init=="function"?t.init(e):n.each(t.init,function(n,t){e.bind(t,n)})},refresh:function(){this.trigger("Refresh")},start:function(){r.length&&this.state!=n.STARTED&&(this.state=n.STARTED,this.trigger("StateChanged"),h.call(this))},stop:function(){this.state!=n.STOPPED&&(this.state=n.STOPPED,this.trigger("CancelUpload"),this.trigger("StateChanged"))},disableBrowse:function(){l=arguments[0]!==i?arguments[0]:!0;this.trigger("DisableBrowse",l)},getFile:function(n){for(var t=r.length-1;t>=0;t--)if(r[t].id===n)return r[t]},removeFile:function(n){for(var t=r.length-1;t>=0;t--)if(r[t].id===n.id)return this.splice(t,1)[0]},splice:function(n,t){var u;return u=r.splice(n===i?0:n,t===i?r.length:t),this.trigger("FilesRemoved",u),this.trigger("QueueChanged"),u},trigger:function(n){var i=o[n.toLowerCase()],t,r;if(i)for(r=Array.prototype.slice.call(arguments),r[0]=this,t=0;t<i.length;t++)if(i[t].func.apply(i[t].scope,r)===!1)return!1;return!0},hasEventListener:function(n){return!!o[n.toLowerCase()]},bind:function(n,t,i){var r;n=n.toLowerCase();r=o[n]||[];r.push({func:t,scope:i||this});o[n]=r},unbind:function(n){n=n.toLowerCase();var t=o[n],r,u=arguments[1];if(t){if(u!==i){for(r=t.length-1;r>=0;r--)if(t[r].func===u){t.splice(r,1);break}}else t=[];t.length||delete o[n]}},unbindAll:function(){var t=this;n.each(o,function(n,i){t.unbind(i)})},destroy:function(){this.stop();this.trigger("Destroy");this.unbindAll()}})};n.File=function(n,t,i){var r=this;r.id=n;r.name=t;r.size=i;r.loaded=0;r.percent=0;r.status=0};n.Runtime=function(){this.getFeatures=function(){};this.init=function(){}};n.QueueProgress=function(){var n=this;n.size=0;n.loaded=0;n.uploaded=0;n.failed=0;n.queued=0;n.percent=0;n.bytesPerSec=0;n.reset=function(){n.size=n.loaded=n.uploaded=n.failed=n.queued=n.percent=n.bytesPerSec=0}};n.runtimes={};window.plupload=n}(),function(){if(!window.google||!google.gears){var n=null;if(typeof GearsFactory!="undefined")n=new GearsFactory;else try{n=new ActiveXObject("Gears.Factory");n.getBuildInfo().indexOf("ie_mobile")!=-1&&n.privateSetGlobalObject(this)}catch(t){typeof navigator.mimeTypes!="undefined"&&navigator.mimeTypes["application/x-googlegears"]&&(n=document.createElement("object"),n.style.display="none",n.width=0,n.height=0,n.type="application/x-googlegears",document.documentElement.appendChild(n))}n&&(window.google||(window.google={}),google.gears||(google.gears={factory:n}))}}(),function(n,t,i){function u(n,t,i){var r,u;r=google.gears.factory.create("beta.canvas");try{if(r.decode(n),t.width||(t.width=r.width),t.height||(t.height=r.height),u=Math.min(t.width/r.width,t.height/r.height),u<1)r.resize(Math.round(r.width*u),Math.round(r.height*u));else if(!t.quality||i!=="image/jpeg")return n;return t.quality?r.encode(i,{quality:t.quality/100}):r.encode(i)}catch(f){}return n}var r={};i.runtimes.Gears=i.addRuntime("gears",{getFeatures:function(){return{dragdrop:!0,jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(f,e){function c(n){for(var t,o=[],e,u=0;u<n.length;u++)t=n[u],e=i.guid(),r[e]=t.blob,o.push(new i.File(e,t.name,t.blob.length));f.trigger("FilesAdded",o)}var s,o,h=!1;if(!n.google||!google.gears)return e({success:!1});try{s=google.gears.factory.create("beta.desktop")}catch(l){return e({success:!1})}f.bind("PostInit",function(){var n=f.settings,r=t.getElementById(n.drop_element);r&&(i.addEvent(r,"dragover",function(n){s.setDropEffect(n,"copy");n.preventDefault()},f.id),i.addEvent(r,"drop",function(n){var t=s.getDragData(n,"application/x-gears-files");t&&c(t.files);n.preventDefault()},f.id),r=0);i.addEvent(t.getElementById(n.browse_button),"click",function(t){var f=[],r,i,u;if(t.preventDefault(),!h){n:for(r=0;r<n.filters.length;r++)for(u=n.filters[r].extensions.split(","),i=0;i<u.length;i++){if(u[i]==="*"){f=[];break n}f.push("."+u[i])}s.openFiles(c,{singleFile:!n.multi_selection,filter:f})}},f.id)});f.bind("CancelUpload",function(){o.abort&&o.abort()});f.bind("UploadFile",function(n,t){function a(){function w(r){var e,s="----pluploadboundary"+i.guid(),h="--",f="\r\n",c,l;v&&(o.setRequestHeader("Content-Type","multipart/form-data; boundary="+s),e=google.gears.factory.create("beta.blobbuilder"),i.each(i.extend(u,n.settings.multipart_params),function(n,t){e.append(h+s+f+'Content-Disposition: form-data; name="'+t+'"'+f+f);e.append(n+f)}),l=i.mimeTypes[t.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",e.append(h+s+f+'Content-Disposition: form-data; name="'+n.settings.file_data_name+'"; filename="'+t.name+'"'+f+"Content-Type: "+l+f+f),e.append(r),e.append(f+h+s+h+f),c=e.getAsBlob(),y=c.length-r.length,r=c);o.send(r)}var l,v=n.settings.multipart,y=0,u={name:t.target_name||t.name},p=n.settings.url;t.status!=i.DONE&&t.status!=i.FAILED&&n.state!=i.STOPPED&&(h&&(u.chunk=f,u.chunks=e),l=Math.min(s,t.size-f*s),v||(p=i.buildUrl(n.settings.url,u)),o=google.gears.factory.create("beta.httprequest"),o.open("POST",p),v||(o.setRequestHeader("Content-Disposition",'attachment; filename="'+t.name+'"'),o.setRequestHeader("Content-Type","application/octet-stream")),i.each(n.settings.headers,function(n,t){o.setRequestHeader(t,n)}),o.upload.onprogress=function(i){t.loaded=c+i.loaded-y;n.trigger("UploadProgress",t)},o.onreadystatechange=function(){var r;if(o.readyState==4&&n.state!==i.STOPPED)if(o.status==200){if(r={chunk:f,chunks:e,response:o.responseText,status:o.status},n.trigger("ChunkUploaded",t,r),r.cancelled){t.status=i.FAILED;return}c+=l;++f>=e?(t.status=i.DONE,n.trigger("FileUploaded",t,{response:o.responseText,status:o.status})):a()}else n.trigger("Error",{code:i.HTTP_ERROR,message:i.translate("HTTP Error."),file:t,chunk:f,chunks:e,status:o.status})},f<e&&w(r[t.id].slice(f*s,l)))}var f=0,e,s,c=0,l=n.settings.resize,h;l&&/\.(png|jpg|jpeg)$/i.test(t.name)&&(r[t.id]=u(r[t.id],l,/\.png$/i.test(t.name)?"image/png":"image/jpeg"));t.size=r[t.id].length;s=n.settings.chunk_size;h=s>0;e=Math.ceil(t.size/s);h||(s=t.size,e=1);a()});f.bind("DisableBrowse",function(n,t){h=t});f.bind("Destroy",function(n){var u,r,f={browseButton:n.settings.browse_button,dropElm:n.settings.drop_element};for(u in f)r=t.getElementById(f[u]),r&&i.removeAllEvents(r,n.id)});e({success:!0})}})}(window,document,plupload),function(n,t,i,r){function f(n){var t,e=typeof n,o,i,u;if(n===r||n===null)return"null";if(e==="string")return t="\bb\tt\nn\ff\rr\"\"''\\\\",'"'+n.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(n,i){var r=t.indexOf(i);return r+1?"\\"+t.charAt(r+1):(n=i.charCodeAt().toString(16),"\\u"+"0000".substring(n.length)+n)})+'"';if(e=="object"){if(o=n.length!==r,t="",o){for(i=0;i<n.length;i++)t&&(t+=","),t+=f(n[i]);t="["+t+"]"}else{for(u in n)n.hasOwnProperty(u)&&(t&&(t+=","),t+=f(u)+":"+f(n[u]));t="{"+t+"}"}return t}return""+n}function o(n){var r=!1,o=null,u,t,i,f,s,e=0,h;try{try{o=new ActiveXObject("AgControl.AgControl");o.IsVersionSupported(n)&&(r=!0);o=null}catch(c){if(h=navigator.plugins["Silverlight Plug-In"],h){for(u=h.description,u==="1.0.30226.2"&&(u="2.0.30226.2"),t=u.split(".");t.length>3;)t.pop();while(t.length<4)t.push(0);for(i=n.split(".");i.length>4;)i.pop();do f=parseInt(i[e],10),s=parseInt(t[e],10),e++;while(e<i.length&&f===s);f<=s&&!isNaN(f)&&(r=!0)}}}catch(l){r=!1}return r}var e={},u={};i.silverlight={trigger:function(n,t){var r=e[n],u;r&&(u=i.toArray(arguments).slice(1),u[0]="Silverlight:"+t,setTimeout(function(){r.trigger.apply(r,u)},0))}};i.runtimes.Silverlight=i.addRuntime("silverlight",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(r,s){function a(){return t.getElementById(r.id+"_silverlight").content.Upload}var h,v="",y=r.settings.filters,c,l=t.body;if(!o("2.0.31005.0")||n.opera&&n.opera.buildNumber){s({success:!1});return}for(u[r.id]=!1,e[r.id]=r,h=t.createElement("div"),h.id=r.id+"_silverlight_container",i.extend(h.style,{position:"absolute",top:"0px",background:r.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100px",height:"100px",overflow:"hidden",opacity:r.settings.shim_bgcolor||t.documentMode>8?"":.01}),h.className="plupload silverlight",r.settings.container&&(l=t.getElementById(r.settings.container),i.getStyle(l,"position")==="static"&&(l.style.position="relative")),l.appendChild(h),c=0;c<y.length;c++)v+=(v!=""?"|":"")+y[c].title+" | *."+y[c].extensions.replace(/,/g,";*.");h.innerHTML='<object id="'+r.id+'_silverlight" data="data:application/x-silverlight," type="application/x-silverlight-2" style="outline:none;" width="1024" height="1024"><param name="source" value="'+r.settings.silverlight_xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="id='+r.id+",filter="+v+",multiselect="+r.settings.multi_selection+'"/><\/object>';r.bind("Silverlight:Init",function(){var o,n={};u[r.id]||(u[r.id]=!0,r.bind("Silverlight:StartSelectFiles",function(){o=[]}),r.bind("Silverlight:SelectFile",function(t,r,u,f){var e;e=i.guid();n[e]=r;n[r]=e;o.push(new i.File(e,u,f))}),r.bind("Silverlight:SelectSuccessful",function(){o.length&&r.trigger("FilesAdded",o)}),r.bind("Silverlight:UploadChunkError",function(t,u,f,e,o){r.trigger("Error",{code:i.IO_ERROR,message:"IO Error.",details:o,file:t.getFile(n[u])})}),r.bind("Silverlight:UploadFileProgress",function(t,r,u,f){var e=t.getFile(n[r]);e.status!=i.FAILED&&(e.size=f,e.loaded=u,t.trigger("UploadProgress",e))}),r.bind("Refresh",function(n){var r,u,f;r=t.getElementById(n.settings.browse_button);r&&(u=i.getPos(r,t.getElementById(n.settings.container)),f=i.getSize(r),i.extend(t.getElementById(n.id+"_silverlight_container").style,{top:u.y+"px",left:u.x+"px",width:f.w+"px",height:f.h+"px"}))}),r.bind("Silverlight:UploadChunkSuccessful",function(t,r,u,f,e){var s,o=t.getFile(n[r]);s={chunk:u,chunks:f,response:e};t.trigger("ChunkUploaded",o,s);o.status!=i.FAILED&&t.state!==i.STOPPED&&a().UploadNextChunk();u==f-1&&(o.status=i.DONE,t.trigger("FileUploaded",o,{response:e}))}),r.bind("Silverlight:UploadSuccessful",function(t,r,u){var f=t.getFile(n[r]);f.status=i.DONE;t.trigger("FileUploaded",f,{response:u})}),r.bind("FilesRemoved",function(t,i){for(var r=0;r<i.length;r++)a().RemoveFile(n[i[r].id])}),r.bind("UploadFile",function(t,r){var u=t.settings,e=u.resize||{};a().UploadFile(n[r.id],t.settings.url,f({name:r.target_name||r.name,mime:i.mimeTypes[r.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:u.chunk_size,image_width:e.width,image_height:e.height,image_quality:e.quality,multipart:!!u.multipart,multipart_params:u.multipart_params||{},file_data_name:u.file_data_name,headers:u.headers}))}),r.bind("CancelUpload",function(){a().CancelUpload()}),r.bind("Silverlight:MouseEnter",function(n){var u,f;u=t.getElementById(r.settings.browse_button);f=n.settings.browse_button_hover;u&&f&&i.addClass(u,f)}),r.bind("Silverlight:MouseLeave",function(n){var u,f;u=t.getElementById(r.settings.browse_button);f=n.settings.browse_button_hover;u&&f&&i.removeClass(u,f)}),r.bind("Silverlight:MouseLeftButtonDown",function(n){var u,f;u=t.getElementById(r.settings.browse_button);f=n.settings.browse_button_active;u&&f&&(i.addClass(u,f),i.addEvent(t.body,"mouseup",function(){i.removeClass(u,f)}))}),r.bind("Sliverlight:StartSelectFiles",function(n){var u,f;u=t.getElementById(r.settings.browse_button);f=n.settings.browse_button_active;u&&f&&i.removeClass(u,f)}),r.bind("DisableBrowse",function(n,t){a().DisableBrowse(t)}),r.bind("Destroy",function(n){var r;i.removeAllEvents(t.body,n.id);delete u[n.id];delete e[n.id];r=t.getElementById(n.id+"_silverlight_container");r&&l.removeChild(r)}),s({success:!0}))})}})}(window,document,plupload),function(n,t,i){function f(){var n;try{n=navigator.plugins["Shockwave Flash"];n=n.description}catch(t){try{n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(i){n="0.0"}}return n=n.match(/\d+/g),parseFloat(n[0]+"."+n[1])}var u={},r={};i.flash={trigger:function(n,t,i){setTimeout(function(){var r=u[n];r&&r.trigger("Flash:"+t,i)},0)}};i.runtimes.Flash=i.addRuntime("flash",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,maxWidth:8091,maxHeight:8091,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(n,e){function s(){return t.getElementById(n.id+"_flash")}function l(){if(a++>5e3){e({success:!1});return}r[n.id]===!1&&setTimeout(l,1)}var c,o,a=0,h=t.body;if(f()<10){e({success:!1});return}r[n.id]=!1;u[n.id]=n;c=t.getElementById(n.settings.browse_button);o=t.createElement("div");o.id=n.id+"_flash_container";i.extend(o.style,{position:"absolute",top:"0px",background:n.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",height:"100%"});o.className="plupload flash";n.settings.container&&(h=t.getElementById(n.settings.container),i.getStyle(h,"position")==="static"&&(h.style.position="relative"));h.appendChild(o),function(){var r,u;r='<object id="'+n.id+'_flash" type="application/x-shockwave-flash" data="'+n.settings.flash_swf_url+'" ';i.ua.ie&&(r+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ');r+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+n.settings.flash_swf_url+'" /><param name="flashvars" value="id='+escape(n.id)+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /><\/object>';i.ua.ie?(u=t.createElement("div"),o.appendChild(u),u.outerHTML=r,u=null):o.innerHTML=r}();l();c=o=null;n.bind("Destroy",function(n){var f;i.removeAllEvents(t.body,n.id);delete r[n.id];delete u[n.id];f=t.getElementById(n.id+"_flash_container");f&&h.removeChild(f)});n.bind("Flash:Init",function(){var u={};try{s().setFileFilters(n.settings.filters,n.settings.multi_selection)}catch(f){e({success:!1});return}r[n.id]||(r[n.id]=!0,n.bind("UploadFile",function(t,r){var f=t.settings,e=n.settings.resize||{};s().uploadFile(u[r.id],f.url,{name:r.target_name||r.name,mime:i.mimeTypes[r.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:f.chunk_size,width:e.width,height:e.height,quality:e.quality,multipart:f.multipart,multipart_params:f.multipart_params||{},file_data_name:f.file_data_name,format:/\.(jpg|jpeg)$/i.test(r.name)?"jpg":"png",headers:f.headers,urlstream_upload:f.urlstream_upload})}),n.bind("CancelUpload",function(){s().cancelUpload()}),n.bind("Flash:UploadProcess",function(n,t){var r=n.getFile(u[t.id]);r.status!=i.FAILED&&(r.loaded=t.loaded,r.size=t.size,n.trigger("UploadProgress",r))}),n.bind("Flash:UploadChunkComplete",function(n,t){var f,r=n.getFile(u[t.id]);f={chunk:t.chunk,chunks:t.chunks,response:t.text};n.trigger("ChunkUploaded",r,f);r.status!==i.FAILED&&n.state!==i.STOPPED&&s().uploadNextChunk();t.chunk==t.chunks-1&&(r.status=i.DONE,n.trigger("FileUploaded",r,{response:t.text}))}),n.bind("Flash:SelectFiles",function(t,r){for(var f,s=[],o,e=0;e<r.length;e++)f=r[e],o=i.guid(),u[o]=f.id,u[f.id]=o,s.push(new i.File(o,f.name,f.size));s.length&&n.trigger("FilesAdded",s)}),n.bind("Flash:SecurityError",function(t,r){n.trigger("Error",{code:i.SECURITY_ERROR,message:i.translate("Security error."),details:r.message,file:n.getFile(u[r.id])})}),n.bind("Flash:GenericError",function(t,r){n.trigger("Error",{code:i.GENERIC_ERROR,message:i.translate("Generic error."),details:r.message,file:n.getFile(u[r.id])})}),n.bind("Flash:IOError",function(t,r){n.trigger("Error",{code:i.IO_ERROR,message:i.translate("IO error."),details:r.message,file:n.getFile(u[r.id])})}),n.bind("Flash:ImageError",function(t,r){n.trigger("Error",{code:parseInt(r.code,10),message:i.translate("Image error."),file:n.getFile(u[r.id])})}),n.bind("Flash:StageEvent:rollOver",function(r){var u,f;u=t.getElementById(n.settings.browse_button);f=r.settings.browse_button_hover;u&&f&&i.addClass(u,f)}),n.bind("Flash:StageEvent:rollOut",function(r){var u,f;u=t.getElementById(n.settings.browse_button);f=r.settings.browse_button_hover;u&&f&&i.removeClass(u,f)}),n.bind("Flash:StageEvent:mouseDown",function(r){var u,f;u=t.getElementById(n.settings.browse_button);f=r.settings.browse_button_active;u&&f&&(i.addClass(u,f),i.addEvent(t.body,"mouseup",function(){i.removeClass(u,f)},r.id))}),n.bind("Flash:StageEvent:mouseUp",function(r){var u,f;u=t.getElementById(n.settings.browse_button);f=r.settings.browse_button_active;u&&f&&i.removeClass(u,f)}),n.bind("Flash:ExifData",function(t,i){n.trigger("ExifData",n.getFile(u[i.id]),i.data)}),n.bind("Flash:GpsData",function(t,i){n.trigger("GpsData",n.getFile(u[i.id]),i.data)}),n.bind("QueueChanged",function(){n.refresh()}),n.bind("FilesRemoved",function(n,t){for(var i=0;i<t.length;i++)s().removeFile(u[t[i].id])}),n.bind("StateChanged",function(){n.refresh()}),n.bind("Refresh",function(r){var u,f,e;s().setFileFilters(n.settings.filters,n.settings.multi_selection);u=t.getElementById(r.settings.browse_button);u&&(f=i.getPos(u,t.getElementById(r.settings.container)),e=i.getSize(u),i.extend(t.getElementById(r.id+"_flash_container").style,{top:f.y+"px",left:f.x+"px",width:e.w+"px",height:e.h+"px"}))}),n.bind("DisableBrowse",function(n,t){s().disableBrowse(t)}),e({success:!0}))})}})}(window,document,plupload),function(n){n.runtimes.BrowserPlus=n.addRuntime("browserplus",{getFeatures:function(){return{dragdrop:!0,jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(t,i){function o(i){for(var o=[],u,f,r=0;r<i.length;r++)u=i[r],f=n.guid(),e[f]=u,o.push(new n.File(f,u.name,u.size));r&&t.trigger("FilesAdded",o)}function s(){var s=!1;t.bind("PostInit",function(){function c(n,t){r.DragAndDrop.AddDropTarget({id:n},function(){r.DragAndDrop.AttachCallbacks({id:n,hover:function(n){!n&&t&&t()},drop:function(n){t&&t();o(n)}},function(){})})}function l(){document.getElementById(u).style.top="-1000px"}var i,e=f.drop_element,u=t.id+"_droptarget",h=document.getElementById(e);h&&(document.attachEvent&&/MSIE/gi.test(navigator.userAgent)?(i=document.createElement("div"),i.setAttribute("id",u),n.extend(i.style,{position:"absolute",top:"-1000px",background:"red",filter:"alpha(opacity=0)",opacity:0}),document.body.appendChild(i),n.addEvent(h,"dragenter",function(){var t,i;t=document.getElementById(e);i=n.getPos(t);n.extend(document.getElementById(u).style,{top:i.y+"px",left:i.x+"px",width:t.offsetWidth+"px",height:t.offsetHeight+"px"})}),c(u,l)):c(e));n.addEvent(document.getElementById(f.browse_button),"click",function(t){var e=[],h,i,l=f.filters,u,c;if(t.preventDefault(),!s){n:for(h=0;h<l.length;h++)for(u=l[h].extensions.split(","),i=0;i<u.length;i++){if(u[i]==="*"){e=[];break n}c=n.mimeTypes[u[i]];c&&n.inArray(c,e)===-1&&e.push(n.mimeTypes[u[i]])}r.FileBrowse.OpenBrowseDialog({mimeTypes:e},function(n){n.success&&o(n.value)})}});h=i=null});t.bind("CancelUpload",function(){r.Uploader.cancel({},function(){})});t.bind("DisableBrowse",function(n,t){s=t});t.bind("UploadFile",function(t,i){function c(u,e){var l;i.status!=n.FAILED&&(o.name=i.target_name||i.name,s&&(o.chunk=""+u,o.chunks=""+e),l=h.shift(),r.Uploader.upload({url:t.settings.url,files:{file:l},cookies:document.cookies,postvars:n.extend(o,t.settings.multipart_params),progressCallback:function(n){var r,e=0;for(f[u]=parseInt(n.filePercent*l.size/100,10),r=0;r<f.length;r++)e+=f[r];i.loaded=e;t.trigger("UploadProgress",i)}},function(r){var f;r.success?(f=r.value.statusCode,s&&t.trigger("ChunkUploaded",i,{chunk:u,chunks:e,response:r.value.body,status:f}),h.length>0?c(++u,e):(i.status=n.DONE,t.trigger("FileUploaded",i,{response:r.value.body,status:f}),f>=400&&t.trigger("Error",{code:n.HTTP_ERROR,message:n.translate("HTTP Error."),file:i,status:f}))):t.trigger("Error",{code:n.GENERIC_ERROR,message:n.translate("Generic Error."),file:i,details:r.error})}))}function a(n){i.size=n.size;s?r.FileAccess.chunk({file:n,chunkSize:s},function(n){var r,i,t;if(n.success){for(r=n.value,i=r.length,f=Array(i),t=0;t<i;t++)f[t]=0,h.push(r[t]);c(0,i)}}):(f=Array(1),h.push(n),c(0,1))}var l=e[i.id],o={},s=t.settings.chunk_size,f,h=[];u&&/\.(png|jpg|jpeg)$/i.test(i.name)?BrowserPlus.ImageAlter.transform({file:l,quality:u.quality||90,actions:[{scale:{maxwidth:u.width,maxheight:u.height}}]},function(n){n.success&&a(n.value.file)}):a(l)});i({success:!0})}var r=window.BrowserPlus,e={},f=t.settings,u=f.resize;r?r.init(function(n){var t=[{service:"Uploader",version:"3"},{service:"DragAndDrop",version:"1"},{service:"FileBrowse",version:"1"},{service:"FileAccess",version:"2"}];u&&t.push({service:"ImageAlter",version:"4"});n.success?r.require({services:t},function(n){n.success?s():i()}):i()}):i()}})}(plupload),function(n,t,r,u){function c(t,i){var r;if("FileReader"in n)r=new FileReader,r.readAsDataURL(t),r.onload=function(){i(r.result)};else return i(t.getAsDataURL())}function o(t,i){var r;if("FileReader"in n)r=new FileReader,r.readAsBinaryString(t),r.onload=function(){i(r.result)};else return i(t.getAsBinary())}function l(n,i,r,u){var o,v,e,s,l=this;c(f[n.id],function(f){o=t.createElement("canvas");o.style.display="none";t.body.appendChild(o);v=o.getContext("2d");e=new Image;e.onerror=e.onabort=function(){u({success:!1})};e.onload=function(){var y,p,t,c;if(i.width||(i.width=e.width),i.height||(i.height=e.height),s=Math.min(i.width/e.width,i.height/e.height),s<1)y=Math.round(e.width*s),p=Math.round(e.height*s);else if(i.quality&&r==="image/jpeg")y=e.width,p=e.height;else{u({success:!1});return}if(o.width=y,o.height=p,v.drawImage(e,0,0,y,p),r==="image/jpeg"&&(t=new h(atob(f.substring(f.indexOf("base64,")+7))),t.headers&&t.headers.length&&(c=new a,c.init(t.get("exif")[0])&&(c.setExif("PixelXDimension",y),c.setExif("PixelYDimension",p),t.set("exif",c.getBinary()),l.hasEventListener("ExifData")&&l.trigger("ExifData",n,c.EXIF()),l.hasEventListener("GpsData")&&l.trigger("GpsData",n,c.GPS())))),i.quality&&r==="image/jpeg")try{f=o.toDataURL(r,i.quality/100)}catch(w){f=o.toDataURL(r)}else f=o.toDataURL(r);f=f.substring(f.indexOf("base64,")+7);f=atob(f);t&&t.headers&&t.headers.length&&(f=t.restore(f),t.purge());o.parentNode.removeChild(o);u({success:!0,data:f})};e.src=f})}function s(){function i(i,r){for(var e=t?0:-8*(r-1),f=0,u=0;u<r;u++)f|=n.charCodeAt(i+u)<<Math.abs(e+u*8);return f}function r(t,i,r){var r=arguments.length===3?r:n.length-i-1;n=n.substr(0,i)+t+n.substr(r+i)}function f(n,i,u){for(var e="",o=t?0:-8*(u-1),f=0;f<u;f++)e+=String.fromCharCode(i>>Math.abs(o+f*8)&255);r(e,n,u)}var t=!1,n;return{II:function(n){if(n===u)return t;t=n},init:function(i){t=!1;n=i},SEGMENT:function(t,i,u){switch(arguments.length){case 1:return n.substr(t,n.length-t-1);case 2:return n.substr(t,i);case 3:r(u,t,i);break;default:return n}},BYTE:function(n){return i(n,1)},SHORT:function(n){return i(n,2)},LONG:function(n,t){if(t===u)return i(n,4);f(n,t,4)},SLONG:function(n){var t=i(n,4);return t>2147483647?t-4294967296:t},STRING:function(n,t){var r="";for(t+=n;n<t;n++)r+=String.fromCharCode(i(n,1));return r}}}function h(n){var e={65505:{app:"EXIF",name:"APP1",signature:"Exif\0"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\0"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\0"}},i=[],t,r,f=u,o=0,c;if(t=new s,t.init(n),t.SHORT(0)===65496){for(r=2,c=Math.min(1048576,n.length);r<=c;){if(f=t.SHORT(r),f>=65488&&f<=65495){r+=2;continue}if(f===65498||f===65497)break;o=t.SHORT(r+2)+2;e[f]&&t.STRING(r+4,e[f].signature.length)===e[f].signature&&i.push({hex:f,app:e[f].app.toUpperCase(),name:e[f].name.toUpperCase(),start:r,length:o,segment:t.SEGMENT(r,o)});r+=o}return t.init(null),{headers:i,restore:function(n){var f,e,u,o;if(t.init(n),f=new h(n),!f.headers)return!1;for(u=f.headers.length;u>0;u--)e=f.headers[u-1],t.SEGMENT(e.start,e.length,"");for(f.purge(),r=t.SHORT(2)==65504?4+t.SHORT(4):2,u=0,o=i.length;u<o;u++)t.SEGMENT(r,0,i[u].segment),r+=i[u].length;return t.SEGMENT()},get:function(n){for(var r=[],t=0,u=i.length;t<u;t++)i[t].app===n.toUpperCase()&&r.push(i[t].segment);return r},set:function(n,t){var u=[],r,f;for(typeof t=="string"?u.push(t):u=t,r=ii=0,f=i.length;r<f;r++)if(i[r].app===n.toUpperCase()&&(i[r].segment=u[ii],i[r].length=u[ii].length,ii++),ii>=u.length)break},purge:function(){i=[];t.init(null)}}}}function a(){function o(i,r){for(var p=n.SHORT(i),f,c,y,s,w,o,a,h=[],v={},l=0;l<p;l++)if(o=w=i+12*l+2,c=r[n.SHORT(o)],c!==u){y=n.SHORT(o+=2);s=n.LONG(o+=2);o+=4;h=[];switch(y){case 1:case 7:for(s>4&&(o=n.LONG(o)+t.tiffHeader),f=0;f<s;f++)h[f]=n.BYTE(o+f);break;case 2:s>4&&(o=n.LONG(o)+t.tiffHeader);v[c]=n.STRING(o,s-1);continue;case 3:for(s>2&&(o=n.LONG(o)+t.tiffHeader),f=0;f<s;f++)h[f]=n.SHORT(o+f*2);break;case 4:for(s>1&&(o=n.LONG(o)+t.tiffHeader),f=0;f<s;f++)h[f]=n.LONG(o+f*4);break;case 5:for(o=n.LONG(o)+t.tiffHeader,f=0;f<s;f++)h[f]=n.LONG(o+f*4)/n.LONG(o+f*4+4);break;case 9:for(o=n.LONG(o)+t.tiffHeader,f=0;f<s;f++)h[f]=n.SLONG(o+f*4);break;case 10:for(o=n.LONG(o)+t.tiffHeader,f=0;f<s;f++)h[f]=n.SLONG(o+f*4)/n.SLONG(o+f*4+4);break;default:continue}a=s==1?h[0]:h;v[c]=e.hasOwnProperty(c)&&typeof a!="object"?e[c][a]:a}return v}function h(){var i=u,r=t.tiffHeader;return(n.II(n.SHORT(r)==18761),n.SHORT(r+=2)!==42)?!1:(t.IFD0=t.tiffHeader+n.LONG(r+=2),i=o(t.IFD0,f.tiff),t.exifIFD="ExifIFDPointer"in i?t.tiffHeader+i.ExifIFDPointer:u,t.gpsIFD="GPSInfoIFDPointer"in i?t.tiffHeader+i.GPSInfoIFDPointer:u,!0)}function c(r,u,e){var o,l,s,h=0,c;if(typeof u=="string"){c=f[r.toLowerCase()];for(hex in c)if(c[hex]===u){u=hex;break}}for(o=t[r.toLowerCase()+"IFD"],l=n.SHORT(o),i=0;i<l;i++)if(s=o+12*i+2,n.SHORT(s)==u){h=s+8;break}return h?(n.LONG(h,e),!0):!1}var n,f,t={},e;return n=new s,f={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},e={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(i){return(t={tiffHeader:10},i===u||!i.length)?!1:(n.init(i),n.SHORT(0)===65505&&n.STRING(4,5).toUpperCase()==="EXIF\0")?h():!1},EXIF:function(){var n,i,u;if(n=o(t.exifIFD,f.exif),n.ExifVersion&&r.typeOf(n.ExifVersion)==="array"){for(i=0,u="";i<n.ExifVersion.length;i++)u+=String.fromCharCode(n.ExifVersion[i]);n.ExifVersion=u}return n},GPS:function(){var n;return n=o(t.gpsIFD,f.gps),n.GPSVersionID&&(n.GPSVersionID=n.GPSVersionID.join(".")),n},setExif:function(n,t){return n!=="PixelXDimension"&&n!=="PixelYDimension"?!1:c("exif",n,t)},getBinary:function(){return n.SEGMENT()}}}var f={},e;r.runtimes.Html5=r.addRuntime("html5",{getFeatures:function(){var i,f,o,s,u,h;return f=o=u=h=!1,n.XMLHttpRequest&&(i=new XMLHttpRequest,o=!!i.upload,f=!!(i.sendAsBinary||i.upload)),f&&(s=!!(i.sendAsBinary||n.Uint8Array&&n.ArrayBuffer),u=!!(File&&(File.prototype.getAsDataURL||n.FileReader)&&s),h=!!(File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice))),e=r.ua.safari&&r.ua.windows,{html5:f,dragdrop:function(){var n=t.createElement("div");return"draggable"in n||"ondragstart"in n&&"ondrop"in n}(),jpgresize:u,pngresize:u,multipart:u||!!n.FileReader||!!n.FormData,canSendBinary:s,cantSendBlobInFormData:!!(r.ua.gecko&&n.FormData&&n.FileReader&&!FileReader.prototype.readAsArrayBuffer),progress:o,chunks:h,multi_selection:!(r.ua.safari&&r.ua.windows),triggerDialog:r.ua.gecko&&n.FormData||r.ua.webkit}},init:function(i,u){function c(n){for(var t,e=[],o,s={},u=0;u<n.length;u++)(t=n[u],s[t.name])||(s[t.name]=!0,o=r.guid(),f[o]=t,e.push(new r.File(o,t.fileName||t.name,t.fileSize||t.size)));e.length&&i.trigger("FilesAdded",e)}var h,s;if(h=this.getFeatures(),!h.html5){u({success:!1});return}i.bind("Init",function(n){var u,f,o=[],s,e,b=n.settings.filters,h,l,a=t.body,v;u=t.createElement("div");u.id=n.id+"_html5_container";r.extend(u.style,{position:"absolute",background:i.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:i.settings.shim_bgcolor?"":0});u.className="plupload html5";i.settings.container&&(a=t.getElementById(i.settings.container),r.getStyle(a,"position")==="static"&&(a.style.position="relative"));a.appendChild(u);n:for(s=0;s<b.length;s++)for(h=b[s].extensions.split(/,/),e=0;e<h.length;e++){if(h[e]==="*"){o=[];break n}l=r.mimeTypes[h[e]];l&&r.inArray(l,o)===-1&&o.push(l)}if(u.innerHTML='<input id="'+i.id+'_html5"  style="font-size:999px" type="file" accept="'+o.join(",")+'" '+(i.settings.multi_selection&&i.features.multi_selection?'multiple="multiple"':"")+" />",u.scrollTop=100,v=t.getElementById(i.id+"_html5"),n.features.triggerDialog?r.extend(v.style,{position:"absolute",width:"100%",height:"100%"}):r.extend(v.style,{cssFloat:"right",styleFloat:"right"}),v.onchange=function(){c(this.files);this.value=""},f=t.getElementById(n.settings.browse_button),f){var y=n.settings.browse_button_hover,p=n.settings.browse_button_active,w=n.features.triggerDialog?f:u;y&&(r.addEvent(w,"mouseover",function(){r.addClass(f,y)},n.id),r.addEvent(w,"mouseout",function(){r.removeClass(f,y)},n.id));p&&(r.addEvent(w,"mousedown",function(){r.addClass(f,p)},n.id),r.addEvent(t.body,"mouseup",function(){r.removeClass(f,p)},n.id));n.features.triggerDialog&&r.addEvent(f,"click",function(i){var r=t.getElementById(n.id+"_html5");r&&!r.disabled&&r.click();i.preventDefault()},n.id)}});i.bind("PostInit",function(){var n=t.getElementById(i.settings.drop_element);if(n){if(e){r.addEvent(n,"dragenter",function(){var u,e,f;u=t.getElementById(i.id+"_drop");u||(u=t.createElement("input"),u.setAttribute("type","file"),u.setAttribute("id",i.id+"_drop"),u.setAttribute("multiple","multiple"),r.addEvent(u,"change",function(){c(this.files);r.removeEvent(u,"change",i.id);u.parentNode.removeChild(u)},i.id),n.appendChild(u));e=r.getPos(n,t.getElementById(i.settings.container));f=r.getSize(n);r.getStyle(n,"position")==="static"&&r.extend(n.style,{position:"relative"});r.extend(u.style,{position:"absolute",display:"block",top:0,left:0,width:f.w+"px",height:f.h+"px",opacity:0})},i.id);return}r.addEvent(n,"dragover",function(n){n.preventDefault()},i.id);r.addEvent(n,"drop",function(n){var t=n.dataTransfer;t&&t.files&&c(t.files);n.preventDefault()},i.id)}});i.bind("Refresh",function(n){var u,e,o,s,f;u=t.getElementById(i.settings.browse_button);u&&(e=r.getPos(u,t.getElementById(n.settings.container)),o=r.getSize(u),s=t.getElementById(i.id+"_html5_container"),r.extend(s.style,{top:e.y+"px",left:e.x+"px",width:o.w+"px",height:o.h+"px"}),i.features.triggerDialog&&(r.getStyle(u,"position")==="static"&&r.extend(u.style,{position:"relative"}),f=parseInt(r.getStyle(u,"zIndex"),10),isNaN(f)&&(f=0),r.extend(u.style,{zIndex:f}),r.extend(s.style,{zIndex:f-1})))});i.bind("DisableBrowse",function(n,i){var r=t.getElementById(n.id+"_html5");r&&(r.disabled=i)});i.bind("CancelUpload",function(){s&&s.abort&&s.abort()});i.bind("UploadFile",function(t,i){function a(n,t,i){var r;if(File.prototype.slice)try{return n.slice(),n.slice(t,i)}catch(u){return n.slice(t,i-t)}else return(r=File.prototype.webkitSlice||File.prototype.mozSlice)?r.call(n,t,i):null}function e(u){function l(){function g(u){var rt=0,nt="----pluploadboundary"+r.guid(),a,tt="--",e="\r\n",c="",it,g;if(s=new XMLHttpRequest,s.upload&&(s.upload.onprogress=function(n){i.loaded=Math.min(i.size,o+n.loaded-rt);t.trigger("UploadProgress",i)}),s.onreadystatechange=function(){var n,e;if(s.readyState==4&&t.state!==r.STOPPED){try{n=s.status}catch(h){n=0}if(n>=400)t.trigger("Error",{code:r.HTTP_ERROR,message:r.translate("HTTP Error."),file:i,status:n});else{if(w){if(e={chunk:f,chunks:w,response:s.responseText,status:n},t.trigger("ChunkUploaded",i,e),o+=b,e.cancelled){i.status=r.FAILED;return}i.loaded=Math.min(i.size,(f+1)*v)}else i.loaded=i.size;t.trigger("UploadProgress",i);u=p=a=c=null;!w||++f>=w?(i.status=r.DONE,t.trigger("FileUploaded",i,{response:s.responseText,status:n})):l()}}},t.settings.multipart&&h.multipart){if(y.name=i.target_name||i.name,s.open("post",k,!0),r.each(t.settings.headers,function(n,t){s.setRequestHeader(t,n)}),typeof u!="string"&&!!n.FormData){a=new FormData;r.each(r.extend(y,t.settings.multipart_params),function(n,t){a.append(t,n)});a.append(t.settings.file_data_name,u);s.send(a);return}if(typeof u=="string"){if(s.setRequestHeader("Content-Type","multipart/form-data; boundary="+nt),r.each(r.extend(y,t.settings.multipart_params),function(n,t){c+=tt+nt+e+'Content-Disposition: form-data; name="'+t+'"'+e+e;c+=unescape(encodeURIComponent(n))+e}),d=r.mimeTypes[i.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",c+=tt+nt+e+'Content-Disposition: form-data; name="'+t.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(i.name))+'"'+e+"Content-Type: "+d+e+e+u+e+tt+nt+tt+e,rt=c.length-u.length,u=c,s.sendAsBinary)s.sendAsBinary(u);else if(h.canSendBinary){for(it=new Uint8Array(u.length),g=0;g<u.length;g++)it[g]=u.charCodeAt(g)&255;s.send(it.buffer)}return}}k=r.buildUrl(t.settings.url,r.extend(y,t.settings.multipart_params));s.open("post",k,!0);s.setRequestHeader("Content-Type","application/octet-stream");r.each(t.settings.headers,function(n,t){s.setRequestHeader(t,n)});s.send(u)}var p,w,y,v,b,d,k=t.settings.url;i.status!=r.DONE&&i.status!=r.FAILED&&t.state!=r.STOPPED&&(y={name:i.target_name||i.name},c.chunk_size&&i.size>c.chunk_size&&(h.chunks||typeof u=="string")?(v=c.chunk_size,w=Math.ceil(i.size/v),b=Math.min(v,i.size-f*v),p=typeof u=="string"?u.substring(f*v,f*v+b):a(u,f*v,f*v+b),y.chunk=f,y.chunks=w):(b=i.size,p=u),t.settings.multipart&&h.multipart&&typeof p!="string"&&e&&h.cantSendBlobInFormData&&h.chunks&&t.settings.chunk_size?(e.onload=function(){g(e.result)},e.readAsBinaryString(p)):g(p))}var f=0,o=0,e="FileReader"in n?new FileReader:null;l()}var c=t.settings,u;u=f[i.id];h.jpgresize&&t.settings.resize&&/\.(png|jpg|jpeg)$/i.test(i.name)?l.call(t,i,t.settings.resize,/\.png$/i.test(i.name)?"image/png":"image/jpeg",function(n){n.success?(i.size=n.data.length,e(n.data)):h.chunks?e(u):o(u,e)}):!h.chunks&&h.jpgresize?o(u,e):e(u)});i.bind("Destroy",function(n){var f,i,e=t.body,u={inputContainer:n.id+"_html5_container",inputFile:n.id+"_html5",browseButton:n.settings.browse_button,dropElm:n.settings.drop_element};for(f in u)i=t.getElementById(u[f]),i&&r.removeAllEvents(i,n.id);r.removeAllEvents(t.body,n.id);n.settings.container&&(e=t.getElementById(n.settings.container));e.removeChild(t.getElementById(u.inputContainer))});u({success:!0})}})}(window,document,plupload),function(n,t,i){function r(n){return t.getElementById(n)}i.runtimes.Html4=i.addRuntime("html4",{getFeatures:function(){return{multipart:!0,triggerDialog:i.ua.gecko&&n.FormData||i.ua.webkit}},init:function(u,f){u.bind("Init",function(f){function b(){var n,o,s,l;e=i.guid();p.push(e);n=t.createElement("form");n.setAttribute("id","form_"+e);n.setAttribute("method","post");n.setAttribute("enctype","multipart/form-data");n.setAttribute("encoding","multipart/form-data");n.setAttribute("target",f.id+"_iframe");n.style.position="absolute";o=t.createElement("input");o.setAttribute("id","input_"+e);o.setAttribute("type","file");o.setAttribute("accept",c);o.setAttribute("size",1);l=r(f.settings.browse_button);f.features.triggerDialog&&l&&i.addEvent(r(f.settings.browse_button),"click",function(n){o.disabled||o.click();n.preventDefault()},f.id);i.extend(o.style,{width:"100%",height:"100%",opacity:0,fontSize:"99px",cursor:"pointer"});i.extend(n.style,{overflow:"hidden"});s=f.settings.shim_bgcolor;s&&(n.style.background=s);d&&i.extend(o.style,{filter:"alpha(opacity=0)"});i.addEvent(o,"change",function(t){var c=t.target,s,h=[];c.value&&(r("form_"+e).style.top="-1048575px",s=c.value.replace(/\\/g,"/"),s=s.substring(s.length,s.lastIndexOf("/")+1),h.push(new i.File(e,s)),f.features.triggerDialog?i.removeEvent(l,"click",f.id):i.removeAllEvents(n,f.id),i.removeEvent(o,"change",f.id),b(),h.length&&u.trigger("FilesAdded",h))},f.id);n.appendChild(o);h.appendChild(n);f.refresh()}function g(){var r=t.createElement("div");r.innerHTML='<iframe id="'+f.id+'_iframe" name="'+f.id+'_iframe" src="'+k+':&quot;&quot;" style="display:none"><\/iframe>';s=r.firstChild;h.appendChild(s);i.addEvent(s,"load",function(t){var r=t.target,e,u;if(o){try{e=r.contentWindow.document||r.contentDocument||n.frames[r.id].document}catch(s){f.trigger("Error",{code:i.SECURITY_ERROR,message:i.translate("Security error."),file:o});return}u=e.body.innerHTML;u&&(o.status=i.DONE,o.loaded=1025,o.percent=100,f.trigger("UploadProgress",o),f.trigger("FileUploaded",o,{response:u}))}},f.id)}var h=t.body,s,k="javascript",o,e,p=[],d=/MSIE/.test(navigator.userAgent),c=[],w=f.settings.filters,a,v,y,l;n:for(a=0;a<w.length;a++)for(v=w[a].extensions.split(/,/),l=0;l<v.length;l++){if(v[l]==="*"){c=[];break n}y=i.mimeTypes[v[l]];y&&i.inArray(y,c)===-1&&c.push(y)}c=c.join(",");f.settings.container&&(h=r(f.settings.container),i.getStyle(h,"position")==="static"&&(h.style.position="relative"));f.bind("UploadFile",function(n,u){var f,s;u.status!=i.DONE&&u.status!=i.FAILED&&n.state!=i.STOPPED&&(f=r("form_"+u.id),s=r("input_"+u.id),s.setAttribute("name",n.settings.file_data_name),f.setAttribute("action",n.settings.url),i.each(i.extend({name:u.target_name||u.name},n.settings.multipart_params),function(n,r){var u=t.createElement("input");i.extend(u,{type:"hidden",name:r,value:n});f.insertBefore(u,f.firstChild)}),o=u,r("form_"+e).style.top="-1048575px",f.submit())});f.bind("FileUploaded",function(n){n.refresh()});f.bind("StateChanged",function(t){t.state==i.STARTED?g():t.state==i.STOPPED&&n.setTimeout(function(){i.removeEvent(s,"load",t.id);s.parentNode&&s.parentNode.removeChild(s)},0);i.each(t.files,function(n){if(n.status===i.DONE||n.status===i.FAILED){var t=r("form_"+n.id);t&&t.parentNode.removeChild(t)}})});f.bind("Refresh",function(n){var u,o,s,h,l,a,c,v,f;u=r(n.settings.browse_button);u&&(l=i.getPos(u,r(n.settings.container)),a=i.getSize(u),c=r("form_"+e),v=r("input_"+e),i.extend(c.style,{top:l.y+"px",left:l.x+"px",width:a.w+"px",height:a.h+"px"}),n.features.triggerDialog&&(i.getStyle(u,"position")==="static"&&i.extend(u.style,{position:"relative"}),f=parseInt(u.style.zIndex,10),isNaN(f)&&(f=0),i.extend(u.style,{zIndex:f}),i.extend(c.style,{zIndex:f-1})),s=n.settings.browse_button_hover,h=n.settings.browse_button_active,o=n.features.triggerDialog?u:c,s&&(i.addEvent(o,"mouseover",function(){i.addClass(u,s)},n.id),i.addEvent(o,"mouseout",function(){i.removeClass(u,s)},n.id)),h&&(i.addEvent(o,"mousedown",function(){i.addClass(u,h)},n.id),i.addEvent(t.body,"mouseup",function(){i.removeClass(u,h)},n.id)))});u.bind("FilesRemoved",function(n,t){for(var u,i=0;i<t.length;i++)u=r("form_"+t[i].id),u&&u.parentNode.removeChild(u)});u.bind("DisableBrowse",function(n,i){var r=t.getElementById("input_"+e);r&&(r.disabled=i)});u.bind("Destroy",function(n){var o,u,f,s={inputContainer:"form_"+e,inputFile:"input_"+e,browseButton:n.settings.browse_button};for(o in s)u=r(s[o]),u&&i.removeAllEvents(u,n.id);i.removeAllEvents(t.body,n.id);i.each(p,function(n){f=r("form_"+n);f&&h.removeChild(f)})});b()});f({success:!0})}})}(window,document,plupload),function(){var n,v,u,d,g,r,y,nt,tt,f,it,p,e,t,o,s,i,h,rt,ut,w,c,ft,b,l,k,et=[].slice,ot={}.hasOwnProperty,a=function(n,t){function r(){this.constructor=n}for(var i in t)ot.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n};n=this.jQuery;h=function(){function t(t,i){this.$el=n(t);this.options=n.extend({},this.defaults,i)}return t.prototype.defaults={},t.prototype.destroy=function(){return this._deinit()},t.prototype._init=function(){return null},t.prototype._deinit=function(){return null},t.register=function(i,r){var e,o,s,u,f;return u=function(){return"simple_widget_"+r},f=function(i,r){var u;return u=n.data(i,r),u&&u instanceof t?u:null},o=function(t,r){var o,e,c,h,s,l;for(o=u(),s=0,l=t.length;s<l;s++)e=t[s],c=f(e,o),c||(h=new i(e,r),n.data(e,o)||n.data(e,o,h),h._init());return t},s=function(t){var r,e,o,i,h,s;for(r=u(),s=[],i=0,h=t.length;i<h;i++)e=t[i],o=f(e,r),o&&o.destroy(),s.push(n.removeData(e,r));return s},e=function(i,r,f){var c,h,e,o,s,l;for(h=null,s=0,l=i.length;s<l;s++)c=i[s],e=n.data(c,u()),e&&e instanceof t&&(o=e[r],o&&typeof o=="function"&&(h=o.apply(e,f)));return h},n.fn[r]=function(){var t,r,n,i,u;return(n=arguments[0],r=2<=arguments.length?et.call(arguments,1):[],t=this,n===void 0||typeof n=="object")?(u=n,o(t,u)):typeof n=="string"&&n[0]!=="_"?(i=n,i==="destroy"?s(t):e(t,i,r)):void 0}},t}();this.SimpleWidget=h;it=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return a(i,t),i.is_mouse_handled=!1,i.prototype._init=function(){return this.$el.bind("mousedown.mousewidget",n.proxy(this._mouseDown,this)),this.$el.bind("touchstart.mousewidget",n.proxy(this._touchStart,this)),this.is_mouse_started=!1,this.mouse_delay=0,this._mouse_delay_timer=null,this._is_mouse_delay_met=!0,this.mouse_down_info=null},i.prototype._deinit=function(){var t;return this.$el.unbind("mousedown.mousewidget"),this.$el.unbind("touchstart.mousewidget"),t=n(document),t.unbind("mousemove.mousewidget"),t.unbind("mouseup.mousewidget")},i.prototype._mouseDown=function(n){var t;if(n.which===1)return t=this._handleMouseDown(n,this._getPositionInfo(n)),t&&n.preventDefault(),t},i.prototype._handleMouseDown=function(n,t){if(!i.is_mouse_handled)return(this.is_mouse_started&&this._handleMouseUp(t),this.mouse_down_info=t,!this._mouseCapture(t))?void 0:(this._handleStartMouse(),this.is_mouse_handled=!0,!0)},i.prototype._handleStartMouse=function(){var t;return t=n(document),t.bind("mousemove.mousewidget",n.proxy(this._mouseMove,this)),t.bind("touchmove.mousewidget",n.proxy(this._touchMove,this)),t.bind("mouseup.mousewidget",n.proxy(this._mouseUp,this)),t.bind("touchend.mousewidget",n.proxy(this._touchEnd,this)),this.mouse_delay?this._startMouseDelayTimer():void 0},i.prototype._startMouseDelayTimer=function(){return this._mouse_delay_timer&&clearTimeout(this._mouse_delay_timer),this._mouse_delay_timer=setTimeout(function(n){return function(){return n._is_mouse_delay_met=!0}}(this),this.mouse_delay),this._is_mouse_delay_met=!1},i.prototype._mouseMove=function(n){return this._handleMouseMove(n,this._getPositionInfo(n))},i.prototype._handleMouseMove=function(n,t){return this.is_mouse_started?(this._mouseDrag(t),n.preventDefault()):this.mouse_delay&&!this._is_mouse_delay_met?!0:(this.is_mouse_started=this._mouseStart(this.mouse_down_info)!==!1,this.is_mouse_started?this._mouseDrag(t):this._handleMouseUp(t),!this.is_mouse_started)},i.prototype._getPositionInfo=function(n){return{page_x:n.pageX,page_y:n.pageY,target:n.target,original_event:n}},i.prototype._mouseUp=function(n){return this._handleMouseUp(this._getPositionInfo(n))},i.prototype._handleMouseUp=function(t){var i;i=n(document);i.unbind("mousemove.mousewidget");i.unbind("touchmove.mousewidget");i.unbind("mouseup.mousewidget");i.unbind("touchend.mousewidget");this.is_mouse_started&&(this.is_mouse_started=!1,this._mouseStop(t))},i.prototype._mouseCapture=function(){return!0},i.prototype._mouseStart=function(){return null},i.prototype._mouseDrag=function(){return null},i.prototype._mouseStop=function(){return null},i.prototype.setMouseDelay=function(n){return this.mouse_delay=n},i.prototype._touchStart=function(n){var t;if(!(n.originalEvent.touches.length>1))return t=n.originalEvent.changedTouches[0],this._handleMouseDown(n,this._getPositionInfo(t))},i.prototype._touchMove=function(n){var t;if(!(n.originalEvent.touches.length>1))return t=n.originalEvent.changedTouches[0],this._handleMouseMove(n,this._getPositionInfo(t))},i.prototype._touchEnd=function(n){var t;if(!(n.originalEvent.touches.length>1))return t=n.originalEvent.changedTouches[0],this._handleMouseUp(this._getPositionInfo(t))},i}(h);this.Tree={};n=this.jQuery;t={getName:function(n){return t.strings[n-1]},nameToIndex:function(n){for(var i,u=i=1,r=t.strings.length;1<=r?i<=r:i>=r;u=1<=r?++i:--i)if(t.strings[u-1]===n)return u;return 0}};t.BEFORE=1;t.AFTER=2;t.INSIDE=3;t.NONE=4;t.strings=["before","after","inside","none"];this.Tree.Position=t;p=function(){function i(n,t,r){t==null&&(t=!1);r==null&&(r=i);this.setData(n);this.children=[];this.parent=null;t&&(this.id_mapping={},this.tree=this,this.node_class=r)}return i.prototype.setData=function(n){var t,r,i;if(typeof n!="object")return this.name=n;i=[];for(t in n)r=n[t],t==="label"?i.push(this.name=r):i.push(this[t]=r);return i},i.prototype.initFromData=function(n){var t,i;return i=function(n){return function(i){return n.setData(i),i.children?t(i.children):void 0}}(this),t=function(n){return function(t){for(var u,r,i=0,f=t.length;i<f;i++)u=t[i],r=new n.tree.node_class(""),r.initFromData(u),n.addChild(r);return null}}(this),i(n),null},i.prototype.loadFromData=function(n){var r,t,i,u;for(this.removeChildren(),i=0,u=n.length;i<u;i++)t=n[i],r=new this.tree.node_class(t),this.addChild(r),typeof t=="object"&&t.children&&r.loadFromData(t.children);return null},i.prototype.addChild=function(n){return this.children.push(n),n._setParent(this)},i.prototype.addChildAtPosition=function(n,t){return this.children.splice(t,0,n),n._setParent(this)},i.prototype._setParent=function(n){return this.parent=n,this.tree=n.tree,this.tree.addNodeToIndex(this)},i.prototype.removeChild=function(n){return n.removeChildren(),this._removeChild(n)},i.prototype._removeChild=function(n){return this.children.splice(this.getChildIndex(n),1),this.tree.removeNodeFromIndex(n)},i.prototype.getChildIndex=function(t){return n.inArray(t,this.children)},i.prototype.hasChildren=function(){return this.children.length!==0},i.prototype.isFolder=function(){return this.hasChildren()||this.load_on_demand},i.prototype.iterate=function(n){var t;return t=function(i){return function(r,u){var e,s,f,h,o;if(r.children){for(o=r.children,f=0,h=o.length;f<h;f++)e=o[f],s=n(e,u),i.hasChildren()&&s&&t(e,u+1);return null}}}(this),t(this,0),null},i.prototype.moveNode=function(n,i,r){if(!n.isParentOf(i))return(n.parent._removeChild(n),r===t.AFTER)?i.parent.addChildAtPosition(n,i.parent.getChildIndex(i)+1):r===t.BEFORE?i.parent.addChildAtPosition(n,i.parent.getChildIndex(i)):r===t.INSIDE?i.addChildAtPosition(n,0):void 0},i.prototype.getData=function(){var n;return n=function(){return function(t){var e,i,r,u,o,f,s;for(e=[],f=0,s=t.length;f<s;f++){r=t[f];u={};for(i in r)o=r[i],i!=="parent"&&i!=="children"&&i!=="element"&&i!=="tree"&&Object.prototype.hasOwnProperty.call(r,i)&&(u[i]=o);r.hasChildren()&&(u.children=n(r.children));e.push(u)}return e}}(this),n(this.children)},i.prototype.getNodeByName=function(n){var t;return t=null,this.iterate(function(i){return i.name===n?(t=i,!1):!0}),t},i.prototype.addAfter=function(n){var i,t;return this.parent?(t=new this.tree.node_class(n),i=this.parent.getChildIndex(this),this.parent.addChildAtPosition(t,i+1),t):null},i.prototype.addBefore=function(n){var i,t;return this.parent?(t=new this.tree.node_class(n),i=this.parent.getChildIndex(this),this.parent.addChildAtPosition(t,i),t):null},i.prototype.addParent=function(n){var f,t,i,r,e,u;if(this.parent){for(t=new this.tree.node_class(n),t._setParent(this.tree),i=this.parent,u=i.children,r=0,e=u.length;r<e;r++)f=u[r],t.addChild(f);return i.children=[],i.addChild(t),t}return null},i.prototype.remove=function(){if(this.parent)return this.parent.removeChild(this),this.parent=null},i.prototype.append=function(n){var t;return t=new this.tree.node_class(n),this.addChild(t),t},i.prototype.prepend=function(n){var t;return t=new this.tree.node_class(n),this.addChildAtPosition(t,0),t},i.prototype.isParentOf=function(n){for(var t=n.parent;t;){if(t===this)return!0;t=t.parent}return!1},i.prototype.getLevel=function(){for(var t=0,n=this;n.parent;)t+=1,n=n.parent;return t},i.prototype.getNodeById=function(n){return this.id_mapping[n]},i.prototype.addNodeToIndex=function(n){if(n.id!=null)return this.id_mapping[n.id]=n},i.prototype.removeNodeFromIndex=function(n){if(n.id!=null)return delete this.id_mapping[n.id]},i.prototype.removeChildren=function(){return this.iterate(function(n){return function(t){return n.tree.removeNodeFromIndex(t),!0}}(this)),this.children=[]},i.prototype.getPreviousSibling=function(){var n;return this.parent?(n=this.parent.getChildIndex(this)-1,n>=0?this.parent.children[n]:null):null},i.prototype.getNextSibling=function(){var n;return this.parent?(n=this.parent.getChildIndex(this)+1,n<this.parent.children.length?this.parent.children[n]:null):null},i}();this.Tree.Node=p;g=function(){function t(n){this.tree_widget=n;this.opened_icon_text=this.getHtmlText(n.options.openedIcon);this.closed_icon_text=this.getHtmlText(n.options.closedIcon)}return t.prototype.render=function(n){return n&&n.parent?this.renderFromNode(n):this.renderFromRoot()},t.prototype.renderNode=function(t){var i,f,r,u;return n(t.element).remove(),r=new e(t.parent,this.tree_widget),f=r.getUl(),i=this.createLi(t),this.attachNodeData(t,i),u=t.getPreviousSibling(),u?n(u.element).after(i):r.getUl().prepend(i),t.children?this.renderFromNode(t):void 0},t.prototype.renderFromRoot=function(){var n;return n=this.tree_widget.element,n.empty(),this.createDomElements(n[0],this.tree_widget.tree.children,!0,!0)},t.prototype.renderFromNode=function(n){var t;return t=this.tree_widget._getNodeElementForNode(n),t.getUl().remove(),this.createDomElements(t.$element[0],n.children,!1,!1)},t.prototype.createDomElements=function(n,t,i){var r,u,e,f,o;for(e=this.createUl(i),n.appendChild(e),f=0,o=t.length;f<o;f++)r=t[f],u=this.createLi(r),e.appendChild(u),this.attachNodeData(r,u),r.hasChildren()&&this.createDomElements(u,r.children,!1,r.is_open);return null},t.prototype.attachNodeData=function(t,i){return t.element=i,n(i).data("node",t)},t.prototype.createUl=function(n){var i,t;return i=n?"jqtree-tree":"",t=document.createElement("ul"),t.className="jqtree_common "+i,t},t.prototype.createLi=function(t){var i;if(i=t.isFolder()?this.createFolderLi(t):this.createNodeLi(t),this.tree_widget.options.onCreateLi)this.tree_widget.options.onCreateLi(t,n(i));return i},t.prototype.createFolderLi=function(n){var f,e,i,t,o,s,r,u;return e=this.getButtonClasses(n),s=this.getFolderClasses(n),o=this.escapeIfNecessary(n.name),f=n.is_open?this.opened_icon_text:this.closed_icon_text,r=document.createElement("li"),r.className="jqtree_common "+s,t=document.createElement("div"),t.className="jqtree-element jqtree_common",r.appendChild(t),i=document.createElement("a"),i.className="jqtree_common "+e,i.appendChild(document.createTextNode(f)),t.appendChild(i),u=document.createElement("span"),u.className="jqtree_common jqtree-title",t.appendChild(u),u.innerHTML=o,r},t.prototype.createNodeLi=function(n){var f,t,e,i,u,r;return u=["jqtree_common"],this.tree_widget.select_node_handler&&this.tree_widget.select_node_handler.isNodeSelected(n)&&u.push("jqtree-selected"),f=u.join(" "),e=this.escapeIfNecessary(n.name),i=document.createElement("li"),i.className=f,t=document.createElement("div"),t.className="jqtree-element jqtree_common",i.appendChild(t),r=document.createElement("span"),r.className="jqtree-title jqtree_common",r.innerHTML=e,t.appendChild(r),i},t.prototype.getButtonClasses=function(n){var t;return t=["jqtree-toggler"],n.is_open||t.push("jqtree-closed"),t.join(" ")},t.prototype.getFolderClasses=function(n){var t;return t=["jqtree-folder"],n.is_open||t.push("jqtree-closed"),this.tree_widget.select_node_handler&&this.tree_widget.select_node_handler.isNodeSelected(n)&&t.push("jqtree-selected"),t.join(" ")},t.prototype.escapeIfNecessary=function(n){return this.tree_widget.options.autoEscape?ut(n):n},t.prototype.getHtmlText=function(t){return n(document.createElement("div")).html(t).text()},t}();tt=function(h){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,h),c.prototype.defaults={autoOpen:!1,saveState:!1,dragAndDrop:!1,selectable:!0,useContextMenu:!0,onCanSelectNode:null,onSetStateFromStorage:null,onGetStateFromStorage:null,onCreateLi:null,onIsMoveHandle:null,onCanMove:null,onCanMoveTo:null,onLoadFailed:null,autoEscape:!0,dataUrl:null,closedIcon:"&#x25ba;",openedIcon:"&#x25bc;",slide:!0,nodeClass:p,dataFilter:null,keyboardSupport:!0,openFolderDelay:500},c.prototype.toggle=function(n,t){return t==null&&(t=!0),n.is_open?this.closeNode(n,t):this.openNode(n,t)},c.prototype.getTree=function(){return this.tree},c.prototype.selectNode=function(n){return this._selectNode(n,!1)},c.prototype._selectNode=function(n,t){var r,u,f,i;if(t==null&&(t=!1),this.select_node_handler){if(r=function(t){return function(){return t.options.onCanSelectNode?t.options.selectable&&t.options.onCanSelectNode(n):t.options.selectable}}(this),f=function(t){return function(){var i;return i=n.parent,i&&i.parent&&!i.is_open?t.openNode(i,!1):void 0}}(this),i=function(n){return function(){if(n.options.saveState)return n.save_state_handler.saveState()}}(this),!n){this._deselectCurrentNode();i();return}if(r())return this.select_node_handler.isNodeSelected(n)?t&&(this._deselectCurrentNode(),this._triggerEvent("tree.select",{node:null,previous_node:n})):(u=this.getSelectedNode(),this._deselectCurrentNode(),this.addToSelection(n),this._triggerEvent("tree.select",{node:n,deselected_node:u}),f()),i()}},c.prototype.getSelectedNode=function(){return this.select_node_handler.getSelectedNode()},c.prototype.toJson=function(){return JSON.stringify(this.tree.getData())},c.prototype.loadData=function(n,t){return this._loadData(n,t)},c.prototype.loadDataFromUrl=function(t,i,r){return n.type(t)!=="string"&&(r=i,i=t,t=null),this._loadDataFromUrl(t,i,r)},c.prototype.reload=function(){return this.loadDataFromUrl()},c.prototype._loadDataFromUrl=function(t,i,u){var f,o,s,e;return f=null,o=function(n){return function(){var t;return i?(t=new r(i,n),f=t.getLi()):f=n.element,f.addClass("jqtree-loading")}}(this),e=function(){return function(){if(f)return f.removeClass("jqtree-loading")}}(this),s=function(){return function(){return n.type(t)==="string"&&(t={url:t}),t.method?void 0:t.method="get"}}(this),o(),t||(t=this._getDataUrlInfo(i)),s(),n.ajax({url:t.url,data:t.data,type:t.method.toUpperCase(),cache:!1,dataType:"json",success:function(t){return function(r){var f;return f=n.isArray(r)||typeof r=="object"?r:n.parseJSON(r),t.options.dataFilter&&(f=t.options.dataFilter(f)),e(),t._loadData(f,i),u&&n.isFunction(u)?u():void 0}}(this),error:function(n){return function(t){if(e(),n.options.onLoadFailed)return n.options.onLoadFailed(t)}}(this)})},c.prototype._loadData=function(n,t){var u,r,i,f;if(n){if(this._triggerEvent("tree.load_data",{tree_data:n}),t){for(r=this.select_node_handler.getSelectedNodesUnder(t),i=0,f=r.length;i<f;i++)u=r[i],this.select_node_handler.removeFromSelection(u);t.loadFromData(n);t.load_on_demand=!1;this._refreshElements(t.parent)}else this._initTree(n);if(this.is_dragging)return this.dnd_handler.refreshHitAreas()}},c.prototype.getNodeById=function(n){return this.tree.getNodeById(n)},c.prototype.getNodeByName=function(n){return this.tree.getNodeByName(n)},c.prototype.openNode=function(n,t){return t==null&&(t=!0),this._openNode(n,t)},c.prototype._openNode=function(n,t,i){var f,u;if(t==null&&(t=!0),f=function(n){return function(t,i,u){var f;return f=new r(t,n),f.open(u,i)}}(this),n.isFolder()){if(n.load_on_demand)return this._loadFolderOnDemand(n,t,i);for(u=n.parent;u&&!u.is_open;)u.parent&&f(u,!1,null),u=u.parent;return f(n,t,i),this._saveState()}},c.prototype._loadFolderOnDemand=function(n,t,i){return t==null&&(t=!0),this._loadDataFromUrl(null,n,function(r){return function(){return r._openNode(n,t,i)}}(this))},c.prototype.closeNode=function(n,t){return t==null&&(t=!0),n.isFolder()?(new r(n,this).close(t),this._saveState()):void 0},c.prototype.isDragging=function(){return this.is_dragging},c.prototype.refreshHitAreas=function(){return this.dnd_handler.refreshHitAreas()},c.prototype.addNodeAfter=function(n,t){var i;return i=t.addAfter(n),this._refreshElements(t.parent),i},c.prototype.addNodeBefore=function(n,t){var i;return i=t.addBefore(n),this._refreshElements(t.parent),i},c.prototype.addParentNode=function(n,t){var i;return i=t.addParent(n),this._refreshElements(i.parent),i},c.prototype.removeNode=function(n){var t;return t=n.parent,t?(this.select_node_handler.removeFromSelection(n,!0),n.remove(),this._refreshElements(t.parent)):void 0},c.prototype.appendNode=function(n,t){var i,r;return t||(t=this.tree),i=t.isFolder(),r=t.append(n),i?this._refreshElements(t):this._refreshElements(t.parent),r},c.prototype.prependNode=function(n,t){var i;return t||(t=this.tree),i=t.prepend(n),this._refreshElements(t),i},c.prototype.updateNode=function(n,t){var i;return i=t.id&&t.id!==n.id,i&&this.tree.removeNodeFromIndex(n),n.setData(t),i&&this.tree.addNodeToIndex(n),this.renderer.renderNode(n),this._selectCurrentNode()},c.prototype.moveNode=function(n,i,r){var u;return u=t.nameToIndex(r),this.tree.moveNode(n,i,u),this._refreshElements()},c.prototype.getStateFromStorage=function(){return this.save_state_handler.getStateFromStorage()},c.prototype.addToSelection=function(n){return this.select_node_handler.addToSelection(n),this._getNodeElementForNode(n).select()},c.prototype.getSelectedNodes=function(){return this.select_node_handler.getSelectedNodes()},c.prototype.isNodeSelected=function(n){return this.select_node_handler.isNodeSelected(n)},c.prototype.removeFromSelection=function(n){return this.select_node_handler.removeFromSelection(n),this._getNodeElementForNode(n).deselect()},c.prototype.scrollToNode=function(t){var i,r;return i=n(t.element),r=i.offset().top-this.$el.offset().top,this.scroll_handler.scrollTo(r)},c.prototype.getState=function(){return this.save_state_handler.getState()},c.prototype.setState=function(n){return this.save_state_handler.setState(n),this._refreshElements()},c.prototype.setOption=function(n,t){return this.options[n]=t},c.prototype._init=function(){return c.__super__._init.call(this),this.element=this.$el,this.mouse_delay=300,this.is_initialized=!1,this.renderer=new g(this),typeof o!="undefined"&&o!==null?this.save_state_handler=new o(this):this.options.saveState=!1,typeof i!="undefined"&&i!==null&&(this.select_node_handler=new i(this)),typeof u!="undefined"&&u!==null?this.dnd_handler=new u(this):this.options.dragAndDrop=!1,typeof s!="undefined"&&s!==null&&(this.scroll_handler=new s(this)),typeof f!="undefined"&&f!==null&&typeof i!="undefined"&&i!==null&&(this.key_handler=new f(this)),this._initData(),this.element.click(n.proxy(this._click,this)),this.element.dblclick(n.proxy(this._dblclick,this)),this.options.useContextMenu?this.element.bind("contextmenu",n.proxy(this._contextmenu,this)):void 0},c.prototype._deinit=function(){return this.element.empty(),this.element.unbind(),this.key_handler.deinit(),this.tree=null,c.__super__._deinit.call(this)},c.prototype._initData=function(){return this.options.data?this._loadData(this.options.data):this._loadDataFromUrl(this._getDataUrlInfo())},c.prototype._getDataUrlInfo=function(t){var i,r;return i=this.options.dataUrl||this.element.data("url"),r=function(n){return function(){var r,f,u;return u={url:i},t&&t.id?(r={node:t.id},u.data=r):(f=n._getNodeIdToBeSelected(),f&&(r={selected_node:f},u.data=r)),u}}(this),n.isFunction(i)?i(t):n.type(i)==="string"?r():i},c.prototype._getNodeIdToBeSelected=function(){return this.options.saveState?this.save_state_handler.getNodeIdToBeSelected():null},c.prototype._initTree=function(n){return this.tree=new this.options.nodeClass(null,!0,this.options.nodeClass),this.select_node_handler&&this.select_node_handler.clear(),this.tree.loadFromData(n),this._openNodes(),this._refreshElements(),this.is_initialized?void 0:(this.is_initialized=!0,this._triggerEvent("tree.init"))},c.prototype._openNodes=function(){var n;if(!this.options.saveState||!this.save_state_handler.restoreState())return this.options.autoOpen===!1?void 0:(n=this.options.autoOpen===!0?-1:parseInt(this.options.autoOpen),this.tree.iterate(function(t,i){return t.hasChildren()&&(t.is_open=!0),i!==n}))},c.prototype._refreshElements=function(n){return n==null&&(n=null),this.renderer.render(n),this._triggerEvent("tree.refresh")},c.prototype._click=function(n){var t,r,i;if(t=this._getClickTarget(n.target),t){if(t.type==="button")return this.toggle(t.node,this.options.slide),n.preventDefault(),n.stopPropagation();if(t.type==="label"&&(i=t.node,r=this._triggerEvent("tree.click",{node:i,click_event:n}),!r.isDefaultPrevented()))return this._selectNode(i,!0)}},c.prototype._dblclick=function(n){var t;return t=this._getClickTarget(n.target),t&&t.type==="label"?this._triggerEvent("tree.dblclick",{node:t.node,click_event:n}):void 0},c.prototype._getClickTarget=function(t){var r,u,f,i;if(f=n(t),r=f.closest(".jqtree-toggler"),r.length){if(i=this._getNode(r),i)return{type:"button",node:i}}else if(u=f.closest(".jqtree-element"),u.length&&(i=this._getNode(u),i))return{type:"label",node:i};return null},c.prototype._getNode=function(n){var t;return t=n.closest("li"),t.length===0?null:t.data("node")},c.prototype._getNodeElementForNode=function(n){return n.isFolder()?new r(n,this):new e(n,this)},c.prototype._getNodeElement=function(n){var t;return t=this._getNode(n),t?this._getNodeElementForNode(t):null},c.prototype._contextmenu=function(t){var i,r;return i=n(t.target).closest("ul.jqtree-tree .jqtree-element"),i.length&&(r=this._getNode(i),r)?(t.preventDefault(),t.stopPropagation(),this._triggerEvent("tree.contextmenu",{node:r,click_event:t}),!1):void 0},c.prototype._saveState=function(){if(this.options.saveState)return this.save_state_handler.saveState()},c.prototype._mouseCapture=function(n){return this.options.dragAndDrop?this.dnd_handler.mouseCapture(n):!1},c.prototype._mouseStart=function(n){return this.options.dragAndDrop?this.dnd_handler.mouseStart(n):!1},c.prototype._mouseDrag=function(n){var t;return this.options.dragAndDrop?(t=this.dnd_handler.mouseDrag(n),this.scroll_handler&&this.scroll_handler.checkScrolling(),t):!1},c.prototype._mouseStop=function(n){return this.options.dragAndDrop?this.dnd_handler.mouseStop(n):!1},c.prototype._triggerEvent=function(t,i){var r;return r=n.Event(t),n.extend(r,i),this.element.trigger(r),r},c.prototype.testGenerateHitAreas=function(n){return this.dnd_handler.current_item=this._getNodeElementForNode(n),this.dnd_handler.generateHitAreas(),this.dnd_handler.hit_areas},c.prototype._selectCurrentNode=function(){var n,t;return n=this.getSelectedNode(),n&&(t=this._getNodeElementForNode(n),t)?t.select():void 0},c.prototype._deselectCurrentNode=function(){var n;return n=this.getSelectedNode(),n?this.removeFromSelection(n):void 0},c}(it);h.register(tt,"tree");e=function(){function i(n,t){this.init(n,t)}return i.prototype.init=function(t,i){return this.node=t,this.tree_widget=i,this.$element=n(t.element)},i.prototype.getUl=function(){return this.$element.children("ul:first")},i.prototype.getSpan=function(){return this.$element.children(".jqtree-element").find("span.jqtree-title")},i.prototype.getLi=function(){return this.$element},i.prototype.addDropHint=function(n){return n===t.INSIDE?new v(this.$element):new y(this.node,this.$element,n)},i.prototype.select=function(){return this.getLi().addClass("jqtree-selected")},i.prototype.deselect=function(){return this.getLi().removeClass("jqtree-selected")},i}();r=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return a(i,n),i.prototype.open=function(n,t){var i,r;return t==null&&(t=!0),this.node.is_open?void 0:(this.node.is_open=!0,i=this.getButton(),i.removeClass("jqtree-closed"),i.html(this.tree_widget.options.openedIcon),r=function(t){return function(){return t.getLi().removeClass("jqtree-closed"),n&&n(),t.tree_widget._triggerEvent("tree.open",{node:t.node})}}(this),t?this.getUl().slideDown("fast",r):(this.getUl().show(),r()))},i.prototype.close=function(n){var t,i;return n==null&&(n=!0),this.node.is_open?(this.node.is_open=!1,t=this.getButton(),t.addClass("jqtree-closed"),t.html(this.tree_widget.options.closedIcon),i=function(n){return function(){return n.getLi().addClass("jqtree-closed"),n.tree_widget._triggerEvent("tree.close",{node:n.node})}}(this),n?this.getUl().slideUp("fast",i):(this.getUl().hide(),i())):void 0},i.prototype.getButton=function(){return this.$element.children(".jqtree-element").find("a.jqtree-toggler")},i.prototype.addDropHint=function(n){return this.node.is_open||n!==t.INSIDE?new y(this.node,this.$element,n):new v(this.$element)},i}(e);ut=function(n){return(""+n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};k=function(n,t){for(var u,r,i=r=0,f=n.length;r<f;i=++r)if(u=n[i],u===t)return i;return-1};w=function(n,t){return n.indexOf?n.indexOf(t):k(n,t)};this.Tree.indexOf=w;this.Tree._indexOf=k;this.JSON!=null&&this.JSON.stringify!=null&&typeof this.JSON.stringify=="function"||(c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,ft={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},b=function(n){return c.lastIndex=0,c.test(n)?'"'+n.replace(c,function(n){var t;return t=ft[n],typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'},l=function(n,t){var u,f,r,e,i,o,s;i=t[n];switch(typeof i){case"string":return b(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(r=[],Object.prototype.toString.apply(i)==="[object Array]"){for(u=o=0,s=i.length;o<s;u=++o)e=i[u],r[u]=l(u,i)||"null";return r.length===0?"[]":"["+r.join(",")+"]"}for(f in i)Object.prototype.hasOwnProperty.call(i,f)&&(e=l(f,i),e&&r.push(b(f)+":"+e));return r.length===0?"{}":"{"+r.join(",")+"}"}},this.JSON==null&&(this.JSON={}),this.JSON.stringify=function(n){return l("",{"":n})});o=function(){function t(n){this.tree_widget=n}return t.prototype.saveState=function(){var t;return(t=JSON.stringify(this.getState()),this.tree_widget.options.onSetStateFromStorage)?this.tree_widget.options.onSetStateFromStorage(t):this.supportsLocalStorage()?localStorage.setItem(this.getCookieName(),t):n.cookie?(n.cookie.raw=!0,n.cookie(this.getCookieName(),t,{path:"/"})):void 0},t.prototype.restoreState=function(){var t;return t=this.getStateFromStorage(),t?(this.setState(n.parseJSON(t)),!0):!1},t.prototype.getStateFromStorage=function(){return this.tree_widget.options.onGetStateFromStorage?this.tree_widget.options.onGetStateFromStorage():this.supportsLocalStorage()?localStorage.getItem(this.getCookieName()):n.cookie?(n.cookie.raw=!0,n.cookie(this.getCookieName())):null},t.prototype.getState=function(){var n,t,i;return n=[],this.tree_widget.tree.iterate(function(){return function(t){return t.is_open&&t.id&&t.hasChildren()&&n.push(t.id),!0}}(this)),t=this.tree_widget.getSelectedNode(),i=t?t.id:"",{open_nodes:n,selected_node:i}},t.prototype.setState=function(n){var r,t,i;if(n&&(r=n.open_nodes,i=n.selected_node,this.tree_widget.tree.iterate(function(){return function(n){return n.is_open=n.id&&n.hasChildren()&&w(r,n.id)>=0,!0}}(this)),i&&this.tree_widget.select_node_handler&&(this.tree_widget.select_node_handler.clear(),t=this.tree_widget.getNodeById(i),t)))return this.tree_widget.select_node_handler.addToSelection(t)},t.prototype.getCookieName=function(){return typeof this.tree_widget.options.saveState=="string"?this.tree_widget.options.saveState:"tree"},t.prototype.supportsLocalStorage=function(){var n;return n=function(){var t,n;if(typeof localStorage=="undefined"||localStorage===null)return!1;try{n="_storage_test";sessionStorage.setItem(n,!0);sessionStorage.removeItem(n)}catch(i){return t=i,!1}return!0},this._supportsLocalStorage==null&&(this._supportsLocalStorage=n()),this._supportsLocalStorage},t.prototype.getNodeIdToBeSelected=function(){var i,t;return t=this.getStateFromStorage(),t?(i=n.parseJSON(t),i.selected_node):null},t}();i=function(){function n(n){this.tree_widget=n;this.clear()}return n.prototype.getSelectedNode=function(){var n;return n=this.getSelectedNodes(),n.length?n[0]:!1},n.prototype.getSelectedNodes=function(){var i,n,t;if(this.selected_single_node)return[this.selected_single_node];t=[];for(i in this.selected_nodes)n=this.tree_widget.getNodeById(i),n&&t.push(n);return t},n.prototype.getSelectedNodesUnder=function(n){var r,t,i;if(this.selected_single_node)return n.isParentOf(selected_single_node)?this.selected_single_node:null;i=[];for(r in this.selected_nodes)t=this.tree_widget.getNodeById(r),t&&n.isParentOf(t)&&i.push(t);return i},n.prototype.isNodeSelected=function(n){return n.id?this.selected_nodes[n.id]:this.selected_single_node?this.selected_single_node.element===n.element:!1},n.prototype.clear=function(){return this.selected_nodes={},this.selected_single_node=null},n.prototype.removeFromSelection=function(n,t){if(t==null&&(t=!1),n.id){if(delete this.selected_nodes[n.id],t)return n.iterate(function(t){return function(){return delete t.selected_nodes[n.id],!0}}(this))}else if(this.selected_single_node&&n.element===this.selected_single_node.element)return this.selected_single_node=null},n.prototype.addToSelection=function(n){return n.id?this.selected_nodes[n.id]=!0:this.selected_single_node=n},n}();u=function(){function i(n){this.tree_widget=n;this.hovered_area=null;this.$ghost=null;this.hit_areas=[];this.is_dragging=!1}return i.prototype.mouseCapture=function(t){var r,i;return(r=n(t.target),this.tree_widget.options.onIsMoveHandle&&!this.tree_widget.options.onIsMoveHandle(r))?null:(i=this.tree_widget._getNodeElement(r),i&&this.tree_widget.options.onCanMove&&(this.tree_widget.options.onCanMove(i.node)||(i=null)),this.current_item=i,this.current_item!==null)},i.prototype.mouseStart=function(t){var i;return this.refreshHitAreas(),i=n(t.target).offset(),this.drag_element=new d(this.current_item.node,t.page_x-i.left,t.page_y-i.top,this.tree_widget.element),this.is_dragging=!0,this.current_item.$element.addClass("jqtree-moving"),!0},i.prototype.mouseDrag=function(n){var t,i;return this.drag_element.move(n.page_x,n.page_y),t=this.findHoveredArea(n.page_x,n.page_y),i=this.canMoveToArea(t),i&&t?this.hovered_area!==t&&(this.hovered_area=t,this.mustOpenFolderTimer(t)&&this.startOpenFolderTimer(t.node),this.updateDropHint()):(this.removeHover(),this.removeDropHint(),this.stopOpenFolderTimer()),!0},i.prototype.canMoveToArea=function(n){var i;if(n){if(this.tree_widget.options.onCanMoveTo){i=t.getName(n.position);return this.tree_widget.options.onCanMoveTo(this.current_item.node,n.node,i)}return!0}return!1},i.prototype.mouseStop=function(n){return this.moveItem(n),this.clear(),this.removeHover(),this.removeDropHint(),this.removeHitAreas(),this.current_item&&this.current_item.$element.removeClass("jqtree-moving"),this.is_dragging=!1,!1},i.prototype.refreshHitAreas=function(){return this.removeHitAreas(),this.generateHitAreas()},i.prototype.removeHitAreas=function(){return this.hit_areas=[]},i.prototype.clear=function(){return this.drag_element.remove(),this.drag_element=null},i.prototype.removeDropHint=function(){if(this.previous_ghost)return this.previous_ghost.remove()},i.prototype.removeHover=function(){return this.hovered_area=null},i.prototype.generateHitAreas=function(){var n;return n=new nt(this.tree_widget.tree,this.current_item.node,this.getTreeDimensions().bottom),this.hit_areas=n.generate()},i.prototype.findHoveredArea=function(n,t){var r,i,u,f,e;if(i=this.getTreeDimensions(),n<i.left||t<i.top||n>i.right||t>i.bottom)return null;for(f=0,u=this.hit_areas.length;f<u;)if(e=f+u>>1,r=this.hit_areas[e],t<r.top)u=e;else if(t>r.bottom)f=e+1;else return r;return null},i.prototype.mustOpenFolderTimer=function(n){var i;return i=n.node,i.isFolder()&&!i.is_open&&n.position===t.INSIDE},i.prototype.updateDropHint=function(){var n;if(this.hovered_area)return this.removeDropHint(),n=this.tree_widget._getNodeElementForNode(this.hovered_area.node),this.previous_ghost=n.addDropHint(this.hovered_area.position)},i.prototype.startOpenFolderTimer=function(n){var t;return t=function(t){return function(){return t.tree_widget._openNode(n,t.tree_widget.options.slide,function(){return t.refreshHitAreas(),t.updateDropHint()})}}(this),this.stopOpenFolderTimer(),this.open_folder_timer=setTimeout(t,this.tree_widget.options.openFolderDelay)},i.prototype.stopOpenFolderTimer=function(){if(this.open_folder_timer)return clearTimeout(this.open_folder_timer),this.open_folder_timer=null},i.prototype.moveItem=function(n){var u,e,i,r,o,f;if(this.hovered_area&&this.hovered_area.position!==t.NONE&&this.canMoveToArea(this.hovered_area)&&(i=this.current_item.node,f=this.hovered_area.node,r=this.hovered_area.position,o=i.parent,r===t.INSIDE&&(this.hovered_area.node.is_open=!0),u=function(n){return function(){return n.tree_widget.tree.moveNode(i,f,r),n.tree_widget.element.empty(),n.tree_widget._refreshElements()}}(this),e=this.tree_widget._triggerEvent("tree.move",{move_info:{moved_node:i,target_node:f,position:t.getName(r),previous_parent:o,do_move:u,original_event:n.original_event}}),!e.isDefaultPrevented()))return u()},i.prototype.getTreeDimensions=function(){var n;return n=this.tree_widget.element.offset(),{left:n.left,top:n.top,right:n.left+this.tree_widget.element.width(),bottom:n.top+this.tree_widget.element.height()+16}},i}();rt=function(){function t(n){this.tree=n}return t.prototype.iterate=function(){var i,t;return i=!0,t=function(r){return function(u,f){var e,v,l,o,s,h,a,c;if(s=(u.is_open||!u.element)&&u.hasChildren(),u.element){if(e=n(u.element),!e.is(":visible"))return;i&&(r.handleFirstNode(u,e),i=!1);u.hasChildren()?u.is_open?r.handleOpenFolder(u,e)||(s=!1):r.handleClosedFolder(u,f,e):r.handleNode(u,f,e)}if(s){for(l=u.children.length,c=u.children,o=h=0,a=c.length;h<a;o=++h)v=c[o],o===l-1?t(u.children[o],null):t(u.children[o],u.children[o+1]);if(u.is_open)return r.handleAfterOpenFolder(u,f,e)}}}(this),t(this.tree,null)},t.prototype.handleNode=function(){},t.prototype.handleOpenFolder=function(){},t.prototype.handleClosedFolder=function(){},t.prototype.handleAfterOpenFolder=function(){},t.prototype.handleFirstNode=function(){},t}();nt=function(i){function r(n,t,i){r.__super__.constructor.call(this,n);this.current_node=t;this.tree_bottom=i}return a(r,i),r.prototype.generate=function(){return this.positions=[],this.last_top=0,this.iterate(),this.generateHitAreas(this.positions)},r.prototype.getTop=function(n){return n.offset().top},r.prototype.addPosition=function(n,t,i){var r;return r={top:i,node:n,position:t},this.positions.push(r),this.last_top=i},r.prototype.handleNode=function(n,i,r){var u;return u=this.getTop(r),n===this.current_node?this.addPosition(n,t.NONE,u):this.addPosition(n,t.INSIDE,u),i===this.current_node||n===this.current_node?this.addPosition(n,t.NONE,u):this.addPosition(n,t.AFTER,u)},r.prototype.handleOpenFolder=function(n,i){return n===this.current_node?!1:(n.children[0]!==this.current_node&&this.addPosition(n,t.INSIDE,this.getTop(i)),!0)},r.prototype.handleClosedFolder=function(n,i,r){var u;return(u=this.getTop(r),n===this.current_node)?this.addPosition(n,t.NONE,u):(this.addPosition(n,t.INSIDE,u),i!==this.current_node)?this.addPosition(n,t.AFTER,u):void 0},r.prototype.handleFirstNode=function(i){if(i!==this.current_node)return this.addPosition(i,t.BEFORE,this.getTop(n(i.element)))},r.prototype.handleAfterOpenFolder=function(n,i){return n===this.current_node.node||i===this.current_node.node?this.addPosition(n,t.NONE,this.last_top):this.addPosition(n,t.AFTER,this.last_top)},r.prototype.generateHitAreas=function(n){var t,u,i,r,f,e;for(r=-1,t=[],u=[],f=0,e=n.length;f<e;f++)i=n[f],i.top!==r&&t.length&&(t.length&&this.generateHitAreasForGroup(u,t,r,i.top),r=i.top,t=[]),t.push(i);return this.generateHitAreasForGroup(u,t,r,this.tree_bottom),u},r.prototype.generateHitAreasForGroup=function(n,t,i,r){var e,u,f,o,s;for(s=Math.min(t.length,4),e=Math.round((r-i)/s),u=i,f=0;f<s;)o=t[f],n.push({top:u,bottom:u+e,node:o.node,position:o.position}),u+=e,f+=1;return null},r}(rt);d=function(){function t(t,i,r,u){this.offset_x=i;this.offset_y=r;this.$element=n('<span class="jqtree-title jqtree-dragging">'+t.name+"<\/span>");this.$element.css("position","absolute");u.append(this.$element)}return t.prototype.move=function(n,t){return this.$element.offset({left:n-this.offset_x,top:t-this.offset_y})},t.prototype.remove=function(){return this.$element.remove()},t}();y=function(){function i(i,r,u){this.$element=r;this.node=i;this.$ghost=n('<li class="jqtree_common jqtree-ghost"><span class="jqtree_common jqtree-circle"><\/span><span class="jqtree_common jqtree-line"><\/span><\/li>');u===t.AFTER?this.moveAfter():u===t.BEFORE?this.moveBefore():u===t.INSIDE&&(i.isFolder()&&i.is_open?this.moveInsideOpenFolder():this.moveInside())}return i.prototype.remove=function(){return this.$ghost.remove()},i.prototype.moveAfter=function(){return this.$element.after(this.$ghost)},i.prototype.moveBefore=function(){return this.$element.before(this.$ghost)},i.prototype.moveInsideOpenFolder=function(){return n(this.node.children[0].element).before(this.$ghost)},i.prototype.moveInside=function(){return this.$element.after(this.$ghost),this.$ghost.addClass("jqtree-inside")},i}();v=function(){function t(t){var i,r;i=t.children(".jqtree-element");r=t.width()-4;this.$hint=n('<span class="jqtree-border"><\/span>');i.append(this.$hint);this.$hint.css({width:r,height:i.height()-4})}return t.prototype.remove=function(){return this.$hint.remove()},t}();s=function(){function t(n){this.tree_widget=n;this.previous_top=-1;this._initScrollParent()}return t.prototype._initScrollParent=function(){var t,r,i;return r=function(t){return function(){var r,u,f,i,o,e;if(r=["overflow","overflow-y"],f=function(t){for(var u,e,i=0,f=r.length;i<f;i++)if(u=r[i],(e=n.css(t,u))==="auto"||e==="scroll")return!0;return!1},f(t.tree_widget.$el[0]))return t.tree_widget.$el;for(e=t.tree_widget.$el.parents(),i=0,o=e.length;i<o;i++)if(u=e[i],f(u))return n(u);return null}}(this),i=function(n){return function(){return n.scroll_parent_top=0,n.$scroll_parent=null}}(this),this.tree_widget.$el.css("position")==="fixed"&&i(),t=r(),t&&t.length&&t[0].tagName!=="HTML"?(this.$scroll_parent=t,this.scroll_parent_top=this.$scroll_parent.offset().top):i()},t.prototype.checkScrolling=function(){var n;return n=this.tree_widget.dnd_handler.hovered_area,n&&n.top!==this.previous_top?(this.previous_top=n.top,this.$scroll_parent?this._handleScrollingWithScrollParent(n):this._handleScrollingWithDocument(n)):void 0},t.prototype._handleScrollingWithScrollParent=function(n){var t;return(t=this.scroll_parent_top+this.$scroll_parent[0].offsetHeight-n.bottom,t<20)?(this.$scroll_parent[0].scrollTop+=20,this.tree_widget.refreshHitAreas(),this.previous_top=-1):n.top-this.scroll_parent_top<20?(this.$scroll_parent[0].scrollTop-=20,this.tree_widget.refreshHitAreas(),this.previous_top=-1):void 0},t.prototype._handleScrollingWithDocument=function(t){var i;return(i=t.top-n(document).scrollTop(),i<20)?n(document).scrollTop(n(document).scrollTop()-20):n(window).height()-(t.bottom-n(document).scrollTop())<20?n(document).scrollTop(n(document).scrollTop()+20):void 0},t.prototype.scrollTo=function(t){var i;return this.$scroll_parent?this.$scroll_parent[0].scrollTop=t:(i=this.tree_widget.$el.offset().top,n(document).scrollTop(t+i))},t.prototype.isScrolledIntoView=function(t){var i,f,r,e,u;return i=n(t),this.$scroll_parent?(u=0,e=this.$scroll_parent.height(),r=i.offset().top-this.scroll_parent_top,f=r+i.height()):(u=n(window).scrollTop(),e=u+n(window).height(),r=i.offset().top,f=r+i.height()),f<=e&&r>=u},t}();f=function(){function t(t){this.tree_widget=t;t.options.keyboardSupport&&n(document).bind("keydown.jqtree",n.proxy(this.handleKeyDown,this))}var i,r,u,f;return r=37,f=38,u=39,i=40,t.prototype.deinit=function(){return n(document).unbind("keydown.jqtree")},t.prototype.handleKeyDown=function(t){var e,s,h,c,l,a,o;if(this.tree_widget.options.keyboardSupport){if(n(document.activeElement).is("textarea,input"))return!0;if(e=this.tree_widget.getSelectedNode(),o=function(t){return function(i){return i?(t.tree_widget.selectNode(i),t.tree_widget.scroll_handler&&!t.tree_widget.scroll_handler.isScrolledIntoView(n(i.element).find(".jqtree-element"))&&t.tree_widget.scrollToNode(i),!1):!0}}(this),h=function(n){return function(){return o(n.getNextNode(e))}}(this),a=function(n){return function(){return o(n.getPreviousNode(e))}}(this),l=function(n){return function(){return e.isFolder()&&!e.is_open?(n.tree_widget.openNode(e),!1):!0}}(this),c=function(n){return function(){return e.isFolder()&&e.is_open?(n.tree_widget.closeNode(e),!1):!0}}(this),e){s=t.which;switch(s){case i:return h();case f:return a();case u:return l();case r:return c()}}else return!0}},t.prototype.getNextNode=function(n,t){var i;return t==null&&(t=!0),t&&n.hasChildren()&&n.is_open?n.children[0]:n.parent?(i=n.getNextSibling(),i?i:this.getNextNode(n.parent,!1)):null},t.prototype.getPreviousNode=function(n){var t;return n.parent?(t=n.getPreviousSibling(),t?t.hasChildren()&&t.is_open?this.getLastChild(t):t:n.parent.parent?n.parent:null):null},t.prototype.getLastChild=function(n){var t;return n.hasChildren()?(t=n.children[n.children.length-1],t.hasChildren()&&t.is_open?this.getLastChild(t):t):null},t}()}.call(this),function(n){n.fn.ctvchart=function(t){function o(t){n.error(u+": "+t)}var i={primary:ctv.constants.Colors.Charts.LineChart.Blue,secondary:ctv.constants.Colors.Charts.LineChart.LightGray,tertiary:ctv.constants.Colors.Charts.LineChart.Gray},u="ctvchart",f={Json:{data:[{label:null,data:null,color:i.tertiary},{label:null,data:null,color:i.primary}],ui:{legend:{show:!1},lines:{show:!0,fill:!0,lineWidth:1.5},points:{show:!0,radius:2.8,lineWidth:1.5},shadowSize:0,grid:{color:i.secondary,borderWidth:{top:1,right:0,left:2,bottom:2},borderColor:{bottom:i.secondary,left:i.secondary,top:i.secondary,right:null},clickable:!0,hoverable:!0,margin:10,markings:[{yaxis:{from:null,to:null},xaxis:null,color:i.secondary},{xaxis:{from:null,to:null},yaxis:null,color:i.primary}]},xaxis:{ticks:[[null,null],[null,null],[null,null],[null,null]]},yaxis:{ticks:[[null,null],[null,null]],tickLength:0}}},target:null,debug:!1},e={init:function(t){var e=f.Json,o=t.Json,s=t.target,i=n.extend(!0,e,o);r.data(u)||(r.data(u,f),n.plot(s[0],i.data,i.ui))}},r;if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).ctvchart(t)});if(r=n(this),e[t])return f=r.data(u),e[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)o("Method "+t+" does not exist.");else return e.init.apply(this,arguments)}}(jQuery,window),function(n,t){n.fn.ctvcrop=function(r){function l(){u.cropCtrls.find(".cancel-crop").on("click."+e,s);f.on("change."+e,a);v()}function a(){var t=f.closest("form");t.ctvform({fnJson:function(i){t.resetForm();var r=new Image;r.src=i.Data.url;r.onload=function(){h(r);n.extend(u.formData,{fileName:i.Data.fileName,contentType:i.Data.contentType,tempFileId:i.Data.tempFileId})}}});t.trigger("submit")}function v(){u.cropCtrls.find("button:submit").on("click",function(t){t.preventDefault();n.ajax({cache:!1,url:u.urlSave,type:"post",data:u.formData,beforeSend:function(){u.cropCtrls.addClass("ajax-form")},complete:function(){u.cropCtrls.removeClass("ajax-form")},success:function(n){s();u.fnDone(n.Data.url)}})})}function y(){u.cropCtrls.find(".cancel-crop").on("click."+e,s);f.on("change."+e,p);w()}function p(t){for(var e=t.target.files,r,i=0;r=e[i];i++)if(r.type.match("image.*")){var o="cropImg"+i,f=new FileReader;f.onprogress=function(n){var t,i;n.lengthComputable&&(t=Math.round(n.loaded/n.total*100),t<100&&(i=t+"%"))};f.onerror=function(){alert("an error occurred uploading your file.")};f.onload=function(){return function(t){var i=u.cropPhoto?n("#"+u.cropPhoto).get(0):new Image;i.id=o;i.onload=function(){h(i)};i.src=t.target.result}}(r);f.readAsDataURL(r)}}function w(){u.form.ctvform({formData:function(){return o.formData(!0)},fnJson:function(n){s();u.fnDone(n.Data.url)}})}function s(){f.replaceWith(f.clone(!0));var t=n("<img />",{id:u.cropPhoto});u.cropArea.empty().append(t).hide();u.cropCtrls.hide()}function h(t){var e=n(t),f;u.cropArea.empty().append(t).show();var i=u.cropArea.width(),r=t.width,o=t.height;r>i&&(f=i*o/r,e.width(i).height(f));u.cropArea.append(t);u.cropCtrls.show();b(t);n("body").animate({scrollTop:u.cropArea.offset().top},100)}function b(t){var s,a,h;t=n(t);var c=u.cropMinWidth,l=u.cropMinHeight,r=t.width(),i=t.height(),f=c/l,e=r,o=i;n.extend(u.formData,{newWidth:r,newHeight:i});u.cropMaintianAspectRatio&&(s=r/f,s<=i?(e=r,o=Math.floor(s)):(a=i*f,e=Math.floor(a),o=i));h={onSelect:k,allowSelect:!1,minSize:[c,l],setSelect:[0,0,e,o],boxWidth:u.boxWidth};u.cropMaintianAspectRatio&&(h.aspectRatio=f);t.Jcrop(h)}function k(t){n.extend(u.formData,{x:Math.round(t.x),y:Math.round(t.y),w:Math.round(t.w),h:Math.round(t.h)})}var c={triggers:[],cropMinHeight:0,cropMinWidth:0,cropMaintianAspectRatio:!0,boxWidth:0,traditional:!1,fnDone:function(){},formData:{x:0,y:0,w:0,h:0,newHeight:0,newWidth:0,fileName:null,contentType:null,tempFileId:null}},f,e="ctvcrop",u={},o={init:function(r){var s,h,o,a,v;for(n.extend(u,c,r),u.traditional=u.traditional||!t.File||!t.FileReader||!t.FileList||!t.Blob,s=f.closest("form"),u.traditional&&(u.urlSave=s.attr("action"),h=n("<form />",{"class":"vh",action:"/file/tempphoto",method:"post",enctype:"multipart/form-data"}),h.append(f.detach()),n("body").append(h)),i.isFirefox&&f.closest("label").addClass("btn-file-overlay"),o=0,a=u.triggers.length;o<a;o++)n(u.triggers[o]).on("click",function(){f.trigger("click")});u.form=s;u.cropCtrls=u.form.find(".crop-ctrls");u.cropArea=u.form.find(".crop-area");v=f.data(e);v||f.data(e,u);u.traditional?l():y()},formData:function(n){if(n){var t=[];return t.push({name:"X",value:u.formData.x}),t.push({name:"Y",value:u.formData.y}),t.push({name:"W",value:u.formData.w}),t.push({name:"H",value:u.formData.h}),t.push({name:"NewHeight",value:u.formData.newHeight}),t.push({name:"NewWidth",value:u.formData.newWidth}),t.push({name:"FileName",value:u.formData.fileName||""}),t.push({name:"ContentType",value:u.formData.contentType||""}),t.push({name:"TempFileId",value:u.formData.tempFileId||""}),t}return u.formData}};if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).ctvcrop(r)});if(f=n(this),!f.is("input:file"))return n.error("jQuery."+e+" only supports file input types."),this;if(o[r])return u=f.data(e),o[r].apply(this,Array.prototype.slice.call(arguments,1));if(typeof r!="object"&&r)n.error("Method "+r+" does not exist on jQuery."+e);else return o.init.apply(this,arguments)};var i={isOpera:!!t.opera||navigator.userAgent.indexOf("Opera")>=0,isFirefox:typeof InstallTrigger!="undefined",isSafari:Object.prototype.toString.call(t.HTMLElement).indexOf("Constructor")>0,isChrome:!!t.chrome,isIE:/*@cc_on!@*/!1}}(jQuery,window),function(n,t){n.fn.ctvfilter=function(i){function s(){if(u.find(".ctrls-row").length)n("<a />").prependTo(u).addClass("link-search-tools").text("Search Tools").append('<span class="icof icof-down"><\/span>').on("click",function(){n(this).siblings(".ctrls-row").andSelf().toggleClass("open")})}function h(){u.on("submit",function(n){n.preventDefault();e()});u.on("change","select:not([data-ctvfilter-ignore]), input:checkbox:not([data-ctvfilter-ignore])",e);var t=null;u.on("keydown",".finder",function(){t&&clearTimeout(t);t=setTimeout(e,r.finderDelay)});u.on("click","input:radio:not([data-ctvfilter-ignore])",function(){var i=n(this),t,r;i.addClass("checked").siblings("input:radio").removeClass("checked");t=i.siblings(".is-desc");t&&t.length>0&&(r=t.is(":checked"),t.attr("checked",!r),r?t.removeClass("checked"):t.addClass("checked"));i.siblings().addClass("fake").removeClass("fake");e();i.trigger("update.btn-group")}).trigger("update.btn-group")}function e(){r.target.animate({opacity:0},100,function(){r.target.ctvload({bEmptyContainer:r.bEmptyContainer,data:function(){var n=u.serialize();return n+"&isFilterRequest=true"},type:u.attr("method"),url:r.url,fnBeforeSend:r.fnBeforeSend(),fnHtml:function(n){r.fnSuccess(n);r.target.animate({opacity:1},100)}})})}var u,f="ctvfilter",r={bEmptyContainer:!0,finderDelay:500,forceGridView:null,target:"#target",url:null,fnInit:function(){},fnBeforeSend:function(){},fnSuccess:function(){}},o={init:function(i){function c(){return n(t).width()<(r.forceGridView||0)&&o.isListDisplay()}n.extend(r,i);r.url=u.attr("action");r.type=u.attr("method");r.target&&typeof r.target=="string"&&(r.target=n(r.target));var l=u.data(f);l||u.data(f,r);h();s();r.fnInit();n(t).on("resize",function(){var t=n(this).width();c()&&(u.find("#DisplayViewgrid").attr("checked",!0),e())});c()&&n(t).trigger("resize")},isListDisplay:function(){return u.find('input[name*="Display"]:checked').val()=="list"}};if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).ctvfilter(i)});if(u=n(this),!u.is("form"))return n.error("jQuery."+f+" only supports form elements"),this;if(o[i])return r=u.data(f),o[i].apply(this,Array.prototype.slice.call(arguments,1));if(typeof i!="object"&&i)n.error("Method "+i+" does not exist on jQuery."+f);else return o.init.apply(this,arguments)}}(jQuery,window),function(n){n.fn.ctvform=function(t){function h(){o(!1)}function c(t,r,u){var f,o,e;for(n.ctvnoty.clear(),t.length==0&&t.push({name:"a",value:"0"}),f=i.formData,typeof f=="function"&&(f=f()),o=f.length,e=0;e<o;e++)t.push({name:f[e].name,value:f[e].value});return i.fnBeforeSubmit(t,r,u)}function l(n,t){v();o(!0);i.fnComplete(n,t)}function e(t,r,u){n.ctvnoty.error({text:u});i.fnError(t,r,u)}function a(t,u,f){if(t){var o=f.getResponseHeader("content-type")||"";(o==""||o.indexOf("html")>-1)&&t.indexOf('"Success":')>-1&&t.indexOf('"Error":')>-1&&(o="application/json",t=n.parseJSON(t));o.indexOf("html")>-1?i.fnHtml(t):o.indexOf("json")>-1&&(t.Error.length>0?e(f,u,t.Error):t.Info.length>0?n.ctvnoty.info({text:t.Info}):(i.fnSuccess(t,u,f),i.fnJson(t,u,f),t.Success.length>0&&n.ctvnoty.success({text:t.Success}),i.bAutoCloseModal?n.ctvmodal("close"):i.bResetOnSuccess&&r.get(0).reset(),t.Redirect&&setTimeout(function(){location.href=t.Redirect},i.redirectDelay)))}}function o(t){var i=r.find("button:submit"),u;if(loadIconTarget=i.data("loadIconTarget")?n("body").find(i.data("loadIconTarget")):i.parent(),u=i.siblings().andSelf(),u.length)if(t)loadIconTarget.removeClass("ajax-form"),u.removeAttr("disabled").removeClass("disabled").off(".disabled");else{loadIconTarget.addClass("ajax-form");u.attr("disabled","disabled").addClass("disabled").on("click.disabled",function(n){return n.stopImmediatePropagation(),n.preventDefault(),!1})}}function v(){n.watermark&&n.watermark.showAll()}function s(t){n.error(u+": "+t)}var r,u="ctvform",i={bAutoCloseModal:!1,bAutoSave:!1,bHideSaveButton:!1,bResetOnSuccess:!1,data:{},formData:[],messages:{},redirectDelay:500,rules:{},target:null,fnBeforeSerialize:function(){},fnBeforeSubmit:function(){return!0},fnComplete:function(){},fnError:function(){},fnSuccess:function(){},fnHtml:function(){},fnJson:function(){}},f={init:function(t){n.extend(i,t);var f=r.data(u);if(f||r.data(u,i),r.attr("novalidate")!=="novalidate"&&r.ctvvalidate({messages:i.messages,rules:i.rules}),i.bAutoSave){r.on("change","input, textarea, select",function(){r.trigger("submit")});i.bHideSaveButton}r.ajaxForm({beforeSend:h,beforeSerialize:i.fnBeforeSerialize,beforeSubmit:c,cache:!1,complete:l,error:e,success:a,target:i.target})}};if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).ctvform(t)});if(r=n(this),!r.is("form"))return s("Only supports form elements."),this;if(f[t])return i=r.data(u),f[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)s("Method "+t+" does not exist.");else return f.init.apply(this,arguments)}}(jQuery),function(n){var t="state"in window.history&&window.history.state!==null,i=location.href;n(window).on("popstate",function(n){var f=!t&&location.href==i,r,u;if(t=!0,!f){r=n.state;u=location.href;r&&(u=r.url||location.href);window.location=u;return}})}(jQuery),function(n){n.fn.ctvImageDefer=function(t){if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).ctvImageDefer(t)});var i=n.extend({},{attr:"data-src"},t),r=n(this);r.find("["+i.attr+"]").each(function(){var t=n(this),r=t.data("src");t.attr("src",r).removeAttr(i.attr)})}}(jQuery,window),function(n){n.ctvload=function(t,i){n.ajax({cache:i.cache,data:i.data,type:i.type,url:i.url,beforeSend:function(){i.bEmptyContainer&&t.empty();i.loader===!0?t.addClass("ajax-load"):i.loader.jquery&&i.loader.addClass("ajax-load");i.fnBeforeSend()},complete:function(){i.loader===!0?t.removeClass("ajax-load"):i.loader.jquery&&i.loader.removeClass("ajax-load")},error:function(t,r,u){n.ctvnoty.error({text:u});i.fnError()},success:function(r,u,f){var e=f.getResponseHeader("content-type")||"";e.indexOf("html")>-1?(i.contentReplace?t.replaceWith(r):i.contentAppend?t.append(r):i.contentFill&&t.html(r),i.fnHtml(r),n.ctvload.always(t)):e.indexOf("json")>-1&&i.fnJson(r)}})};n.ctvload.always=function(){};n.ctvload.defaults={cache:!1,data:{},type:"get",url:null,bEmptyContainer:!0,loader:!0,contentAppend:!1,contentFill:!0,contentReplace:!1,fnBeforeSend:function(){},fnHtml:function(){},fnJson:function(){},fnError:function(){}};n.fn.ctvload=function(t){return this.length==0?this:this.length>=1?this.each(function(){var i=n.extend({},n.ctvload.defaults,t);typeof i.data=="function"&&(i.data=i.data());n.ctvload(n(this),i)}):void 0}}(jQuery,window),function(n){n.fn.ctvmeter=function(t){function e(n){return n=="red"?"#ff5336":n=="green"?"#68bd45":n.indexOf("#")==0&&n.substr("1").length==6?n:"#00a9e3"}function o(){var f=!Modernizr.canvas&&r.data("percent")==0?i.trackColor:i.barColor,e=Modernizr.canvas?1e3:0,n=r.data("size"),t=n==="lg",u=n==="sm",n=t?200:u?43:90,o=t?28:u?7:14;r.easyPieChart({size:n,barColor:f,trackColor:i.trackColor,scaleColor:!1,lineCap:"butt",lineWidth:o,animate:e})}var r,u="ctvmeter",i={barColor:"blue",trackColor:"#eee"},f={init:function(t){n.extend(i,t);i.barColor=e(i.barColor);var f=r.data(u);f||r.data(u,i);o()}};if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).ctvmeter(t)});if(r=n(this),f[t])return i=r.data(u),f[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method "+t+" does not exist on jQuery."+u);else return f.init.apply(this,arguments)}}(jQuery,window),function(n,t){n.ctvmodal=function(t){var i="ctvmodal",u={bodyOpenClass:"reveal-open",closeText:"Cancel",closeTrigger:"modal-close",containTabbing:!0,persistUrl:!1,theme:{modalWrap:"reveal-wrap reveal-modal",modalContent:"reveal-content"},fnAddCloseButton:function(t,i,r,u){var f=i.find(".buttons, .footer"),e;f.length==0&&(f=n("<div />",{"class":"footer buttons"}),i.append(f));e=n("<button />",{type:"button","class":["btn-action","gray",r].join(" ")}).html(u).appendTo(f)}},r={init:function(t){t=n.extend(u,t);var r=n("#"+i);r.length||(r=n("<div />",{id:i,"class":t.theme.modalWrap}).append('<div class="modal-content '+t.theme.modalContent+'"><\/div>').prependTo("body"));t.isLarge&&r.addClass("reveal-large");r.ctvmodal(t)},update:function(t){n("#"+i).ctvmodal("update",t)},close:function(t){n("#"+i).ctvmodal("close",t);n("#ctvmodal .select2-offscreen").select2("close")}};if(r[t])return r[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method "+t+" does not exist on jQuery."+i);else return r.init.apply(this,arguments)};n.ctvsuper=function(t){var i="ctvsuper",u={bodyOpenClass:"supr-open",closeText:"Close",closeTrigger:"supr-close",containTabbing:!1,disableOn:1120,persistUrl:!0,theme:{modalWrap:"supr-wrap supr-modal",modalContent:"supr-content"},fnAddCloseButton:function(t,i,r,u){var f=n("<button />",{title:u+" (Esc)",type:"button","class":r}).html("&times;<br/><span>"+u+"<\/span>").prependTo(t)}},r={init:function(t){t=n.extend(u,t);var r=n("#"+i);r.length||(r=n("<div />",{id:i,"class":t.theme.modalWrap}).append('<div class="modal-content '+t.theme.modalContent+'"><\/div>').prependTo("body"));r.ctvmodal(t)},update:function(t){n("#"+i).ctvmodal("update",t)},close:function(t){n("#"+i).ctvmodal("close",t)}};if(r[t])return r[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method "+t+" does not exist on jQuery."+i);else return r.init.apply(this,arguments)};n.ctvsuper2=function(t){var i="ctvsuper2",u={bodyOpenClass:"supr-open",closeText:"Close",closeTrigger:"supr2-close",containTabbing:!1,disableOn:1120,persistUrl:!0,theme:{modalWrap:"supr2-wrap supr2-modal",modalContent:"supr2-content"},fnAddCloseButton:function(){return}},r={init:function(t){t=n.extend(u,t);var r=n("#"+i);r.length||(r=n("<div />",{id:i,"class":t.theme.modalWrap}).append('<div class="modal-content '+t.theme.modalContent+'"><\/div>').prependTo("body"));r.ctvmodal(t)},update:function(t){n("#"+i).ctvmodal("update",t)},close:function(t){n("#"+i).ctvmodal("close",t)},get:function(){return n("#"+i)},isOpen:function(){return n("body").hasClass(u.bodyOpenClass)}};if(r[t])return r[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method "+t+" does not exist on jQuery."+i);else return r.init.apply(this,arguments)};n.fn.ctvmodal=function(i){function l(i){return i!==undefined&&(n.isFunction(i)&&i()||typeof i=="number"&&n(t).width()<i)?!1:!0}function c(){r.url?e.ctvload({cache:!1,data:r.data,type:r.type,url:r.url,fnHtml:function(){s();y()}}):r.html?(e.html(r.html),ctv&&ctv.initDynamicContent(e),s()):r.templateId&&(n.Mustache.addFromDom(r.templateId),e.mustache(r.templateId,r.templateModel,{method:"append"}),ctv&&ctv.initDynamicContent(e),s())}function s(){r.fnAddCloseButton(f,e,r.closeTrigger,r.closeText);n("body").addClass(r.bodyOpenClass);v();a();r.fnAfterLoad(f)}function a(){e.find("[autofocus], :tabbable:first").focus()}function v(){r.containTabbing&&e.bind("keydown."+u,function(t){if(t.keyCode===h.TAB){var i=n(":tabbable",this),r=i.filter(":first"),u=i.filter(":last");if(t.target!==u[0]||t.shiftKey){if(t.target===r[0]&&t.shiftKey)return u.focus(),!1}else return r.focus(),!1}})}function y(){if(Modernizr&&Modernizr.history&&r.persistUrl){n(this).data(u+"UrlData",{url:document.location.href,title:document.title});var t=r.url;history.pushState(null,null,t)}}function p(){if(Modernizr&&Modernizr.history&&r.persistUrl){var t=n(this).data(u+"UrlData")||{};history.pushState(null,t.title,t.url)}}function w(t){n.error(u+": "+t)}var u="ctvmodal",r={data:{},type:"get",url:null,fnAfterLoad:function(){},fnAddCloseButton:function(){},bodyOpenClass:"modal-open",closeText:"Close",closeTrigger:"btn-close",containTabbing:!1,disableOn:null,persistUrl:!1,theme:"modal"},f,e,h={TAB:9,ESC:27},o={init:function(t){if(n.extend(r,t),!l(t.disableOn)){location.href=t.url;return}n("body").on("keydown."+u,function(t){t.which==h.ESC&&(o.close(),n.ctvnoty&&n.ctvnoty.clear())});f.on("click."+u,"."+r.closeTrigger,function(t){t.preventDefault();o.close();n.ctvnoty&&n.ctvnoty.clear()});n.ctvnoty&&n.ctvnoty.clear();c();f.data(u,r)},open:function(){},update:function(t){n.extend(r,t);c()},close:function(){f.find(".select2-offscreen").select2("close");f.fadeOut(100,function(){f.remove();n("body").off(u).removeClass(r.bodyOpenClass);p()})}};if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).ctvmodal(i)});if(f=n(this),e=f.find(".modal-content"),o[i])return r=f.data(u),o[i].apply(this,Array.prototype.slice.call(arguments,1));if(typeof i!="object"&&i)w("Method "+i+" does not exist.");else return o.init.apply(this,arguments)};n.ctvconfirm=function(t){var i="ctvconfirm",r={bodyOpenClass:"reveal-open",containTabbing:!0,persistUrl:!1,theme:{modalWrap:"reveal-wrap reveal-modal",modalContent:"reveal-content"},fnAddCloseButton:n.noop,fnAfterLoad:function(n){n.on("click",r.attrYesTrigger,function(){r.fnOnYes();u.close()});n.on("click",r.attrNoTrigger,function(){r.fnOnNo();u.close()})},attrYesTrigger:"[data-ctv-confirm-yes]",attrNoTrigger:"[data-ctv-confirm-no]",fnOnYes:n.noop,fnOnNo:n.noop},u={init:function(t){t=n.extend(r,t);var u=n("#"+i);u.length||(u=n("<div />",{id:i,"class":t.theme.modalWrap}).append('<div class="modal-content '+t.theme.modalContent+'"><\/div>').prependTo("body"));t.isLarge&&u.addClass("reveal-large");u.ctvmodal(t)},update:function(t){n("#"+i).ctvmodal("update",t)},close:function(t){n("#"+i).ctvmodal("close",t)}};if(u[t])return u[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method "+t+" does not exist on jQuery."+i);else return u.init.apply(this,arguments)};n.ctvmodal.themes={modal:{modalWrap:"reveal-wrap reveal-modal",modalContent:"reveal-content",modalOpen:"reveal-open"},"super":{modalWrap:"supr-wrap supr-modal",modalContent:"supr-content",modalOpen:"supr-open"}}}(jQuery,window),function(n){n.fn.ctvmore=function(t){var u={},r="ctvmore",e={},f={init:function(t){if(n.extend(u,e,t),!i.data(r)){i.data(r,u);var f=function(n){return{moreLink:n.find(".show-more"),lessLink:n.find(".show-less"),content:n.find(".more-content")}},o=function(n,t){t.content.toggleClass("vh",!n);t.moreLink.toggleClass("vh",n);t.lessLink.toggleClass("vh",!n)};i.on("click",".show-more",function(t){t.preventDefault();t.stopPropagation();o(!0,f(n(this).closest(".more-container")))});i.on("click",".show-less",function(t){t.preventDefault();t.stopPropagation();o(!1,f(n(this).closest(".more-container")))})}}},i;if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).ctvmore(t)});if(i=n(this),f[t])return u=_select.data(r),f[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method "+t+" does not exist on jQuery."+r);else return f.init.apply(this,arguments)}}(jQuery,window),function(n){n.fn.ctvnav=function(t){function l(){if(r.data("ctvnavDropdown")){var t=n("<select />",{"class":"input-select input-select-small"}),f="";r.find("a").each(function(t,r){r=n(r);var u=i.fnGetItem(r).hasClass(i.activeItemCssClass)?'selected="selected"':"";f+="<option "+u+' value="'+r.attr("href")+'">'+r.text()+"<\/option>"});t.html(f).on("change",function(){var u=n(this).val(),t=r.find('a[href="'+u+'"]');i.target?(e(t),s(t),o(t)):location.href=u});r.on("tabChanged."+u,function(n,i){t.val(i.attr("href"))});r.after(t);t.ctvselect()}}function a(){if(i.target)r.on("click",i.item,function(t){t.preventDefault();var i=n(this);e(i);s(i);o(i);r.trigger("tabChanged."+u,[i])})}function s(n,t,i){Modernizr.history&&(t=t||n.attr("href"),i=i||n.data("ctvnavTitle"),history.pushState(null,i,t),r.data("ctvNavPushed",!0))}function e(n,t,u){t=t||n.attr("href");u=u||n.data("ctvnavTitle");r.find(i.item).removeClass(i.activeItemCssClass);i.fnGetItem(n).addClass(i.activeItemCssClass);h(n);i.onChange(n,t)}function h(n){if(i.actions){var t=n.data("actionsKey")||"",r=i.actions.find("[data-action-for]");r.addClass("hide").filter('[data-action-for="'+t+'"]').removeClass("hide")}}function o(t,r,u){(r=r||t.attr("href"),u=u||t.data("ctvnavTitle"),t&&t.length!=0&&r)&&i.target.ctvload({url:r,data:{isPartialRequest:!0,state:i.state},fnHtml:function(){n.ctvnoty.clearErrors();u&&(document.title=u)}})}var c={activeItemCssClass:"on",item:"a",actions:null,target:null,onChange:function(){},fnGetItem:function(n){return n},state:null},r,u="ctvnav",i={},f={init:function(t){n.extend(i,c,t);i.target&&typeof i.target=="string"&&(i.target=n(i.target));i.actions&&typeof i.actions=="string"&&(i.actions=n(i.actions));var f=r.data(u);f||(r.data(u,i),r.addClass("nav-container"),a(),l(),h(r.find(".on")))},update:function(t){t.url?t.anchor=r.find("a[href$='"+t.url+"']"):t.anchor||n.error("must provide a value");e(t.anchor);o(t.anchor)}};if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).ctvnav(t)});if(r=n(this),f[t])return i=r.data(u),f[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method "+t+" does not exist on jQuery."+u);else return f.init.apply(this,arguments)}}(jQuery,window),function(n,t){function i(){var t=n("#notifications");return t.length||(t=n("<div />",{id:"notifications","class":"notifications"}).appendTo("body")),t}function u(t){var s=i(),u;(n.isArray(t.text)&&(t.text=t.text.join("<br />")),t.text)&&(u=n("<div />",{"class":"notification"}).addClass(t.typeCss).html(t.text).on("click.ctvnotification",function(){o(n(this))}),t.timeout&&setTimeout(function(){o(u)},t.timeout),t.clear?(n.ctvnoty.clear(),f(u)):s.find(".notification-show").length>e.maxVisible?r.push(u):f(u))}function f(n){n.appendTo(i());t.getComputedStyle&&t.getComputedStyle(n[0]).opacity;n.addClass("notification-show")}function o(n){if(Modernizr&&Modernizr.csstransitions)n.removeClass("notification-show").on("transitionEnd webkitTransitionEnd oTransmissionEnd msTransitionEnd",function(){n.remove();var t=r.pop();t&&f(t)});else n.removeClass("notification-show").remove()}function s(){i().find(".notification").remove()}function h(){r=[]}var e={clear:!1,maxVisible:1,timeout:3e3},r=[];n.ctvnoty=function(t){t.type=="info"?n.ctvnoty.info(t):t.type=="error"?n.ctvnoty.error(t):t.type=="success"&&n.ctvnoty.success(t)};n.ctvnoty.info=function(n){u({clear:n.clear,text:n.text,timeout:null,type:"info",typeCss:"notification-info"})};n.ctvnoty.error=function(n){u({clear:n.clear,text:n.text,timeout:null,type:"info",typeCss:"notification-error"})};n.ctvnoty.success=function(n){u({clear:n.clear,text:n.text,timeout:e.timeout,type:"info",typeCss:"notification-success"})};n.ctvnoty.clear=function(){s();h()};n.ctvnoty.clearErrors=function(){i().find(".notification-error").remove()}}(jQuery,window),function(n){n.fn.ctvpicker=function(t){function e(t){n.error(u+": "+t)}var u="ctvpicker",i={allowClear:!1,data:null,dataType:"json",minimumInputLength:0,pageSize:10,placeholder:"Search",showSearch:!0,thumbCssClass:"",url:null,fnOnSelected:n.noop,fnResults:n.noop},f={init:function(t){if(n.extend(i,t),!r.data(u)){i.url||e("_settings.url is required.");r.data(u,i);r.select2({allowClear:i.allowClear,minimumInputLength:i.minimumInputLength,minimumResultsForSearch:i.showSearch?0:-1,placeholder:i.placeholder,ajax:{url:i.url,dataType:i.dataType,quietMillis:500,data:function(t,r){var u={q:t,pageSize:i.pageSize,page:r-1};return i.data&&(typeof i.data=="object"?n.extend(u,i.data):typeof i.data=="function"&&n.extend(u,i.data())),u},results:function(t,u){i.fnResults(t,u);var f=t.more||!1;return t.errorMessage?(n.ctvnoty.error({text:t.errorMessage}),{results:[],more:!1}):(!f&&t.total&&(f=u*i.pageSize<t.total),t.placeholder&&r.select2("container").find(".select2-chosen").html(t.placeholder),{results:t.items,more:f})}},formatResult:function(n){if(!n.id)return n.text;var r="thumb "+i.thumbCssClass,t='<div class="badge">';return n.img&&(t+='<div class="'+r+'"><img src="'+n.img+'" /><\/div>'),t+='<div class="info">',t+='<span class="line-1">'+n.text+"<\/span>",n.details&&(t+='<span class="line-2">'+n.details+"<\/span>"),t+="<\/div>",t+"<\/div>"},formatSelection:function(n){return n.text},escapeMarkup:function(n){return n},formatNoMatches:i.formatNoMatches||function(){return"No matches found"},initSelection:i.initSelection||function(t,i){var r=[];n(t.val().split(",")).each(function(){r.push({id:this,text:this})});i(r)}});r.on("change",i.fnOnSelected)}},disable:function(){r.select2("disable")},destroy:function(){r.select2("destroy");r.removeData(u)}},r;if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).ctvpicker(t)});if(r=n(this),f[t])return i=r.data(u),f[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)e("Method "+t+" does not exist.");else return f.init.apply(this,arguments)}}(jQuery,window),function(n){n.fn.ctvpiechart=function(t){function e(){i.plot(i.data("piechart"),{series:{pie:{radius:1,innerRadius:.6,show:!0,stroke:{color:"#fbfbfb",width:2},label:{show:u.showLabels,radius:.75,formatter:o,threshold:.06,background:{opacity:0,color:"#eee"}}}},legend:{show:!1}})}function o(n,t){return t.label!=null?"<div> "+Math.round(t.percent)+"%<\/div>":""}var i,r="ctvpiechart",u={showLabels:!0},f={init:function(t){n.extend(u,t);var f=i.data(r);f||i.data(r,u);e()}};if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).ctvpiechart(t)});if(i=n(this),f[t])return u=i.data(r),f[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method "+t+" does not exist on jQuery."+r);else return f.init.apply(this,arguments)}}(jQuery,window),function(n){n.fn.ctvselect=function(t){function o(){if(i.attr("data-cascade")){var t=i.data("cascade");n.each(t,function(){var t=this,r=i.closest("form").find(t.id);i.on("change",function(u){t.suppressChange&&(u.preventDefault(),u.stopImmediatePropagation());var f={};t.params&&t.params.length>0&&n.each(t.params,function(){f[this.Name]=i.closest("form").find(this.SourceId).val()});f=n.extend(f,{id:i.val()});n.ajax({url:t.url,type:"get",data:f,success:function(n){r.ctvselect("options",n)}})})})}}var f={},r="ctvselect",e={},u={init:function(t){function h(n){var t=n.find("option:selected").text();n.parent().attr("data-title",t)}var u,s;(n.extend(f,e,t),i.data(r))||(i.data(r,f),u="dselect",i.hasClass("input-select-menu")&&(u+=" dselect-menu"),i.hasClass("input-select-small")&&(u+=" dselect-small"),s=i.closest(".dselect"),s.length?s.addClass(u):(s=n('<div class="'+u+'" />'),i.wrap(s)),i.on("click change update",function(){h(n(this))}).on("keyup",function(){h(n(this))}).on("focus",function(){n(this).parent().addClass("focused")}).on("blur",function(){n(this).parent().removeClass("focused")}).trigger("update"),o())},enable:function(){return i.removeAttr("disabled").removeClass("disabled").parent().removeClass("disabled"),this},disable:function(){return i.attr("disabled","disabled").addClass("disabled").parent().addClass("disabled"),this},change:function(n){return i.val(n).trigger("change"),this},readonly:function(n){n?(i.parent().addClass("disabled"),i.find("option:not(:selected)").attr("disabled","disabled")):(i.parent().removeClass("disabled"),i.find("option").removeAttr("disabled"))},reset:function(){var t=null;i.find("option").each(function(i,r){r=n(r);r.prop("defaultSelected")&&(t=r.val())});u.change(t)},options:function(t){t=t||[];var r="",u=i.find("option:first");return u.val()||(r='<option value="">'+u.text()+"<\/value>"),n.each(t,function(n,t){r=r+'<option value="'+t.Value+'">'+t.Text+"<\/option>"}),i.html(r).trigger("change"),this}},i;if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).ctvselect(t)});if(i=n(this),!i.is("select"))return n.error("jQuery."+r+" only supports select elements."),this;if(u[t])return f=i.data(r),u[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method "+t+" does not exist on jQuery."+r);else return u.init.apply(this,arguments)}}(jQuery,window),function(n){n.fn.ctvtextarea=function(t){function o(){u.html(i.val().replace(/\n/g,"<br/>."));i.height()!=u.height()&&i.height(u.height())}function s(){if(f){var n=i.val().length;f.html(e-n)}}var u,f,e;if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).ctvtextarea(t)});var r=n.extend({},{maxLengthAttribute:"data-val-length-max",countDisplay:null},t),i=n(this);i.css({overflow:"hidden",minHeight:i.attr("rows")+"em"});u=n("<div />").css({display:"none",wordWrap:"break-word",padding:i.css("padding"),width:i.css("width"),fontFamily:i.css("font-family"),fontSize:i.css("font-size"),lineHeight:i.css("line-height")});i.after(u);f=r.countDisplay;e=i.attr(r.maxLengthAttribute);r.countDisplay&&typeof r.countDisplay=="string"&&(f=n(r.countDisplay));i.on("input",o).on("input",s).trigger("input")}}(jQuery,window),function(n){n.fn.ctvtoken=function(t){function e(t){n.error(u+": "+t)}var u="ctvtoken",r={placeholder:null,tokenSeparators:[","],disableAutoComplete:!1},f={init:function(t){if(n.extend(r,t),!i.data(u)){if(i.attr("placeholder")&&n.extend(r,{placeholder:i.attr("placeholder")}),r.disableAutoComplete&&n.extend(r,{tags:[],formatNoMatches:function(){return""},dropdownCssClass:"select2-hidden"}),i.data(u,r),i.is("textarea")){var f=n("<input />",{type:"hidden","class":i.attr("class"),placeholder:i.attr("placeholder"),id:i.attr("id"),name:i.attr("name")}).val(i.val());i.replaceWith(f);i=f}i.select2(r)}}},i;if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).ctvtoken(t)});if(i=n(this),f[t])return r=i.data(u),f[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)e("Method "+t+" does not exist.");else return f.init.apply(this,arguments)}}(jQuery,window),function(n){var i="ctvtree",t={};n.fn.ctvtree=function(r){function e(t){n.error(i+": "+t)}var f={init:function(r){(n.extend(t,r),u.data(i))||(u.tree(t),t.select&&u.bind("tree.select",t.select))}},u;if(this.length==0)return this;if(this.length>1)return this.each(function(){n(this).ctvtree(r)});if(u=n(this),f[r])return t=u.data(i),f[r].apply(this,Array.prototype.slice.call(arguments,1));if(typeof r!="object"&&r)e("Method "+r+" does not exist.");else return f.init.apply(this,arguments)}}(jQuery,window),function(n){n.fn.ctvvalidate=function(t){function r(n,t,i){n.rules[t]=i;n.message&&(n.messages[t]=n.message)}function c(n){return n.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}function e(n){return n.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function o(n){return n.substr(0,n.lastIndexOf(".")+1)}function s(n,t){return n.indexOf("*.")===0&&(n=n.replace("*.",t)),n}function l(t,i){n.watermark&&n.watermark.showAll();n.ctvnoty.clear();var r=n.map(i.errorList,function(n){return n.message});n.ctvnoty.error({text:r})}function a(){var t=n(this);t.data("validator").resetForm();t.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors");t.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}function h(i){var r=n(i),u=r.data(f),e=n.proxy(a,i);return u||(u={options:{errorPlacement:function(){},invalidHandler:n.proxy(l,i),messages:{},rules:{}},attachValidation:function(){t.rules&&n.extend(this.options.rules,t.rules);t.messages&&n.extend(this.options.messages,t.messages);this.options.ignore=":hidden:not(select)";r.unbind("reset."+f,e).bind("reset."+f,e).validate(this.options)},validate:function(){return r.validate(),r.valid()}},r.data(f,u)),u}var u=n.validator,i,f="unobtrusiveValidation";return u.unobtrusive={adapters:[],parseElement:function(t,i){var u=n(t),f=u.parents("form")[0],r,e,o;f&&(r=h(f),r.options.rules[t.name]=e={},r.options.messages[t.name]=o={},n.each(this.adapters,function(){var i="data-val-"+this.name,r=u.attr(i),s={};r!==undefined&&(i+="-",n.each(this.params,function(){s[this]=u.attr(i+this)}),this.adapt({element:t,form:f,message:r,params:s,rules:e,messages:o}))}),n.extend(e,{__dummy__:!0}),i||r.attachValidation())},parse:function(t){var i=n(t).parents("form").andSelf().add(n(t).find("form")).filter("form");n(t).find(":input[data-val=true]").each(function(){u.unobtrusive.parseElement(this,!0)});i.each(function(){var n=h(this);n&&n.attachValidation()})}},i=u.unobtrusive.adapters,i.add=function(n,t,i){return i||(i=t,t=[]),this.push({name:n,params:t,adapt:i}),this},i.addBool=function(n,t){return this.add(n,function(i){r(i,t||n,!0)})},i.addMinMax=function(n,t,i,u,f,e){return this.add(n,[f||"min",e||"max"],function(n){var f=n.params.min,e=n.params.max;f&&e?r(n,u,[f,e]):f?r(n,t,f):e&&r(n,i,e)})},i.addSingleVal=function(n,t,i){return this.add(n,[t||"val"],function(u){r(u,i||n,u.params[t])})},u.addMethod("__dummy__",function(){return!0}),u.addMethod("regex",function(n,t,i){var r;return this.optional(t)?!0:(r=new RegExp(i).exec(n),r&&r.index===0&&r[0].length===n.length)}),u.addMethod("nonalphamin",function(n,t,i){var r;return i&&(r=n.match(/\W/g),r=r&&r.length>=i),r}),i.addSingleVal("accept","exts").addSingleVal("regex","pattern"),i.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url"),i.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range"),i.add("equalto",["other"],function(t){var i=o(t.element.name),u=t.params.other,f=s(u,i),h=n(t.form).find(":input[name='"+e(f)+"']")[0];r(t,"equalTo",h)}),i.add("required",function(n){(n.element.tagName.toUpperCase()!=="INPUT"||n.element.type.toUpperCase()!=="CHECKBOX")&&r(n,"required",!0)}),i.add("remote",["url","type","additionalfields"],function(t){var i={url:t.params.url,type:t.params.type||"GET",data:{}},u=o(t.element.name);n.each(c(t.params.additionalfields||t.element.name),function(r,f){var o=s(f,u);i.data[o]=function(){return n(t.form).find(":input[name='"+e(o)+"']").val()}});r(t,"remote",i)}),i.add("password",["min","nonalphamin","regex"],function(n){n.params.min&&r(n,"minlength",n.params.min);n.params.nonalphamin&&r(n,"nonalphamin",n.params.nonalphamin);n.params.regex&&r(n,"regex",n.params.regex)}),this.each(function(){u.unobtrusive.parse(this)})}}(jQuery),function(n,t,i){function a(){}function s(n){n.requiresPayment=n.requiresPayment===!0||n.requiresPayment==="True";r.accountTypeId=r.form.find("#AccountTypeId");r.userTypeId=r.form.find("#UserType_UserTypeId");r.professionalTypeId=r.form.find("#UserType_ProfessionalTypeId");r.brokerageSizeId=r.form.find("#BrokerageSizeId");r.phone=r.form.find("#Phone");r.promoCode=r.form.find("#PromoCode");r.btnApplyPromo=r.form.find("#btnApplyPromo");r.paymentInfo=r.form.find("#Billing, #Payment");o();u();f();h(n.requiresPayment);r.form.removeClass("invisible");r.accountTypeId.on("change",v);r.promoCode.on({change:function(){e()},keydown:function(n){n.which===13&&(n.preventDefault(),e())}});r.btnApplyPromo.on("click",function(){e()});r.userTypeId.on("change",function(){o();u();f()});r.professionalTypeId.on("change",function(){o();u();f()})}function o(){r.userTypeId.val()=="repro"?r.professionalTypeId.closest(".col-1-2").show():r.professionalTypeId.val("").closest(".col-1-2").hide()}function u(){r.phone&&(r.accountTypeId.val()==n.dbcache.AccountType.FreeId&&r.professionalTypeId.val()=="rebroker"?r.phone.closest(".col-1-2").show():r.accountTypeId.val()!=n.dbcache.AccountType.FreeId?r.phone.closest(".col-1-2").show():r.phone.val("").closest(".col-1-2").hide())}function f(){r.brokerageSizeId&&(r.accountTypeId.val()==n.dbcache.AccountType.FreeId&&r.professionalTypeId.val()=="rebroker"?r.brokerageSizeId.closest(".col-1-2").show():r.brokerageSizeId.val("").closest(".col-1-2").hide())}function h(n){n?r.paymentInfo.show():r.paymentInfo.hide()}function c(n){i("#PaymentPeriodId").ctvselect("options",n)}function v(){if(!r.accountTypeId.is(":disabled")){var n=r.accountTypeId.val();n?i.ajax({url:"/account/verifyplan",data:{id:n},success:l}):i("#plan").empty()}}function e(){var n=r.promoCode.val(),t;n&&(t=r.promoCode.data("verify"),i.ajax({url:t,data:{id:n},success:function(n){n.Error||(p(),r.accountTypeId.ctvselect("change",n.AccountTypeId));l(n)}}))}function l(n){i.ctvnoty.clear();u();f();n&&!n.Error?(i("#plan").html(n.Html),h(n.RequiresPayment),c(n.PaymentPeriods)):n.Error&&i.ctvnoty.error({text:n.Error})}function y(){r.promoCode.val("").removeAttr("readonly").removeClass("read-only");r.accountTypeId.ctvselect("enable").ctvselect("reset");w();c()}function p(){r.promoCode.attr("readonly","readonly").addClass("read-only");r.accountTypeId.ctvselect("disable");r.btnApplyPromo.text("Clear").off("click").on("click",y)}function w(){r.btnApplyPromo.text("Apply").off("click").on("click",e)}var r={form:null,accountTypeId:null,userTypeId:null,professionalTypeId:null,brokerageSizeId:null,phone:null,promoCode:null,btnApplyPromo:null,paymentInfo:null};t.initSignUp=function(n){r.form=i("#"+n.formId);s(n);a();r.form.ctvform({fnHtml:function(n){i("#createAccount").html(n);i("body").animate({scrollTop:i("#createAccount").offset().top},200)}})};t.initUpgrade=function(n){r.form=i("#"+n.formId);s(n);r.form.ctvform()}}(window.ctv=window.ctv||{},window.ctv.account=window.ctv.account||{},jQuery),function(n,t,i){function h(n){console&&o&&console.log(s+": "+n)}var f="boxuserid",e="https://app.box.com/logout",u,o=!1,s="addfiles-box",r={};t.clearLocalStorage=function(){window.ctv.localstorage.get(f)&&window.ctv.localstorage.set(f,"expired")};t.init=function(n){r=n;r.includeBox&&t.loadApi()};t.loadApi=function(){u||i.ajax({dataType:"script",cache:!0,url:"https://app.box.com/js/static/select.js"}).done(function(){t.enableApi()}).fail(function(){h("Box api could not be reached.")})};t.enableApi=function(){var o=n.localstorage.get(f),s;o&&o!=r.userId&&i('<iframe src="'+e+'" class="vh"/>').prependTo("body");s={clientId:r.boxClientId,linkType:"direct",multiselect:!0};u=new BoxSelect;u.success(function(t){var u=i.map(t,function(n,t){return{id:"boxImport_"+t,name:n.name,percent:0,size:n.size,providerFileId:"",providerFileVersion:null,url:n.url}});n.upload.importFiles({roomId:r.roomId,folderId:r.folderId,provider:"box",files:u})});t.registerClickEvent()};t.registerClickEvent=function(){i("#btnChooseFromBox").toggleClass("vh",!u.isBrowserSupported()).off("click").on("click",function(){t.launchPicker()})};t.launchPicker=function(){n.localstorage.set(f,r.userId);u.launchPopup()}}(window.ctv=window.ctv||{},window.ctv.addfilesbox=window.ctv.addfilesbox||{},jQuery),function(n,t,i){function s(n){console&&e&&console.log(o+": "+n)}var u="dropboxuserid",f="https://www.dropbox.com/logout",e=!1,o="addfiles-dropbox",r={};t.clearLocalStorage=function(){window.ctv.localstorage.get(u)&&window.ctv.localstorage.set(u,"expired")};t.init=function(n){r=n;r.fileTypes=i.map(n.fileTypes,function(n){return"."+n});r.includeDropbox&&t.loadApi()};t.loadApi=function(){window.Dropbox?t.enableApi():i.ajax({dataType:"script",cache:!0,url:"https://www.dropbox.com/static/api/1/dropins.js"}).done(function(){Dropbox.appKey=r.dropBoxClientID;Dropbox.isBrowserSupported()&&t.enableApi()}).fail(function(){s("Dropbox api could not be reached.")})};t.enableApi=function(){var e=n.localstorage.get(u);e&&e!=r.userId&&i('<iframe src="'+f+'" class="vh"/>').prependTo("body");t.registerClickEvent()};t.registerClickEvent=function(){i("#btnChooseFromDropbox").toggleClass("vh",!1).off("click").on("click",function(){t.createPicker()})};t.createPicker=function(){n.localstorage.set(u,r.userId);Dropbox.choose({success:function(t){var u=i.map(t,function(n,t){return{id:"dropboxImport_"+t,name:n.name,percent:0,size:n.bytes,url:n.link,ico:n.icon,providerFileId:decodeURIComponent(/^https:\/\/dl\.dropboxusercontent\.com\/1\/view\/[a-z0-9]+?\/(.*)$/g.exec(n.link)[1]),providerFileVersion:null}});n.upload.importFiles({roomId:r.roomId,folderId:r.folderId,provider:"dropbox",files:u})},cancel:function(){},linkType:"direct",multiselect:!0,extensions:r.fileTypes})}}(window.ctv=window.ctv||{},window.ctv.addfilesdropbox=window.ctv.addfilesdropbox||{},jQuery),function(n,t,i){var u="googledriveuserid",f="https://accounts.google.com/logout",e=!1,o="addfiles-googledrive",r={};t.clearLocalStorage=function(){window.ctv.localstorage.get(u)&&window.ctv.localstorage.set(u,"expired")};t.init=function(n){r=n;_loaded=!1;i.cachedScript=function(n,t){return t=i.extend(t||{},{dataType:"script",cache:!0,url:n}),i.ajax(t)};r.includeGoogleDrive&&i.when(i.cachedScript("//apis.google.com/js/client.js?onload=initPicker").done(function(){}),i.cachedScript("//www.google.com/jsapi?key="+r.googleDriveApiKey).done(function(){})).done(function(){i("#btnAddDocs").on("click",function(){_loaded||t.initGoogleDrive();_loaded=!0})}).fail(function(){i.ctvnoty.error({text:"There was an error loading Google Drive.  Please reload and try again"})})};t.initGoogleDrive=function(){var e=n.localstorage.get(u),t,o;e&&e!=r.userId&&i('<iframe src="'+f+'" class="vh"/>').prependTo("body");t=window.FilePicker=function(n){this.apiKey=n.apiKey;this.clientId=n.clientId;this.buttonEl=n.buttonEl;this.buttonEl.addEventListener("click",this.open.bind(this));gapi.client.setApiKey(this.apiKey);google.load("picker","1",{callback:this._pickerApiLoaded.bind(this)});gapi.client.load("drive","v2",this._driveApiLoaded.bind(this))};t.prototype={open:function(){var n=gapi.auth.getToken();n?this._showPicker():this._doAuth(!1,function(){this._showPicker()}.bind(this))},_showPicker:function(){n.localstorage.set(u,r.userId);var t=gapi.auth.getToken().access_token;this.picker=(new google.picker.PickerBuilder).addView(google.picker.ViewId.DOCS).addView(google.picker.ViewId.FOLDERS).setAppId(this.clientId).setOAuthToken(t).setCallback(this._pickerCallback.bind(this)).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).setTitle(r.googleDriveWindowTitle).build().setVisible(!0);_accessToken=gapi.auth.getToken().access_token},_pickerCallback:function(t){var u=0,f=[],e=function(){if(u++,t[google.picker.Response.ACTION]==google.picker.Action.PICKED&&!(u>t[google.picker.Response.DOCUMENTS].length)){var o=t[google.picker.Response.DOCUMENTS][u-1],s=o[google.picker.Document.ID],h=gapi.client.drive.files.get({fileId:s});h.execute(function(t){if(f.push(t),f.length==u-1){var e=i.map(f,function(n,t){if(n.exportLinks){var i,r;switch(n.mimeType){case"application/vnd.google-apps.drawing":i=n.exportLinks["image/png"];r=n.title+".png";break;case"application/vnd.google-apps.presentation":i=n.exportLinks["application/vnd.openxmlformats-officedocument.presentationml.presentation"];r=n.title+".pptx";break;case"application/vnd.google-apps.spreadsheet":i=n.exportLinks["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];r=n.title+".xlsx";break;case"application/vnd.google-apps.document":i=n.exportLinks["application/vnd.openxmlformats-officedocument.wordprocessingml.document"];r=n.title+".docx";break;default:i=n.exportLinks["application/pdf"];r=n.title+".pdf"}return{googleDriveId:n.id,id:"googledriveImport"+t,name:r,percent:0,size:n.fileSize,url:i,providerFileId:n.id,providerFileVersion:n.modifiedDate}}return n.mimeType=="application/vnd.google-apps.form"?{googleDriveId:n.id,id:"googledriveImport"+t,name:n.title+".googleform",percent:0,size:n.fileSize,url:n.alternateLink,providerFileId:n.id,providerFileVersion:n.modifiedDate}:{googleDriveId:n.id,id:"googledriveImport"+t,name:n.title,percent:0,size:n.fileSize,url:n.downloadUrl,providerFileId:n.id,providerFileVersion:n.modifiedDate}});n.upload.importFiles({accessToken:_accessToken,roomId:r.roomId,folderId:r.folderId,provider:"googldrv",files:e})}});e()}};e()},_pickerApiLoaded:function(){},_driveApiLoaded:function(){this._doAuth(!0)},_doAuth:function(n,t){gapi.auth.authorize({client_id:this.clientId+".apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/drive",immediate:n},t)}};o=new t({apiKey:r.googleDriveApiKey,clientId:r.googleClientId,buttonEl:document.getElementById("btnChooseFromGoogle")})}}(window.ctv=window.ctv||{},window.ctv.addfilesgoogledrive=window.ctv.addfilesgoogledrive||{},jQuery),function(n,t,i){var u="skydriveuserid",f=!1,e="addfiles-skydrive",r={};t.clearLocalStorage=function(){window.ctv.localstorage.get(u)&&window.ctv.localstorage.set(u,"expired")};t.isBrowserSupported=function(){for(var t=[/mobile/,/phone/],n=0;n<t.length;n++)if(t[n].test(navigator.userAgent.toLowerCase()))return!1;return!window.JSON||!(window.postMessage!=null)?!1:!0};t.init=function(n){r=n;r.includeSkyDrive&&t.loadApi()};t.loadApi=function(){window.WL?t.enableApi():i.ajax({dataType:"script",cache:!0,url:"//js.live.net/v5.0/wl.js"}).done(function(){t.isBrowserSupported()&&t.enableApi()}).fail(function(){})};t.enableApi=function(){WL.init({client_id:r.skyDriveClientId,redirect_uri:r.skyDriveRedirect_Uri,scope:r.skyDriveScope});var i=n.localstorage.get(u);i&&i!=r.userId&&WL.canLogout()?(WL.logout(),window.setTimeout(function(){t.registerClickEvent()},500)):t.registerClickEvent()};t.registerClickEvent=function(){i("#btnChooseFromSkyDrive").toggleClass("vh",!1).off("click").on("click",function(){t.createPicker()})};t.createPicker=function(){WL.login({scope:"wl.skydrive wl.signin"}).then(function(){n.localstorage.set(u,r.userId);WL.fileDialog({mode:"open",select:"single"}).then(function(t){var u=i.map(t.data.files,function(n,t){return{skyDriveId:n.id,id:"skydriveImport"+t,link:n.link,name:n.name,percent:0,size:0,url:n.source,providerFileId:n.id}}),f;if(t.data.folders&&t.data.folders.length>0){i.ctvnoty.error({text:"At this time, only file selections are supported. Please try again."});return}return f=i.map(u,function(n){var t=i.Deferred();return WL.api({path:n.skyDriveId,method:"GET"}).then(function(i){n.size=i.size;n.url=i.source;n.providerFileVersion=i.updated_time;t.resolve()},function(){t.resolve()}),t.promise()}),i.when.apply(i,f).done(function(){n.upload.importFiles({roomId:r.roomId,folderId:r.folderId,provider:"skydrv",files:u})})},function(){})},function(){})}}(window.ctv=window.ctv||{},window.ctv.addfilesskydrive=window.ctv.addfilesskydrive||{},jQuery),function(n,t,i){var r=!1,u="addfiles";t.init=function(){var r=i("#addDocsMenu").data("addfiles")||{},u=i.map(r.fileTypes,function(n){return"."+n}).join(",");t.initUpload(r);t.initMenu(r);n.localstorage.init();n.addfilesdropbox.init(r);n.addfilesskydrive.init(r);n.addfilesgoogledrive.init(r);n.addfilesbox.init(r)};t.initUpload=function(t){var i=t.fileTypes.join(",");n.upload.init({roomId:t.roomId,folderId:t.folderId,fileTypes:i,isMyDocs:t.isMyDocs})};t.initMenu=function(){i("#btnAddDocs").popover({content:i("#addDocsMenu"),tip:6,onOpen:function(){i(window).trigger("upload.update")},onClose:function(){i(window).trigger("upload.update")}})}}(window.ctv=window.ctv||{},window.ctv.addfiles=window.ctv.addfiles||{},jQuery),function(n,t,i){function r(){i("[data-navlist]").find("a:first").trigger("click")}t.initNav=function(){i("#appAdminTabs").ctvnav({actions:"#appAdminActions"})};t.initUserSearch=function(){var n=i("#target");i("#formUsersSearch").ctvfilter({target:n,fnSuccess:function(){}})};t.initUserDetails=function(){var n=i("[data-navlist]"),t=n.data("navlist");n.ctvnav({target:"#"+t,onChange:function(){i(window).infinite("destroy")}});i("#userActionItems").find("form").ctvform({fnJson:function(){var n=i("#userActionItems").data("contentUrl");i("#userActionItems").ctvload({url:n});r()}})};t.initCompanyDetails=function(){var n=i("[data-navlist]"),t=n.data("navlist");n.ctvnav({target:"#"+t});i("#companyActionItems").find("form").ctvform({fnJson:function(){var n=i("#companyActionItems").data("contentUrl");i("#companyActionItems").ctvload({url:n});r()}})};t.initSetAdminRights=function(n){i("#"+n.formId).ctvform({bAutoCloseModal:!0,fnJson:r})};t.initPromoUpgrade=function(n){i("#"+n.formId).ctvform({bAutoCloseModal:!0,fnJson:r})};t.initMakePayment=function(n){i("#"+n.formId).ctvform({bAutoCloseModal:!0,fnJson:r})};t.initToggleUserEmailNotifications=function(n){i("#"+n.formId).ctvform({fnJson:r})};t.initDeleteUser=function(n){i("#"+n.formId).ctvform()};t.initUtilities=function(){i("#tblUtilities").find("form").ctvform({fnHtml:function(n){i("#results").html(n)}})};t.initPromos=function(){function n(){i(window).infinite({msg:"Loading more promos",msgDone:"No more promos to show",more:"#pagingNav a:first",target:"#list tbody",item:".item"})}var t=i("#target");i("#filterPromos").ctvfilter({target:t,fnSuccess:function(){i(window).infinite("destroy");n()}});n()};t.initSSO=function(){function n(){i(window).infinite({msg:"Loading more SSO Providers",msgDone:"No more providers to show",more:"#pagingNav a:first",target:"#list tbody",item:".item"})}var t=i("#target");i("#filterSSOProviders").ctvfilter({target:t,fnSuccess:function(){i(window).infinite("destroy");n()}});n()};t.initSSOProviderDetails=function(){var n=i("[data-navlist]"),t=n.data("navlist");n.ctvnav({target:"#"+t});i("#companyActionItems").find("form").ctvform({fnJson:function(){var n=i("#companyActionItems").data("contentUrl");i("#companyActionItems").ctvload({url:n});r()}})};t.initDisableSSOProvider=function(n){i("#"+n.formId).ctvform({bAutoCloseModal:!0})};t.initEnableSSOProvider=function(n){i("#"+n.formId).ctvform({bAutoCloseModal:!0})};var u=function(n){var t=i("#"+n.formId),r=t.find("#roomPhoto");t.ctvform({bAutoCloseModal:!0});r.ctvcrop({cropMinHeight:50,cropMinWidth:75,cropMaintianAspectRatio:!1,boxWidth:388,cropPhoto:"imgRoomToCrop",fnDone:function(n){i("#imgRoom").attr("src",n)}})};t.initEditSsoProvider=function(n){u(n)};t.initAddSSOProvider=function(n){u(n)};t.initSSODetails=function(){i("a[data-reveal-for]").click(function(){var n=i(this).attr("data-reveal-for");i("#"+n).toggleClass("vh",!1);i(this).addClass("vh")})};t.initFaxNumber=function(){function n(){i(window).infinite({msg:"Loading more fax numbers",msgDone:"No more fax numbers",more:"#pagingNav a:first",target:"#faxNumberList tbody",item:".item"})}n();i("#formFaxNumberFilter").ctvfilter({target:"#faxNumberTarget",fnSuccess:function(){i(window).infinite("destroy");n()}});i("#faxNumberTarget").on("click","[data-assign]",function(){var n=i(this).data("assign");i.ajax({type:"post",url:n,success:function(n){n&&(n.Error.length>0?i.ctvnoty.error({clear:!0,text:n.Error}):n.Info.length>0?i.ctvnoty.info({clear:!0,text:n.Info}):n.Success.length>0&&(r(),i.ctvnoty.success({clear:!0,text:n.Success})))},error:function(){i.ctvnoty.error({text:"Your changes could not be saved."})}})})};t.initCompanies=function(n){i("#filterCompanies").ctvfilter({target:"#target"});i(window).infinite({msg:"Loading more companies",msgDone:"No more companies to show",more:"#pagingNav a:first",target:"#list tbody",item:".item"});i(document).on("click","#btnExport",function(){document.location=n.exportUrl+"?finder="+i("#Filter_Finder").val()})};t.initAddCompany=function(n){i("#"+n.formId).ctvform({bAutoCloseModal:!0})};t.initAddCompanyAdmin=function(n){i("#"+n.formId).ctvform({bAutoCloseModal:!0,fnJson:r})};t.initEditSharedDocsOwner=function(n){i("#"+n.formId).ctvform({bAutoCloseModal:!0,fnJson:r})};t.initDeactivateCompany=function(n){i("#"+n.formId).ctvform({bAutoCloseModal:!0,fnJson:r})};t.initHierarchyMembers=function(n){i("#"+n.treeId).ctvtree({data:n.data,autoOpen:!0,select:function(t){t.node?i("#"+n.panelId).ctvload({url:n.url,data:{companyId:n.companyId,id:t.node.id}}):i("#"+n.panelId).html("")}})}}(window.ctv=window.ctv||{},window.ctv.appadmin=window.ctv.appadmin||{},jQuery),function(n,t){function f(){var n=t("#target").find("#list").length>0?"#list tbody":".grid";t(window).infinite({msg:"Loading more members",msgDone:"No more members to show",more:"#pagingNav a:first",target:n,item:".item",fnAfterLoad:function(){t("#target").ctvImageDefer()}})}var e=function(n,t,i){Modernizr.history&&(t=t||n.attr("href"),i=i||n.data("ctvnavTitle"),history.pushState(null,i,t),i&&(document.title=i))},o=function(n){t(document).on("click","#"+n.id,function(n){n.preventDefault();var i=t(this).attr("href");t("#companyBody").ctvload({url:i,data:{state:"tab"}});t(".tabnav .actions").toggleClass("vh",!0);e(t(this))})},i,r,u;n.initAddAgent=function(i){i.noOffices?(t.ctvnoty.error({text:i.noOfficeMsg}),t.ctvmodal("close")):t("#"+i.formId).ctvform({bAutoCloseModal:!0,fnJson:n.refreshMemberGrid})};i=function(n){var i=t("#"+n.formId),a=i.find('input[name="'+n.accessAutoName+'"]'),e=i.find("#"+n.accessLevelId),o=i.find('label[for="'+n.accessLevelId+'"]'),l=n.accessLevelCompany,s=i.find("#"+n.isVisibleId),v=i.find('input[name="'+n.isVisibleName+'"]'),r=i.find("#"+n.canManageCompanyRoomsId),u=i.find("#"+n.canDeleteTransactionRoomsId),f=i.find("#"+n.canDeleteTransactionRoomDocumentsId),h=i.find("#"+n.canCloseRoomsId),c=i.find("#"+n.canApproveChecklistsId),y=n.accessAuto;y==!1&&(s.attr("checked",!0).attr("disabled",!0).parent(".switch").addClass("na"),e.parent().addClass("vh"),o.addClass("vh"));a.on("change",function(){var n=t(this).val().toLowerCase();n=="true"?(s.attr("disabled",!1).parent(".switch").removeClass("na"),e.val(l).change().parent().removeClass("vh"),o.removeClass("vh")):(s.attr("checked",!0).attr("disabled",!0).parent(".switch").addClass("na"),v.val(!0),e.val(l).change().parent().addClass("vh"),o.addClass("vh"))});r.on("change",function(){r.is(":checked")||(u.attr("checked",!1),f.attr("checked",!1))});u.on("change",function(){u.is(":checked")&&(r.attr("checked",!0),f.attr("checked",!0))});f.on("change",function(){f.is(":checked")?r.attr("checked",!0):u.attr("checked",!1)});h.on("change",function(){h.is(":checked")&&c.attr("checked",!0)});c.on("change",function(){c.is(":checked")||h.attr("checked",!1)})};r=function(n){var f=t("#"+n.accessLevelOfficeId).clone(),e=function(i){var r=t("#"+n.accessLevelOfficeId).val();return i!=n.accessLevelOffice||r&&r.length>1},i=function(i){var r=[],u=function(){var i=t("#"+n.accessLevelDefaultOfficeId),u=i.val();i.val(null);i.find("option[value!='']").remove();f.find("option").each(function(){t(this).val()&&t.inArray(t(this).val(),r)==-1?t(this).val()==i.val()&&i.val(null):i.append(t(this).clone().removeAttr("SELECTED"))});i.find("option[value='"+u+"']").each(function(){t(this).attr("SELECTED");i.val(u)})},e,o;switch(i){case n.accessLevelOffice:r=t("#"+n.accessLevelOfficeId).val();u();break;case n.accessLevelRegion:e=t("#"+n.accessLevelRegionId).val();o={id:e,managedOnly:!0};t.ajax({dataType:"JSON",method:"POST",url:"lexx.php",data:t.param(o,!0),success:function(n){r=t(n).map(function(){return this.Value.toString()});u()}});break;case n.accessLevelCompany:r=t("#"+n.accessLevelOfficeId).find("option").map(function(){return t(this).val()});u()}},r=function(n){t("#pnlDefaultOffice").toggleClass("vh",!e(n))},u=function(u){var f=u.val();t("#accessLevelRegion").toggleClass("vh",f!=n.accessLevelRegion);t("#accessLevelOffice").toggleClass("vh",f!=n.accessLevelOffice);r(u.val());i(u.val())},o=t("#"+n.accessLevelId).on("change",function(){u(t(this))});u(o);t("#"+n.accessLevelOfficeId).on("change",function(){var u=t("#"+n.accessLevelId);r(u.val());i(u.val())});t("#"+n.accessLevelRegionId).on("change",function(){var r=t("#"+n.accessLevelId);i(r.val())})};n.initAddManager=function(u){if(u.noOffices)t.ctvnoty.error({text:u.noOfficeMsg}),t.ctvmodal("close");else{var f=t("#"+u.formId);t("#"+u.formId).ctvform({bAutoCloseModal:!0,fnJson:n.refreshMemberGrid});f.find(".tokenize").ctvtoken();i(u);r(u)}};n.initImportMembers=function(i){var r=function(n){t.Mustache.load("/assets/templates/ImportMemberResultRow.htm").done(function(){n.errors.length>0&&(t.each(n.errors,function(){t("#importErrorsBody").mustache("import-member-error",this,{method:"append"})}),t("#importErrors").toggleClass("vh",!1));n.successes.length>0&&(t.each(n.successes,function(){t("#importSuccessBody").mustache("import-member-success",this,{method:"append"})}),t("#importSuccess").toggleClass("vh",!1));t(".successCount").html(n.successes.length);t(".errCount").html(n.errors.length);t(".close-reveal-modal").text(i.okText||"OK");t(".initOnly").toggleClass("vh",!0);t(".reportOnly").toggleClass("vh",!1);n.errors.length==0&&n.successes.length>0&&t("#btnUploadAgents").toggleClass("vh",!0)})};t("#"+i.formId).ctvform({bAutoCloseModal:!1,fnSuccess:function(t){r(t.Data);n.refreshMemberGrid()},fnError:function(t){t.responseJSON&&t.responseJSON.Data&&(r(t.responseJSON.Data),n.refreshMemberGrid())},fnBeforeSubmit:function(){return t("#importSuccess").toggleClass("vh",!0),t("#importErrors").toggleClass("vh",!0),t("#importErrorsBody").html(""),t("#importSuccessBody").html(""),t(".reportOnly").toggleClass("vh",!0),!0}});t(document).off("change","#File").on("change","#File",function(){t(this).val()&&(t("#submitUploadAgents").click(),t(this).attr("value",""))});t(document).off("click","#btnUploadAgents").on("click","#btnUploadAgents",function(){t("#File").click()})};n.initSideNav=function(){var n=t("[data-navlist]"),i=n.data("navlist");n.ctvnav({actions:"#companyActions",target:"#"+i,item:".item"})};n.initSubNav=function(){t("#companyTabs").ctvnav({actions:"#companyActions",target:"#companyBody",item:".item",state:"tab"})};n.initMembers=function(){var n=t("#target");t("#filterMembers").ctvfilter({target:n,fnSuccess:function(){n.ctvImageDefer();t(window).infinite("destroy");f()}});n.ctvmore();n.ctvImageDefer();f()};n.initContactInfo=function(n){ctv.contextmenu.clearCanvasMenu();t("#"+n.formId).ctvform()};n.initRegions=function(){ctv.contextmenu.clearCanvasMenu();t("[data-counter]").counter({monitor:!0});t("#filterRegions").ctvfilter({target:"#regions"})};n.initOffices=function(){ctv.contextmenu.clearCanvasMenu();t("[data-counter]").counter({monitor:!0});t("#filterOffices").ctvfilter({target:"#offices"})};n.initTitles=function(){ctv.contextmenu.clearCanvasMenu();t("[data-counter]").counter({monitor:!0});t("#filterTitles").ctvfilter({target:t("#titles")})};n.initChecklists=function(){ctv.contextmenu.clearCanvasMenu();t("[data-counter]").counter({monitor:!0});t("#filterChecklists").ctvfilter({target:"#checklists"})};n.initAddUpdateChecklist=function(n){var f=t("#"+n.formId),r,i,u;t(document).on("change",".item-cb",function(){var u=t(this).closest("tr"),i=t(this).is(":checked"),r,f;u.toggleClass("cl-optional",!i);u.toggleClass("cl-required",i);r=u.find(".ico .sm.ico-type");f=!r.hasClass("doc-required")&&!r.hasClass("doc-optional");r.toggleClass("doc-required",i&&!f);r.toggleClass("doc-optional",!i&&!f);f||t(u).find(".line-2").html(i?n.requiredText:n.optionalText)});r=t("#rowTemplate");f.ctvform({bAutoCloseModal:!0,fnJson:function(){t("#filterChecklists").submit()},fnBeforeSerialize:function(){r.remove()},fnComplete:function(){t("#tblChecklistItems thead").append(r)}});i=t("#"+n.addNewId);u=function(){i.val()&&i.val().replace(/\s/g,"").length>0&&(t("#tblChecklistItems .clName").filter(function(){return t(this).val().toLowerCase()==i.val().toLowerCase()}).length>0?t.ctvnoty.info({text:"'"+i.val()+"' already exists.",timeout:2e3}):t.ajax({url:n.uniqueIdUrl,type:"POST",success:function(n){var r=t("#clAddChecklistItem").is(":checked"),u=t("#rowTemplate").clone().toggleClass("vh",!1).attr("id",null),f=t("<div/>").append(u).html().replace(/%NAME%/g,i.val()).replace(/\"%NEW%\"/g,""+n+"").replace(/\[%NEW%\]/g,"["+n+"]").replace(/_%NEW%__/g,"_"+n+"__");t("#checklistItems").prepend(f);t("#checklistItems .item-cb").first().prop("checked",r).change();i.val(null);i.focus()}}))};i.on("keydown",function(n){n.which===13&&(n.preventDefault(),u())});t("#btnAddNewChecklistItem").on("click",u);t("#checklistItems").sortable({containment:"parent",opacity:.6,scroll:!0,placeholder:"ui-document-placeholder",refreshPositions:!0,tolerance:"pointer"});t("#checklistItems").on("click",".remove",function(){var n=t(this).closest("tr");n.remove()})};n.initAddUpdateRegion=function(n){t("#"+n.formId).ctvform({bAutoCloseModal:!0,fnJson:function(){t("#filterRegions").submit()}})};n.initAddUpdateOffice=function(n){t("#"+n.formId).ctvform({bAutoCloseModal:!0,fnJson:function(){t("#filterOffices").submit()}})};n.initAddUpdateTitle=function(n){t("#"+n.formId).ctvform({bAutoCloseModal:!0,fnJson:function(){t("#filterTitles").submit()}})};n.initCompanySettings=function(n){ctv.contextmenu.clearCanvasMenu();t("#"+n.formId).ctvform({bAutoSave:!0});var i=t("#"+n.canDeleteTransactionRoomsId),r=t("#"+n.canDeleteTransactionRoomDocumentsId);i.on("change",function(){t(this).is(":checked")&&r.attr("checked",!0)});r.on("change",function(){t(this).is(":checked")||i.attr("checked",!1)})};u=function(n){t("#"+n.formId).ctvform({fnSuccess:function(){t("#lockStatusContent").ctvload({url:n.refreshUrl,bEmptyContainer:!1})}})};n.refreshMemberGrid=function(){t("#filterMembers").trigger("submit")};n.initUnlockMember=function(n){u(n)};n.initLockMember=function(n){u(n)};n.initEditManagerAccess=function(i){var u=t("#"+i.formId);u.ctvform({fnJson:n.refreshMemberGrid,bAutoCloseModal:!0});r(i);u.find(".tokenize").ctvtoken()};n.initEditManagerPermissions=function(n){t("#"+n.formId).ctvform({bAutoSave:!0});i(n)};n.initEditAgent=function(i){var r=t("#"+i.formId);r.ctvform({bAutoSave:!0,fnJson:n.refreshMemberGrid});r.find(".tokenize").ctvtoken()};n.initRemoveMember=function(n){var i=function(){var n=t(this).val();t(this).closest(".roomContainer").find("select.selectRoom").each(function(){t(this).val(n).trigger("change")})};t("#"+n.formId).find(".selectAll,.selectOffice").change(i);t(document).on("click","#"+n.confirmButtonId,function(){t("#"+n.confirmId).val("true");t.ctvmodal("close");t("#"+n.formId).submit()});t("#"+n.formId).ctvform({fnSuccess:function(){var i=t("#"+n.confirmId).val()=="true";i||t.ctvmodal({html:t("#"+n.confirmPanelId).html()})},fnError:function(){t("#"+n.confirmId).val("false")}})};n.initConfirmRemoveMember=function(i){t("#"+i.formId).ctvform({fnJson:n.refreshMemberGrid,bAutoCloseModal:!0})};n.initReinvite=function(n){t("#"+n.formId).ctvform()}}(window.ctv.company=window.ctv.company||{},jQuery),function(n,t){function f(){t(window).infinite({msg:"",msgDone:"",more:"#pagingNav a:first",target:"tbody.target-rankings",item:"tr.item"})}var e=!1,o="companydashboard",r=null,u=null,i;n.init=function(){t("[data-content-url]").each(function(n,i){var r=t(i),f=r.data("contentUrl"),u=r.find(".panel");u.length==0&&(u=r);r.ctvload({url:f,bEmptyContainer:!1,loader:u})});$joyride=t("#joyride");$joyride.on("click",function(){t(document).foundation().foundation("joyride","start")})};n.initPieCharts=function(n){t("[data-piechart]").ctvpiechart({showLabels:n.showLabels})};n.initLineCharts=function(){};n.toolTip=function(n,i,r){t('<div class="chart-tooltip"><p>'+r+"<\/p><\/div>").css({top:i+5,left:n+5}).appendTo("body").fadeIn(200)};n.initTransactionsApproved=function(){i=t("#transactionsApproved");stats=i.data("stats")||{};dates=i.data("dates")||{};name=i.data("name");target=i.find(".chart-line");n.initChart(i,stats,dates,target,name)};n.initNewListings=function(){i=t("#newListings");stats=i.data("stats")||{};dates=i.data("dates")||{};name=i.data("name");target=i.find(".chart-line");n.initChart(i,stats,dates,target,name)};n.initTransactionsExpired=function(){i=t("#transactionsExpired");stats=i.data("stats")||{};dates=i.data("dates")||{};name=i.data("name");target=i.find(".chart-line");n.initChart(i,stats,dates,target,name)};n.initTransactionsLost=function(){i=t("#transactionsLost");stats=i.data("stats")||{};dates=i.data("dates")||{};name=i.data("name");target=i.find(".chart-line");n.initChart(i,stats,dates,target,name)};n.initChart=function(i,f,e,o,s){i.bind("plothover",function(f,o,h){if(i.find("#x").text(o.x.toFixed(2)),i.find("#y").text(o.y.toFixed(2)),h){if(r!=h.dataIndex||u!=h.seriesIndex){r=h.dataIndex;u=h.seriesIndex;t(".chart-tooltip").remove();var c=e.data[u].data[h.dataIndex][1],l=h.datapoint[1];n.toolTip(h.pageX,h.pageY,c+" <br/>"+l+" "+s)}}else t(".chart-tooltip").remove(),r=null});i.ctvchart({Json:f,target:o})};n.initCharts=function(){var n=t(".target");t("#filterCharts").ctvfilter({bEmptyContainer:!1,target:n});t(".tourBtn").on("click",function(){t.ajax({url:"lexx.php",type:"post"})})};n.initPerformanceRankings=function(){var n=t(".target-rankings");t("#filterPerformanceRankings").ctvfilter({target:n,fnSuccess:function(){t(window).infinite("destroy");f()}});f()}}(window.ctv.companydashboard=window.ctv.companydashboard||{},jQuery),function(n,t){t.Colors={ActionBlue:"#0077c7",ActionGreen:"#66bf36",Charts:{PieChart:{Blue:"#00a9e3",LightBlue:"#87c9e2",DarkBlue:"#0065a8",Green:"#68bd45",Red:"#ff3300",Orange:"#ff7e00",Gray:"#eeeeee"},LineChart:{Blue:"#0096DB",Gray:"#C9C9C9",LightGray:"#D8D8D8"}}}}(window.ctv=window.ctv||{},window.ctv.constants=window.ctv.constants||{},jQuery),function(n,t,r,u){var e="cm-selected",f="vh";t.closeAll=function(){var n=r(".custom-menu:not(.vh)");n.each(function(){var n=r(this).data[e];n&&n.find("input:checkbox.item-cb:checked").length==0&&(n.toggleClass("selected",!1),n=null);r(this).toggleClass(f,!0);r(window).trigger("upload.update")})};t.clearCanvasMenu=function(){r("section.canvas").attr("data-cm","")};t.setCanvasMenu=function(n){r("section.canvas").attr("data-cm",JSON.stringify(n))};t.init=function(){if(!Modernizr.touch){r(window).on("upload.FilesAdded",t.closeAll);r(window).on("popover.open",t.closeAll);r(document).on("scroll",t.closeAll);r(document).on("click",function(n){n.button==0&&t.closeAll()});r(window).on("resize",t.closeAll);r(".custom-menu a").on("click",t.closeAll);r(document).on("contextmenu",function(n){var a,h,c;if(r(window).trigger("popover.open"),r(n.target).attr("data-cm")||r(n.target).parents("[data-cm]").length>0){var o=r(n.target).attr("data-cm")?r(n.target):r(n.target).parents("[data-cm]").first(),v=JSON.parse(r(o).attr("data-cm")),l=!1,t=r(".custom-menu[data-cmKey='"+v.k+"']"),s=t.attr("data-cmMulti")!=u&&r(".item.selected").length>0,y=o.hasClass("selected"),p=y&&r(".item.selected").length==1;s&&!y&&(o.closest("[data-msContainer]").find(".item.selected").each(function(){r(this).toggleClass("selected",!1);r(this).find("input:checkbox").prop("checked",!1)}),s=!1);s&&p&&(s=!1);o.hasClass("item")&&(o.toggleClass("selected",!0),o.data[e]=o);t.find("li.divider").toggleClass("hide",!1);t.find("li:not(.divider):not([data-cmsubmenu])").toggleClass(f,!0);r(v.items).each(function(){var n=t.find("a[data-cmKey='"+this.k+"']"),i,e;if(n.off("click"),n.length>0){for(i in this.a)n.attr(i.replace("_","-"),this.a[i]);if(s)if(n.attr("data-cmMulti")!=u){l=!0;n.attr("href",n.attr("data-mshref"));n.closest("li").toggleClass(f,!1);n.off("click");n.on("click",function(t){t.preventDefault();t.stopPropagation();r.ctvmodal({url:n.attr("data-mshref"),data:function(){var n=[];return r(o).closest("[data-msContainer]").find("input:checkbox:checked").each(function(t,i){n.push(r(i).val())}),{ids:n}},type:"post"})})}else n.closest("li").toggleClass(f,!0);else e=n.attr("data-msOnly")=="true",e||(l=!0),n.closest("li").toggleClass(f,e)}});a=function(n){var h=n.children("li.divider:not(."+f+")"),t=h.map(function(){return r(this).index()}),e;if(t.length>0){var o=t[0],s=[],u=[];for(s.push(u),i=0;i<t.length;i++)t[i]==o+0?u.push(t[i]):(u=[],s.push(u),u.push(t[i]),o=0,o=t[i]),o++;r.each(s,function(){for(i=1;i<this.length;i++)r(n.children("li").get(this[i])).toggleClass(f,!0)})}e=n.children("li:not(."+f+")");e.first().hasClass("divider")&&e.first().toggleClass(f,!0);e.last().hasClass("divider")&&e.last().toggleClass(f,!0)};t.find("li[data-cmsubmenu]").map(function(){return{node:r(this),depth:r(this).parents().length}}).sort(function(n,t){return n.depth>t.depth?-1:n.depth<t.depth?1:0}).each(function(){a(this.node.find("ul").first());this.node.find("li").length==this.node.find("li."+f).length&&this.node.toggleClass(f,!0)});a(t.find("ul").first());l&&(n.preventDefault(),n.stopPropagation(),h=n.pageY,c=n.pageX,t.toggleClass(f,!1),h+t.outerHeight()>r(window).height()+r(window).scrollTop()&&(h=r(window).height()+r(window).scrollTop()-t.outerHeight()),c+t.outerWidth()>r(window).width()+r(window).scrollLeft()&&(c=r(window).width()+r(window).scrollLeft()-t.outerWidth()),t.css({top:h+"px",left:c+"px"}))}})}}}(window.ctv=window.ctv||{},window.ctv.contextmenu=window.ctv.contextmenu||{},jQuery),function(n,t){t.AccountType={FreeId:"free"};t.UserType={RealEstateProfessionalId:"repro"};t.ProfessionalType={RealEstateBrokerId:"rebroker"}}(window.ctv=window.ctv||{},window.ctv.dbcache=window.ctv.dbcache||{},jQuery),function(n,t,i){function r(n){n.find("input:checkbox:checked, input:radio:checked").addClass("checked")}function u(n){n.find(".tbl").find("tbody tr:even").addClass("alt-row")}function f(n){n.find(".switch-cb").on("change",function(){var n=i(this),t=n.closest(".switch");n.is(":checked")?t.addClass("checked"):t.removeClass("checked")})}t.initDynamicContent=function(n){r(n);u(n);f(n)};t.initBrowserUpdateMessage=function(){i.ajax({cache:!0,type:"get",url:"/site/outdatedbrowser",success:function(n){i("body").prepend(n)}})}}(window.ctv=window.ctv||{},window.ctv.ie8=window.ctv.ie8||{},jQuery),function(n,t){function i(){t("#nav a").length&&(t("header").find(".logo").before('<a id="btn-menu" class="btn-menu icof-menu"><span class="sr-text">Menu<\/span><\/a>'),t("#btn-menu").sidr({name:"nav-menu",source:function(){var n="<div><ul>";return t("#nav, #siteNavSubMenu").find("a[href]").each(function(i,r){n=n+t(r).parent().get(0).outerHTML}),n+="<\/ul><\/div>"}}))}function r(){var n=navigator.userAgent.toLowerCase(),i=n.indexOf("android")>-1;if(i)t("body").find(".switch-inner").on("click",function(){t(this).prev().prop("checked")?(t(this).addClass("switch-android-on").removeClass("switch-android-off"),t(this).next().addClass("switch-cb-android-on").removeClass("switch-cb-android-off")):(t(this).addClass("switch-android-off").removeClass("switch-android-on"),t(this).next().addClass("switch-cb-android-off").removeClass("switch-cb-android-on"))})}n.initSelectBox=function(t){n.isOutdatedBrowser(7)||t.find('select.input-select:not("[multiple]")').ctvselect()};n.initDatePicker=function(n){n.find('.input-date:not("[readonly],[disabled]")').each(function(){var n=t(this).attr("placeholder");t(this).datepicker({autoclose:!0,todayHighlight:!0,format:n})})};n.initPlaceholderFix=function(n){Modernizr.input.placeholder||n.find("[placeholder]").each(function(){var n=t(this);n.watermark(n.attr("placeholder"))})};n.initModals=function(n,i,r){n.on("click",i,r||{},function(n){n.preventDefault();var u=t(this),f=u.data("ctvmodal")||{},i=t.extend(r,f);(i.url=u.attr("href"),!i.beforeRun||i.beforeRun(u))&&t.ctvmodal(i)})};n.initSuper=function(n,i,r){n.on("click",i,r||{},function(n){n.preventDefault();var i=t(this),f=i.data("ctvsuper")||{},u=t.extend(r,f);u.url=i.attr("href");t.ctvsuper(u)})};n.initSuper2=function(n,i,r){n.on("click",i,r||{},function(n){n.preventDefault();var i=t(this),f=i.data("ctvsuper2")||{},u=t.extend(r,f);u.url=i.attr("href");t.ctvsuper2(u)})};n.initPopover=function(n){n.find("[data-popover]").each(function(){var r=t(this),n={},i=r.data("popover");typeof i=="string"&&(n.content=t("#"+i));i.tip||(n.tip=6);r.popover(n)})};n.initTipsy=function(n){Modernizr.touch||n.find(".tooltip").each(function(){var n=t(this),i=null;n.hasClass("east")?i="e":n.hasClass("south")?i="s":n.hasClass("nw")?i="nw":n.hasClass("ns")&&(i=t.fn.tipsy.autoNS);n.tipsy({gravity:i})})};n.initStickyElements=function(n){n.find("[data-sticky]").sticky({container:function(n){return n.closest(".supr2-modal").length>0?t(".supr2-modal"):t(window)}})};n.initDependentCheckboxes=function(n){var i=n.find("input:checkbox[data-depends]");t.each(i,function(n,i){i=t(i);var r=t("#"+i.data("depends"));i.on("change",function(){i.is(":checked")&&r.prop("checked",!0)});r.on("change",function(){r.is(":checked")||i.prop("checked",!1)})})};n.isOutdatedBrowser=function(n){n=n||8;var t=0;return navigator.appVersion.indexOf("MSIE")!=-1?(t=parseFloat(navigator.appVersion.split("MSIE")[1]),t<=n):!1};n.initDynamicContent=function(t){n.initSelectBox(t);n.initDatePicker(t);n.initPlaceholderFix(t);n.initTipsy(t);n.initPopover(t);n.initStickyElements(t);n.initDependentCheckboxes(t);n.isOutdatedBrowser()&&n.ie8.initDynamicContent(t)};n.initPage=function(n){n.message&&t.ctvnoty.success({text:n.message});n.errorMessage&&n.errorMessage.length>0&&t.ctvnoty.error({text:n.errorMessage});n.infoMessage&&n.infoMessage.length>0&&t.ctvnoty.info({text:n.infoMessage})};n.init=function(){var u=t(document);i();r();n.initModals(u,"[data-ctvmodal]");n.initSuper(u,"[data-ctvsuper]");n.initSuper2(u,"[data-ctvsuper2]");t.ctvload.always=n.initDynamicContent;n.initDynamicContent(u);n.isOutdatedBrowser()&&n.ie8.initBrowserUpdateMessage()}()}(window.ctv=window.ctv||{},jQuery),function(n,t,i){t.init=function(){i("[data-percent]").ctvmeter();i("[data-content-url]").each(function(n,t){var r=i(t),f=r.data("contentUrl"),u=r.find(".panel");u.length==0&&(u=r);r.ctvload({url:f,bEmptyContainer:!1,loader:u})})};t.initGrid=function(){i("#filterItems").ctvfilter({target:"#target",fnSuccess:function(){}})};t.initPieCharts=function(n){i("[data-piechart]").ctvpiechart({showLabels:n.showLabels})}}(window.ctv=window.ctv||{},window.ctv.dashboard=window.ctv.dashboard||{},jQuery),function(n,t,i){function u(n){if(t("#external-doc").length){if(n&&n==="True")t("#documentTopDetails").find(".supr2-close").on("click.confirmClose",function(n){n.preventDefault();n.stopPropagation();r(!1)});window.document.getElementById("external-doc").onload=f}}function f(){function f(f){if(f.origin===n&&f.data.method==="checkDirty")if(u||f.data.returnedValue!==i)f.data.returnedValue===!0?r(!0):t.ctvsuper2("close");else{u=!0;t("#documentTopDetails").find(".supr2-close").off(".confirmClose").on("click.confirmClose",function(n){n.preventDefault();n.stopPropagation();document.getElementById("external-doc").contentWindow.postMessage(["checkDirty"],f.origin)})}}if(window.postMessage){var n=t.url(window.document.getElementById("external-doc").src).attr("base"),u=!1;t(window).off("message").on("message",function(n){f(n.originalEvent)});window.document.getElementById("external-doc").contentWindow.postMessage(["checkDirty"],n)}}function r(n){t.ctvconfirm({templateId:"zf-confirm-close",templateModel:{hasChanges:n},fnOnNo:function(){t.ctvsuper2("close")}})}function e(){function i(){if(t("#ctvsuper2").length){var u=n.offset().top,i=t(window).height(),f=t(window).scrollTop(),r=i-(u-f);n.parent().height(r)}else{var e=t("body").height(),i=t(window).height(),o=n.outerHeight(),s=i-e,r=s+o;n.parent().height(r)}}var n=t("#external-doc");if(n.length){i();t(window).resize(function(){i()});return}}n.init=function(n){e();u(n.isZipFormClosingDialogEnabled)}}(window.ctv.docZipForm=window.ctv.docZipForm||{},jQuery),function(n,t){function r(){function i(){t("#splitActions").on("click.fileAdd","[data-file-add]",function(){r(!0)}).on("click.fileRemove","[data-file-remove]",function(){var n=t(this).parent();r(!1,n)})}function r(n,r){t("#splitActions").off("click.fileAdd").off("click.fileRemove");n?u():f(r);i.apply()}function u(){var n=t('[name="files[]"]').length,u,r,i;n==5?t.ctvnoty.info({clear:!0,text:"You can split this PDF into a maximum of 5 new documents."}):(u=n,n++,r="New File #"+n,i={index:u,name:r,label:r,count:n},t.Mustache.load("/assets/templates/AddNewFileName.htm").done(function(){t("#splitActions").mustache("add-new-file-name",i,{method:"append"});t("[data-sticky]").sticky("reposition");var n='<option value="'+i.count+'">'+i.count+"<\/option>";t("#document-preview .thumb select").each(function(){t(this).append(n)})}))}function f(n){var i=t('[name="files[]"]').length,r=n.index();n.remove();i--;t("#splitActions").find("label").each(function(n,i){var u="New File #"+(n+1),r;t(i).text(u);r=t(i).next("input");r.val().indexOf("New File #")>-1&&r.val(u)});t("#document-preview .thumb select").each(function(){var n=t(this).find('[value="'+(r+1)+'"]');n.nextAll("option").each(function(){var n=t(this),i=n.index()-1;n.attr("value",i).text(i)});n.remove();t(this).val()||t(this).siblings("input:checkbox").attr("checked",!1)});i==1}var n=1;t("#document-preview").on("change","select",function(){n=t(this).val()||n});t("#document-preview").on("click","input:checkbox",function(){var i=t(this).siblings("select");t(this).is(":checked")?i.removeAttr("disabled").val(n):i.attr("disabled","disabled").val("")});i()}function u(n){if(n){var i=t("#documentTopDetails");i.html(n);ctv.initDynamicContent(i)}}function i(){ctv.documents.refreshGrid()}n.initDetails=function(n){ctv.docZipForm.init(n);t("#"+n.formIdEditDoc+", #"+n.formIdSplitDoc).ctvform({formData:function(){var n=t("#document-preview").jdoc("serialize"),i=JSON.stringify(n);return[{name:"pages",value:i}]},fnBeforeSubmit:function(){t("#document-preview").before('<div id="saving" class="load-msg-wrapper saving"><div class="load-msg">Saving your new document. This may take a few moments, so please do not navigate away.<\/div><\/div>')},fnComplete:function(){t("#saving").remove()}});t("#documentTopDetails").ctvnav({item:"[data-ajax-nav]",target:"#documentDetails"});n.hasData&&(t.extend(n,{fnAfterLoad:function(){setTimeout(function(){t("[data-sticky]").sticky("reposition")},200);var i=t('[data-doc-id="'+n.id+'"]');i.hasClass("new")&&i.removeClass("new").find(".new").remove();r()}}),t("#document-preview").jdoc(n))};n.initAccess=function(n){var i=t("#documentLeftNav"),r=i.find(".logs-items"),u=i.find(".logs-target");t("#tblDocumentAccess").on("change",".switch-cb",function(){var i=t(this),r=i.val(),u=i.is(":checked");t.ajax({type:"post",url:n.urlToggleAccess,data:{userId:r,grantAccess:u},success:function(n){n&&(n.Error.length>0?t.ctvnoty.error({clear:!0,text:n.Error}):n.Info.length>0?t.ctvnoty.info({clear:!0,text:n.Info}):n.Success.length>0&&t.ctvnoty.success({clear:!0,text:n.Success}))},error:function(){t.ctvnoty.error({text:"Your changes could not be saved."})}})});t("#"+n.toggleAllFormId).ctvform({bAutoSave:!0,fnJson:function(n){t.ctvmodal("update",n.Html)}})};n.initCopy=function(n){ctv.search.initDestinationPicker(n);t("#"+n.formId).ctvform({bAutoCloseModal:!0,fnJson:i})};n.initDelete=function(n){t("#"+n.formId).ctvform({bAutoCloseModal:!0,fnJson:i})};n.initConfirmEmail=function(n){var r=t("#"+n.formId);r.ctvform({bAutoCloseModal:!0,fnJson:i})};n.initEmail=function(n){var r=t("#"+n.formId);r.ctvform({bAutoCloseModal:!1,fnJson:function(n){n.Html?t.ctvmodal({html:n.Html}):(i(),t.ctvmodal("close"))}});r.find(".input-textarea").ctvtextarea({countDisplay:null})};n.initFax=function(n){t("#"+n.formId).ctvform({bAutoCloseModal:!1,fnJson:function(n){n.Html?t.ctvmodal({html:n.Html}):(i(),t.ctvmodal("close"))}})};n.initConfirmFax=function(n){t("#"+n.formId).ctvform({bAutoCloseModal:!0,fnJson:function(){i()}})};n.initMove=function(n){ctv.search.initDestinationPicker(n);t("#"+n.formId).ctvform({bAutoCloseModal:!0,fnJson:i})};n.initRename=function(n){t("#"+n.formId).ctvform({bAutoCloseModal:!0,fnJson:function(n){t("#documentName, #docCrumbs a:last").text(n.Data.Name);i()}})};n.initComplianceAction=function(n){t("#"+n.formId).ctvform({bAutoCloseModal:!0,fnJson:function(n){u(n.Html);i()}})}}(window.ctv.document=window.ctv.document||{},jQuery),function(n,t){function i(n){var i=n.find(".select-list"),r=n.find("[data-counter]");r.counter({container:i,item:'input[name*="IsSelected"][value="True"]',onUpdate:function(n){n==0&&t.ctvmodal("close")}});i.on("click",".remove",function(){var n=t(this).closest("tr");n.find('input[name*="IsSelected"]').val("False");n.hide();r.counter("update")})}var r={roomId:0,folderId:null};n.initGrid=function(n){function f(n){n?u.fadeIn("fast"):u.fadeOut("fast")}var s=t.extend(t.extend({},r),n),u=t("#bulkActions"),i=t("#target"),e=t("#selectAll, #selectAll2"),o;e.selectall({container:"#target",item:".item.can-select",itemCheckbox:"input:checkbox",selected:"selected",fnHandleSelectAll:function(n,t){f(t)},fnHandleSelectItem:function(n,t,i){f(i)}});t("#filterDocuments").ctvfilter({target:i,fnSuccess:function(){e.attr("checked",!1);f(!1)}});ctv.initModals(u,"a",{type:"post",beforeRun:function(i){if(i.find(".icof-approve").length==1){var u=t(".doc-item.cl-item.assigned:not(.rejected) .item-cb:checked").length>0,f=t(".doc-item:not(.cl-item) .item-cb:checked").length>0,e=t(".doc-item.cl-item.assigned.rejected .item-cb:checked").length>0,o=t(".doc-item.cl-item.approved .item-cb:checked").length>0,r=f||e||o||!u;return r&&t.ctvnoty.error({text:n.bulkApproveOnlyChecklistErrorMsg,clear:!0}),!r}return!0},data:function(){var n=[];return i.find("input:checkbox:checked").each(function(i,r){n.push(t(r).val())}),{ids:n}}});o=function(n){n.preventDefault();var r=t(this).attr("href");i.ctvload({cache:!1,url:r});history.pushState(null,null,r)};i.off(".crumb").on("click","a.crumb",o);t("[data-percent]").ctvmeter()};n.refreshGrid=function(){t("#filterDocuments").submit()};n.initApprove=function(r){var u=t("#"+r.formId),f=function(i){var r=!1;i.responseJSON&&i.responseJSON.Data&&(t.each(i.responseJSON.Data,function(){this.success&&(u.find("tr[data-docId="+this.docId+"]").remove(),r=!0)}),u.find("[data-counter]").counter("update"));r&&n.refreshGrid()};u.ctvform({bAutoCloseModal:!0,fnJson:f});i(u)};n.initCombine=function(n){var r=t("#"+n.formId);r.ctvform({bAutoCloseModal:!0});r.find(".input-textarea").ctvtextarea({countDisplay:null});i(r);t("#tblCombineDocuments").sortable({placeholder:"ui-document-placeholder",tolerance:"pointer",stop:function(){t("#tblCombineDocuments tr").each(function(n,i){t(i).find(".order").val(n)})}})};n.initCopy=function(n){ctv.search.initDestinationPicker(n);var r=t("#"+n.formId);r.ctvform({bAutoCloseModal:!0});i(r)};n.initDelete=function(r){var u=t("#"+r.formId);u.ctvform({bAutoCloseModal:!0,fnJson:n.refreshGrid,fnError:n.refreshGrid});i(u)};n.initConfirmEmail=function(n){var r=t("#"+n.formId);r.ctvform({bAutoCloseModal:!0});r.find(".input-textarea").ctvtextarea({countDisplay:null});i(r)};n.initEmail=function(n){var r=t("#"+n.formId);r.ctvform({bAutoCloseModal:!1,fnJson:function(n){n.Html?t.ctvmodal({html:n.Html}):t.ctvmodal("close")}});r.find(".input-textarea").ctvtextarea({countDisplay:null});i(r)};n.initMove=function(r){ctv.search.initDestinationPicker(r);var u=t("#"+r.formId);u.ctvform({bAutoCloseModal:!0,fnJson:n.refreshGrid});i(u)};n.initRemoveChecklist=function(i){var r=t("#"+i.formId);r.ctvform({bAutoCloseModal:!0,fnJson:n.refreshGrid})};n.initDownload=function(n){var r=t("#"+n.formId);i(r);r.find("button").on("click",function(){t.ctvmodal("close")})};n.initDocumentDragDrop=function(){function i(i,r){var e=r.data("docName"),u=r.data("docId"),f=r.data("virtual");f.toLowerCase()=="true"&&t.ctvnoty.success({text:"Attaching document.",clear:!0});t.ctvload(null,{url:i,data:{DocumentId:u,isDragAndDrop:!0},contentFill:!1,type:"POST",loader:!1,fnBeforeSend:t.noop,fnJson:function(i){i.Error.length>0?t.ctvnoty.error({text:i.Error}):i.Info.length>0?t.ctvnoty.info({text:i.Info}):i.Success.length>0&&(t.ctvnoty.success({text:i.Success,clear:!0}),r.fadeOut(function(){n.refreshGrid()}))}})}t(document).on("mouseenter","#target .doc-item:not(.approved)",function(){var u=t(this),n,r;t(document).find(".can-assign, .doc-item:not(.approved)").length&&(n=t(this).is("tr")?"section.canvas":"#target",r=t(this),t(r).draggable({zIndex:"1000",appendTo:"parent",containment:n,drag:function(n,t){t.position.top=t.offset.top},helper:function(){var i=t(this),n=t(this).clone();return t(this).is("tr")?i.find("td").each(function(i,r){n.find("td").eq(i).width(t(r).outerWidth())}):n.css({position:"absolute"}),n.get(0)},revert:"invalid",start:function(n,r){r.position.top=r.offset.top;t(document).find(".can-assign, .assigned:not(.ui-draggable-dragging)").droppable({accept:".doc-item",activeClass:"drop-doc-here",drop:function(n,r){var u=t(this).data("checklistUrl");i(u,r.draggable,t(this))}});t("#docGrid, #docUnAssignDrop").droppable({accept:".doc-item.assigned",activeClass:"drop-doc-here",drop:function(n,r){var f=t(u).data("unassignurl");i(f,r.draggable,t(this))}})}}))})}}(window.ctv.documents=window.ctv.documents||{},jQuery),function(n,t){n.initLink=function(){t("#formLinkDocusign").ctvform({fnHtml:function(n){t.ctvmodal("update",{html:n})}})};n.initUnlink=function(n){t("#"+n.formId).ctvform({bAutoCloseModal:!0,fnJson:function(){t("[data-navlist]").find("a.on").trigger("click")}})}}(window.ctv.docusign=window.ctv.docusign||{},jQuery),function(n,t){function r(){t(".var-height").vheight({match:t(".match-height")})}function i(n){var t=n.find(".select-list"),i=n.find("[data-counter]");i.counter({container:t,item:".switch-cb:checked"});t.on("change",".switch-cb",function(){i.counter("update")})}function u(n,i){return i.children().each(function(){var n=t(this);n.width(n.width())}),i}n.initGrid=function(){t("#filterEnvelopes").ctvfilter({target:"#target",fnSuccess:function(){}})};n.initCreate=function(i){t("#"+i.formId).ctvform({fnJson:function(i){t.ctvmodal("close");n.refreshEnvelopesIndex();t("<a />",{href:i.Data.url,"class":"vh","data-ctvsuper2":""}).appendTo("body").trigger("click")}});t("#Envelope_Name").on("input",function(){var n=t(this).val();t("#Envelope_Subject").val(n)})};n.showDsSuccess=function(n){n&&(typeof n=="string"&&(n=JSON.parse(n)),n.show&&t.ctvmodal({closeText:"Close",url:n.url}))};n.refreshEnvelopesIndex=function(){t("#filterEnvelopes").trigger("submit")};n.initDetails=function(i){r();var u=t("#formUpdateEnvelope");u.ctvform({bAutoSave:!0,fnJson:function(){t("#EnvelopeName, #envCrumbs a:last").text(t("#Envelope_Name").val());n.refreshEnvelopesIndex()}});u.find(".section-footer").remove();t("#btnGoTag").on("click",function(n){n.preventDefault();var r=t(this).attr("href"),i=t("<form />",{action:r,method:"post"});i.appendTo("body");i.ctvform();i.trigger("submit")});t("[data-counter]").counter({monitor:!0,item:"tbody tr:not(.ui-document-placeholder)"}).counter("update");n.initDocumentsIndex();n.initRecipientsIndex();t(i.formSelector).ctvform({fnBeforeSubmit:function(){i.isPreparing&&t.ctvnoty.success({text:i.preparingMsg,timeout:!1})},fnError:function(n,i,r){t.ctvnoty.clear();t.ctvnoty.error({text:r})},fnJson:function(n){n.Html&&(t.ctvnoty.clear(),t.ctvmodal({html:n.Html}))}})};n.initDocumentsIndex=function(){t("#documents").on("click",".remove",function(){var i=t(this).closest("tr"),r=i.data("envelopeId"),u=i.data("documentId");t.ajax({url:"/envelopedocuments/remove",type:"post",data:{documentId:u,envelopeId:r},success:n.refreshDocuments})});t("#documents").on("change","select",function(){var i=t(this).closest("tr").data("id"),r=t(this).val();t.ajax({url:"/envelopedocuments/position",type:"post",data:{id:i,position:r},success:n.refreshDocuments})})};n.initUpdateDocuments=function(r){var u=t("#"+r.formId);u.ctvform({bAutoCloseModal:!0,fnSuccess:n.refreshDocuments});i(u)};n.refreshDocuments=function(){var n=t("#documents");n.ctvload({url:n.data("contentSrc"),bEmptyContainer:!1})};n.initRecipientsIndex=function(){t("#recipients").on("click",".remove",function(){var i=t(this).closest("tr"),r=i.data("envelopeId"),u=i.data("userId");t.ajax({url:"/enveloperecipients/remove",type:"post",data:{envelopeId:r,userId:u},success:n.refreshRecipients})});t("#recipients").on("change","select",function(){var i=t(this).closest("tr"),r=i.data("envelopeId"),u=i.data("userId"),f=t(this).val();t.ajax({url:"/enveloperecipients/position",type:"post",data:{envelopeId:r,userId:u,position:f},success:n.refreshRecipients})})};n.initUpdateRecipients=function(r){var u=t("#"+r.formId);u.ctvform({bAutoCloseModal:!0,fnSuccess:n.refreshRecipients});i(u);u.on("change","select",function(){t(this).val()!=""&&t(this).closest("tr").find("input:checkbox").attr("checked",!0).trigger("change")})};n.initUpdateRecipientMessage=function(i){var r=t("#"+i.formId);r.ctvform({bAutoCloseModal:!0,fnSuccess:n.refreshRecipients});r.find(".input-textarea").ctvtextarea({countDisplay:null})};n.refreshRecipients=function(){var n=t("#recipients");n.ctvload({url:n.data("contentSrc"),bEmptyContainer:!1})};n.initDelete=function(n){t("#"+n.formId).ctvform()};n.initDocumentSort=function(){t(".mod-no-touch #envelopeDocuments tbody").sortable({containment:"parent",helper:u,opacity:.6,scroll:!0,placeholder:"ui-document-placeholder",refreshPositions:!0,tolerance:"pointer",start:function(n,t){t.placeholder.html("<td colspan='6'><\/td>")},stop:function(n,t){var i=t.item.index()+1,r=parseInt(t.item.find("select#DisplayOrder").val());i!=r&&t.item.find("select#DisplayOrder").val(t.item.index()+1).trigger("change")}})};n.initAssignAndSeal=function(n){var e=function(){return"allow"},f={hasBack:!0,hasCancel:!0,hasNext:!0,hasSubmit:!1,cancelText:n.cancelText,nextText:n.nextText,backText:n.backText,fnTransition:e},r=[];r[1]=t.extend({},f,{hasBack:!1});r[2]=t.extend({},f,{hasNext:n.containsDocumentsWithoutTagging?!0:!1,nextText:n.continueText,hasSubmit:n.containsDocumentsWithoutTagging?!1:!0,hasCancel:!1,fnTransition:function(i){var u=t("select.signer"),f;if(i=="previous")return"skip";var e=u,r=u.filter(function(){return!t(this).val()}),o=t("[data-step='2']");return t("#tableMissingRoles").html(""),f=e.map(function(){var n=t(this).attr("id"),i,r,u=t("select[id='"+n+"']").val();return u==""?(i="EMPTY",r=null):(i=t("select[id='"+n+"'] :selected").text(),r="status-text-green"),data={label:t("label[for='"+n+"']").html(),assignee:i,assigneeClass:r}}),t(f).each(function(){t("#tableMissingRoles").append("<tr><td><span>"+this.label+"<\/span><\/td><td><span class='"+this.assigneeClass+"'>"+this.assignee+"<\/span><\/td><\/tr>")}),t(".tags-missing").toggleClass("vh",r.length==0),t(".tags-good").toggleClass("vh",r.length>0),r.length>0?"allow":n.containsDocumentsWithoutTagging?"skip":"allow"}});r[3]=t.extend({},f,{hasSubmit:!0,hasNext:!1,hasBack:!1});var i=1,o=function(){u(i+1)},s=function(){u(i-1)},u=function(n){var e=n<i?"previous":"next",f=r[n],o=f.fnTransition(e);switch(o){case"skip":n<i?u(n-1):u(n+1);return}i=n;t("[data-step]").toggleClass("vh",!0);t("[data-step='"+n+"']").toggleClass("vh",!1);t("button.modal-close").toggleClass("vh",!f.hasCancel);t("#btnBack").toggleClass("vh",!f.hasBack).find("span.text").html(f.backText);t("#btnNext").toggleClass("vh",!f.hasNext).find("span.text").html(f.nextText);t("#btnSubmit").toggleClass("vh",!f.hasSubmit)};t("#btnBack").click(s);t("#btnNext").click(o);t("#"+n.formId).ctvform()}}(window.ctv.envelopes=window.ctv.envelopes||{},jQuery),function(n,t){function i(){t("#filterFolders").trigger("submit")}n.initGrid=function(){t("#filterFolders").ctvfilter({target:"#target"})};n.initAdd=function(n){t("#"+n.formId).ctvform({bAutoCloseModal:!0,fnJson:i})};n.initRename=function(n){t("#"+n.formId).ctvform({bAutoCloseModal:!0,fnJson:i})};n.initDelete=function(n){t("#"+n.formId).ctvform({bAutoCloseModal:!0,fnJson:i})}}(window.ctv.folders=window.ctv.folders||{},jQuery),function(n,t){n.initAddFaxNumber=function(n){var i=t("#"+n.formId);i.ctvform({bAutoCloseModal:!1,fnSuccess:function(){t.ctvmodal("update",{url:n.successUrl,closeText:"OK"})}})}}(window.ctv.inbox=window.ctv.inbox||{},jQuery),function(n,t,i){function u(){r&&(i.storage=new i.store)}var r;t.init=function(){r=n.isOutdatedBrowser(7);r=Modernizr.localstorage;u()};t.get=function(n){if(r)return i.storage.get(n)};t.set=function(n,t){r&&i.storage.set(n,t)};t.deleteKey=function(n){r&&i.storage.del(n)}}(window.ctv=window.ctv||{},window.ctv.localstorage=window.ctv.localstorage||{},jQuery),function(n,t){n.init=function(n){ctv.localstorage.init();var u=t("#"+n.formId),i="CtvLogin",r=t("#Email"),o=t("#Password"),f=t("#RememberMe"),e=ctv.localstorage.get(i);e&&!r.val()&&(r.val(e).blur(),f.attr("checked",!0));u.find("input[value='']:not(:checkbox,:button):visible:first").focus();u.ctvform({fnSuccess:function(n){f.is(":checked")?ctv.localstorage.set(i,r.val()):ctv.localstorage.deleteKey(i);n.Html?t(".login").html(n.Html):n.Redirect&&(location.href=n.Redirect)}})}}(window.ctv.login=window.ctv.login||{},jQuery),function(n,t){function r(n){var u=[],i=[],f=n.status,r=t("#filterTransactions").serializeObject();t.extend(r,{Latitude:lat,Longitude:long,status:f});t.ajax({url:"/transactions/map",data:r,type:"GET",cache:!1,dataType:"json",success:function(n){t("#m").load("/assets/templates/mapItemDetail.htm",function(){var r=t("#map-item-detail").html();locationData=n.markers;t.each(locationData,function(n,f){var s=Mustache.to_html(r,locationData[n]),e=new google.maps.Marker({position:new google.maps.LatLng(f.latitude,f.longitude),map:map,title:t.trim(f.address),icon:locationData[n].marker}),o=new InfoBox({content:s,alignBottom:!0,infoBoxClearance:new google.maps.Size(100,100)});u[n]=e;i[n]=o;google.maps.event.addListener(e,"click",function(){t.each(i,function(n){i[n].close()});o.open(map,e)})})})},error:function(n,i,r){t.ctvnoty.error({text:"Error: "+(r?r:n.status)})}})}function u(n){var u,i;navigator.geolocation?(u=!0,navigator.geolocation.getCurrentPosition(function(i){lat=i.coords.latitude;long=i.coords.longitude;var u=new google.maps.LatLng(lat,long);map=new google.maps.Map(document.getElementById("map_canvas"),{zoom:12,center:u,mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:!1});userMarker=new google.maps.Marker({position:u,map:map,icon:{url:"/assets/img/marker-user.png"}});t("#map_key").fadeIn("500");r(n)},function(t){f(t.code,n)},{maximumAge:6e5,timeout:15e3,enableHighAccuracy:!0})):(i=t(".nc-maps"),i.find("p").text(n.eb),i.fadeIn())}function f(n,i){var r=t(".nc-maps"),u=t("#map_canvas");switch(n){case 0:r.find("p").text(i.e0);break;case 1:r.find("p").text(i.e1);break;case 2:r.find("p").text(i.e2);break;case 3:r.find("p").text(i.e3)}r.fadeIn("400",function(){u.fadeOut()})}var i={};n.init=function(r){i=r;window.google&&window.google.maps?n.setupMap(r):t.getScript("//maps.googleapis.com/maps/api/js?key="+r.apiKey+"&sensor=true&callback=ctv.gmaps.apiCallback")};n.apiCallback=function(){t.getScript("/assets/js/libs/infobox-1.1.12.js",function(){n.setupMap()})};n.setupMap=function(n){n=i;var f,r,e;f=n.map?t(n.map):t("#map_canvas");r=t("header").height()+t(".subnav").height()+t(".controls").height()+10;e=t(window).height()-r;f.css("height",e).css("top",r);u(n)}}(window.ctv.gmaps=window.ctv.gmaps||{},jQuery),function(n,t){n.initSideNav=function(){var n=t("[data-navlist]"),i=n.data("navlist");n.ctvnav({item:".item",target:"#"+i})};n.refresh=function(){t("[data-navlist]").find("a.on").trigger("click")};n.initProfile=function(){t("#photo").ctvcrop({triggers:["#imgPhoto"],cropMinHeight:72,cropMinWidth:57,cropMaintianAspectRatio:!0,cropPhoto:"imgPhotoToCrop",fnDone:function(n){t("#imgPhoto, #userImage").attr("src",n)}});t("#btnClearPhoto").on("click",function(n){n.preventDefault();var i=t(this).data("action");t.ajax({url:i,type:"post",success:function(n){t("#imgPhoto, #userImage").attr("src",n.url)}})});t("#logo").ctvcrop({triggers:["#imgLogo"],cropMinHeight:40,cropMinWidth:60,cropMaintianAspectRatio:!1,cropPhoto:"imgLogoToCrop",fnDone:function(n){t("#imgLogo").attr("src",n)}});t("#btnClearLogo").on("click",function(n){n.preventDefault();var i=t(this).data("action");t.ajax({url:i,type:"post",success:function(n){t("#imgLogo").attr("src",n.url)}})});t("#formMyProfile").ctvform({fnJson:function(){var n=t("#User_FirstName").val(),i=t("#User_LastName").val();t("#userName").text(n+" "+i)}})};n.initChangePassword=function(n){t("#"+n.formId).ctvform({bResetOnSuccess:!0})};n.initContactInfo=function(n){t("#"+n.formId).ctvform()};n.initInboxDetails=function(n){t("#"+n.formId).ctvform()};n.initNotifications=function(n){t("#"+n.formId).ctvform()};n.initLinkDocuSign=function(i){t("#"+i.formId).ctvform({fnJson:function(){n.refresh()}})};n.initLinkZipFormAccount=function(i){t("#"+i.formId).ctvform({fnJson:function(){n.refresh()}})};n.initZipFormUpdateStatus=function(n){t("#"+n.formId).ctvform({bAutoSave:!0})};n.initUnlinkZipFormAccount=function(i){t("#"+i.formId).ctvform({bAutoCloseModal:!0,fnJson:function(){n.refresh()}})};n.initUnlinkSalesforceAccount=function(i){t("#"+i.formId).ctvform({bAutoCloseModal:!0,fnJson:function(){n.refresh()}})};n.initLinkTribusAccount=function(i){t("#"+i.formId).ctvform({fnJson:function(){n.refresh()}})};n.initUnlinkTribusAccount=function(i){t("#"+i.formId).ctvform({bAutoCloseModal:!0,fnJson:function(){n.refresh()}})};n.initBilling=function(n){t("#"+n.formId).ctvform()};n.initBillingCycle=function(n){t("#"+n.formId).ctvform()};n.initCloudStorage=function(n){var i=t("#"+n.formId);i.ctvform({bAutoSave:!0});i.find(".row-footer").remove();t(document).off("click","#btnConfirmClearLocalStorage").on("click","#btnConfirmClearLocalStorage",function(){window.ctv.addfilesdropbox.clearLocalStorage();window.ctv.addfilesskydrive.clearLocalStorage();window.ctv.addfilesgoogledrive.clearLocalStorage();window.ctv.addfilesbox.clearLocalStorage();t.ctvmodal("close");t.ctvnoty.success({text:n.clearAccountInfoNotification})})}}(window.ctv.myaccount=window.ctv.myaccount||{},jQuery),function(n,t){n.initForgotPassword=function(n){t("#"+n.formId).ctvform({redirectDelay:5e3})};n.initResetPassword=function(n){t("#"+n.formId).ctvform()}}(window.ctv.password=window.ctv.password||{},jQuery),function(n,t){function r(){var n=t("#target").find("#list").length>0?"#list tbody":".grid";t(window).infinite({msg:"Loading more people",msgDone:"No more people to show",more:"#pagingNav a:first",target:n,item:".item",fnAfterLoad:function(){t("#target").ctvImageDefer()}})}function i(){t("#filterPeople").submit()}function u(n){var t=n.find(".select-list");t.on("change",".switch-cb",function(){n.find(".count").text(t.find(".switch-cb:checked").length)})}n.initNetwork=function(){var n=t("#target");t("#filterPeople").ctvfilter({target:n,fnSuccess:function(){n.ctvImageDefer();t(window).infinite("destroy");r()}});n.ctvImageDefer();r()};n.initGrid=function(){var n=t("#target");t("#filterPeople").ctvfilter({target:n,fnSuccess:function(){n.ctvImageDefer()}})};n.initAdd=function(n){var r=t("#"+n.formId);r.ctvform({bAutoCloseModal:!0,fnJson:i});ctv.search.initAddPeoplePicker(n);u(r)};n.initInvite=function(n){t("#"+n.formName).ctvform({bAutoCloseModal:!0,fnJson:i})};n.initReinvite=function(n){t("#"+n.formId).ctvform({fnJson:i})};n.initModalForm=function(n){t("#"+n).ctvform({bAutoCloseModal:!0,fnJson:function(){i()}})};n.initDetails=function(){var n=t("[data-navlist]"),i=n.data("navlist");n.ctvnav({target:"#"+i})};n.initAccess=function(n){t("#access").on("change","input:checkbox",function(){var i=t(this),f=i.val(),r=i.is(":checked"),u=i.closest("[data-toggle]").data("toggle");t.ajax({type:"post",url:u,data:{userId:n.userId,grantAccess:r},success:function(n){n&&(n.Error.length>0?t.ctvnoty.error({clear:!0,text:n.Error}):n.Info.length>0?t.ctvnoty.info({clear:!0,text:n.Info}):n.Success.length>0&&t.ctvnoty.success({clear:!0,text:n.Success}))},error:function(){t.ctvnoty.error({text:"Your changes could not be saved."})}})});t("#"+n.toggleAllFormId).ctvform({bAutoSave:!0,fnJson:function(){t("#personLeftNavItems").find("a.on").trigger("click")}})};n.initFormRoomInfo=function(n){t("#"+n.formId).ctvform({fnJson:i})};n.initRemoveFromRoom=function(n){t("#"+n.formId).ctvform()}}(window.ctv.people=window.ctv.people||{},jQuery),function(n,t,i){t.initLinkTransaction=function(n){var r=i("#"+n.formId),t;r.ctvform({bAutoCloseModal:!0});t=i("#"+n.sObjectDropdownId);t.ctvpicker({placeholder:n.placeholderSelectSObject,url:n.sObjectUrl,pageSize:10});t.on("select2-open",function(){i("#whitespace").toggleClass("vh",!1)});t.on("select2-close",function(){i("#whitespace").toggleClass("vh",!0)})};t.initUnlinkTransaction=function(n){i("#"+n.formId).ctvform({bAutoCloseModal:!0})};t.from={};t.from.initCreateAndLinkTransaction=function(t){i("#"+t.formId).ctvform({bAutoCloseModal:!0});n.search.initRoomOwnerPicker(t)};t.from.initLinkTransaction=function(n){var t=i("#"+n.formId);t.ctvform({bAutoCloseModal:!0});t.on("click","input:radio",function(){setTimeout(function(){i("html, body").animate({scrollTop:i(document).height()-i(window).height()},"fast")},500)})};t.from.initUnlinkTransaction=function(n){i("#"+n.formId).ctvform({bAutoCloseModal:!0,fnSuccess:function(){}})}}(window.ctv=window.ctv||{},window.ctv.salesforce=window.ctv.salesforce||{},jQuery),function(n,t){n.initRoomOwnerPicker=function(n){function u(t){var r=i.val()=="agent";t.ctvpicker({placeholder:"- Select One -",showSearch:r,thumbCssClass:"square",url:n.url,dataType:n.dataType||"json",data:function(){return{ownerTypeId:i.val()}},initSelection:function(t,i){i({id:n.initialOwnerId,text:n.initialOwnerText})}})}var i=t("#"+n.ownerTypeDropdownId),r=t("#"+n.ownerDropdownId);u(r);i.val()||r.ctvpicker("disable");i.on("change",{ownerDropdown:r},function(n){if(n.data.ownerDropdown.select2("val",""),!i.val()){n.data.ownerDropdown.ctvpicker("disable");return}n.data.ownerDropdown.ctvpicker("destroy");u(n.data.ownerDropdown);n.data.ownerDropdown.select2("enable").select2("open")})};n.initDestinationPicker=function(n){var i=t("#"+n.areaDropdownId),r=t("#"+n.destinationDropdownId);r.ctvpicker({placeholder:"Select a Location",url:n.pickerUrl,data:function(){return{area:i.val()}}});r.ctvpicker("disable");i.on("change",{destinationId:r},function(n){n.data.destinationId.select2("val","");i.val()!=""?n.data.destinationId.select2("enable").select2("open"):n.data.destinationId.select2("disable")})};n.initAddPeoplePicker=function(n){var r,u,i=t("#"+n.formId),f=i.find("#UserId"),e=i.find(".tbl"),o=i.find(".select-list"),s=i.find(".count");f.ctvpicker({placeholder:"Search for someone from your network",thumbCssClass:"square",url:n.pickerUrl,data:function(){var i=e.find('[name*="UserId"]').map(function(n,i){return t(i).val()}).get().join(",");return{roomId:n.roomId,exclude:i}},fnResults:function(n){r=n.sides;u=n.roles},fnOnSelected:function(n){var e,i;f.select2("val","");e=t("#tblAddPeople").find("tbody");e.find(".empty").remove();i=n.added;i.index=e.find("tr").length;i.sides=r;i.roles=t.map(u,function(n){return{id:n.id,text:n.text,sel:n.id===i.roleId}});t.Mustache.load("/assets/templates/AddPersonRow.htm").done(function(){e.mustache("add-person-row",i,{method:"prepend"});e.find(".input-select").ctvselect();s.text(o.find(".switch-cb:checked").length)})}})}}(window.ctv.search=window.ctv.search||{},jQuery),function(n,t){n.initUsage=function(){t("[data-percent]").ctvmeter()}}(window.ctv.settings=window.ctv.settings||{},jQuery),function(n,t){function i(){var n=t("#containerSystemNotifications");n.ctvload({url:n.data("contentUrl")})}n.initForm=function(n){var r=t("#"+n.formId),f,u;r.ctvform({bAutoCloseModal:!0,fnJson:i});r.find(".input-textarea").ctvtextarea({countDisplay:null});r.find(".tokenize").ctvtoken();f=r.find("#"+n.isForSpecificCountriesId);u=t(n.countrySelectionId);f.is(":checked")?u.removeClass("vh"):u.addClass("vh");f.on("change",function(){u.toggleClass("vh")})}}(window.ctv.systemnotifications=window.ctv.systemnotifications||{},jQuery),function(n,t){function i(){var n=t("#target").find("#list").length>0?"#list tbody":".grid";t(window).infinite({msg:"Loading more rooms",msgDone:"No more rooms to show",more:"#pagingNav a:first",target:n,item:".item",fnAfterLoad:function(){t("#target").ctvImageDefer()}})}n.initGrid=function(){var n=t("#target");t("#filterTransactions").ctvfilter({target:n,fnSuccess:function(){n.ctvImageDefer();t(window).infinite("destroy");i()}});n.ctvImageDefer();i()};n.initAdd=function(n){var i=t("#"+n.formId),r=i.find("#roomPhoto");i.ctvform({fnBeforeSerialize:function(n){var i=r.ctvcrop("formData",!0);t.each(i,function(t,i){n.append('<input type="hidden" name="'+i.name+'" value="'+i.value+'" />')})}});r.ctvcrop({cropMinHeight:80,cropMinWidth:114,cropMaintianAspectRatio:!0,boxWidth:388,cropPhoto:"imgRoomToCrop",fnDone:function(n){t("#imgRoom").attr("src",n)}});t("#btnClearRoomPhoto").on("click",function(n){n.preventDefault();var i=t(this).data("action");t.ajax({url:i,type:"post",success:function(n){t("#imgRoom").attr("src",n.url)}})});ctv.search.initRoomOwnerPicker(n)};n.initInputEdit=function(){t("#btnEditTransaction").on("click",function(n){n.preventDefault();var r=t(this).attr("href"),i=t("#tr-details-static");i.ctvload({url:r,loader:i})})};n.initEdit=function(n){var i=t("#"+n.formId),r=i.find("#roomPhoto");i.ctvform({fnBeforeSerialize:function(n){var i=r.ctvcrop("formData",!0);t.each(i,function(t,i){n.append('<input type="hidden" name="'+i.name+'" value="'+i.value+'" />')})}});r.ctvcrop({cropMinHeight:80,cropMinWidth:114,cropMaintianAspectRatio:!0,boxWidth:388,cropPhoto:"imgRoomToCrop",fnDone:function(n){t("#imgRoom").attr("src",n)}});t("#btnClearRoomPhoto").on("click",function(n){n.preventDefault();var i=t(this).data("action");t.ajax({url:i,type:"post",success:function(n){t("#imgRoom").attr("src",n.url)}})});t("#"+n.localCurrencyId).on("change",function(){var i=t(this).val(),r=function(r,u){t("#"+n.formId).find(".localCurrency").each(function(){t(this).toggleClass("vh",!i);t(this).find("span.input-group-addon").each(function(){t(this).attr("title",u);t(this).html(r)})})};i?t.ajax({url:n.currencyLookupUrl+"/"+i,data:{countryId:t("#"+n.countryId).val()},type:"POST",dataType:"json",success:function(n){r(n.symbol,n.isoCode)}}):r("$","USD")})};n.initTrForm=function(n){t("#"+n.formId).ctvform()};n.initClose=function(n){t("#"+n.formId).ctvform()};n.initSubmit=function(n){t(document).on("change","#"+n.closedStatusFieldId,function(){var i=n.hasSoldError&&t(this).val()==n.soldId;t("#pnlSoldError").toggleClass("vh",!i);t("#pnlComments").toggleClass("vh",i)});t("#"+n.formId).ctvform()};n.initSubmitChecklist=function(n){t("#"+n.formId).ctvform()};n.initRemoveChecklist=function(n){var i=t("#"+n.formId),r=function(n){var r=!1;n.responseJSON&&n.responseJSON.Data&&t.each(n.responseJSON.Data,function(){this.success&&(r=!0,i.find("tr[data-checklistid="+this.checklistId+"]").remove())});r&&ctv.documents.refreshGrid()};i.ctvform({bAutoCloseModal:!0,fnJson:r,fnError:r})};n.initApprove=function(n){t("#"+n.formId).ctvform()};n.initApproveChecklist=function(n){t("#"+n.formId).ctvform({bAutoCloseModal:!0})};n.initRejectChecklist=function(n){t("#"+n.formId).ctvform({bAutoCloseModal:!0})};n.initReject=function(n){t("#"+n.formId).ctvform()};n.initLeave=function(n){t("#"+n.formId).ctvform()};n.initDetails=function(){t("#trTabs").ctvnav({target:"#transactionBody",actions:"#trActions",onChange:function(){t(window).trigger("upload.update")}})};n.initActivityLog=function(){t(window).infinite({msg:"Loading more activity",msgDone:"No more activity to show",more:"#pagingNav a:first",target:".col-4-10 .tbl tbody",item:".row-pad"})}}(window.ctv.transactions=window.ctv.transactions||{},jQuery),function(n,t,i){t.initLinkAccount=function(n){i("#"+n.formId).ctvform({fnJson:function(n){i.ctvmodal("update",{html:n.Html})}})};t.initLinkTransaction=function(n){var u=i("#"+n.formId),t,r;u.ctvform({bAutoCloseModal:!0});t=i("#"+n.contactsDropdownId);r=i("#"+n.transactionsDropdownId);t.ctvpicker({placeholder:n.placeholderSelectContact,url:n.contactsUrl});t.on("select2-open",function(){r.select2("close")});r.ctvpicker({placeholder:n.placeholderSelectTransaction,url:n.transactionsUrl,pageSize:10,data:function(){return{tribusContactId:t.val()}}});r.on("select2-open",function(){t.select2("close")});r.ctvpicker("disable");t.on("change",{transactionsId:r},function(n){n.data.transactionsId.select2("val","");t.val()!=""?n.data.transactionsId.select2("enable").select2("open"):n.data.transactionsId.select2("disable")}).on("select2-open",{transactionsId:r},function(n){n.data.transactionsId.select2("close")});r.on("select2-open",{contactsId:t},function(n){n.data.contactsId.select2("close")})};t.initUnlinkTransaction=function(n){i("#"+n.formId).ctvform({bAutoCloseModal:!0})};t.from={};t.from.initCreateAndLinkTransaction=function(t){i("#"+t.formId).ctvform({bAutoCloseModal:!0,fnSuccess:function(){parent&&parent.postMessage&&parent.postMessage("DocuSignStatusChanged",t.tribusTargetOrigin)}});n.search.initRoomOwnerPicker(t)};t.from.initLinkTransaction=function(n){var t=i("#"+n.formId);t.ctvform({bAutoCloseModal:!0,fnSuccess:function(){parent&&parent.postMessage&&parent.postMessage("DocuSignStatusChanged",n.tribusTargetOrigin)}});t.on("click","input:radio",function(){setTimeout(function(){i("html, body").animate({scrollTop:i(document).height()-i(window).height()},"fast")},500)})};t.from.initUnlinkTransaction=function(n){i("#"+n.formId).ctvform({bAutoCloseModal:!0,fnSuccess:function(){parent&&parent.postMessage&&parent.postMessage("DocuSignStatusChanged",n.tribusTargetOrigin)}})}}(window.ctv=window.ctv||{},window.ctv.tribus=window.ctv.tribus||{},jQuery),function(n,t,i,r){function l(){var n=i("body").hasClass("has-upload");return n?!0:(i("body").addClass("has-upload"),!1)}function a(n){if(n.features.dragdrop){var r=i("body"),t=i("#"+u.dropElementId);if(t.length==0){t=i("<div />",{id:u.dropElementId,"class":"file-drop hide"});t.html('<p class="drop-text"><span class="icof icof-upload-cloud"><\/span>Drag &amp; Drop Your Files to Upload<\/p>');r.append(t);r.on({dragenter:function(){i("[data-doc-upload]").length&&t.removeClass("hide")},drop:function(){i("[data-doc-upload]").length&&t.addClass("hide")}});t.on({dragover:function(n){n.stopPropagation();n.preventDefault();n.originalEvent.dataTransfer.dropEffect="copy"},dragleave:function(){t.addClass("hide")}})}}}function h(n,t){var f=-3,u,e;return i("#target").find("table thead th").each(function(){f+=parseInt(i(this).attr("colspan"))||1}),u=-3,i("#target").find("table .doc-item td").each(function(){u+=parseInt(i(this).attr("colspan"))||1}),e=Math.max(f,u),{colspan:e,id:t.id,ext:"gen",name:t.name.replace(/\.[^/.]+$/,""),size:plupload.formatSize(t.size),progressBarCss:"progress-bar"+(n==r||n==null?" progress-bar-indeterminate":"")}}function v(n,t){i.each(t,function(n,t){var r=i("#"+t.id).remove()})}var f,u={noContentSelector:".nc-container",dropElementId:"file-drop",primaryUploadTrigger:"btnUploadDocs",uploadTriggerIds:["btnUploadDocs2","btnContextMenuUploadDocs"],debug:!1,fileTypes:"doc,docx,xls,xlsx,ppt,pptx,jpg,jpeg,gif,png,bmp,tiff,txt,csv,rtf,xml,pdf",isMyDocs:!1,isList:function(){return i("[data-doc-upload]").data("docUpload")==="table"}},c;t.init=function(n){if(i.extend(u,n),!l()){f=u.debug?console.log.bind(console):i.noop;var t=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:u.primaryUploadTrigger,drop_element:u.dropElementId,max_file_size:"35mb",url:"/documents/add",multipart_params:{roomId:n.roomId,folderId:n.folderId},flash_swf_url:"/assets/js/plupload/plupload.flash.swf",silverlight_xap_url:"/assets/js/plupload/plupload.silverlight.xap",filters:[{title:"Files",extensions:u.fileTypes}]});t.bind("PostInit",function(n){var f,r;a(n);i(window).on("upload.update",function(){n.refresh()});var e=i.map(u.uploadTriggerIds,function(n){return"#"+n}).join(", "),t="hoveredElem",o=function(n){var r,u;i(this).css("cursor","pointer");i(this).hide();r=document.elementFromPoint(n.pageX,n.pageY);(r&&i(r).hasClass("uploadTrigger")||i(r).find(".uploadTrigger"))&&(u=i(r).hasClass("uploadTrigger")?i(r):i(r).find(".uploadTrigger").first(),u.toggleClass("hovered",!0),i(this).data[t]=u);i(this).show()},s=function(){i(this).data[t]&&(i(this).data[t].toggleClass("hovered",!1),i(this).data[t]=null)};if(i("div.plupload."+n.runtime).mouseover(o).mouseout(s).hover(o,s),n.features.html5)i(document).on("click",e,function(t){var i=document.getElementById(n.id+"_html5");i&&!i.disabled&&i.click();t.preventDefault()});else if(n.runtime==="flash"||n.runtime==="silverlight"){n.refresh();i.each(u.uploadTriggerIds,function(n,t){h(t)});function h(t){i("#"+t).on("mouseover.bindupload",function(){var r=i(this);h(n.settings.browse_button);n.settings.browse_button=t;n.refresh();r.off(".bindupload")})}}else if(n.runtime==="html4"){f=i("[target*="+n.id+"]");r=f.find("input");f.addClass("plupload");i(document).on("click",e,function(n){r&&!r.disabled&&r.click();n.preventDefault()})}});t.init();t.refresh();t.bind("Error",function(n,t){var r="Error";t.file?(r=t.code===plupload.FILE_SIZE_ERROR?"because it must be less than 35mb":t.code===plupload.FILE_EXTENSION_ERROR?"because it is not a supported file type":t.code===plupload.HTTP_ERROR?"could not be uploaded. Please contact support.":t.message,r=t.file.name+" could not be uploaded "+r):r="Upload could not be completed: "+t.message;i.ctvnoty.error({text:r});n.refresh()});t.bind("FilesAdded",function(n,t){var h,f,e,r,c;for(i.ctvnoty.clear(),i(window).trigger("upload.FilesAdded"),h=0,f=[],e=0;e<t.length;e++)r=t[e],r.name.indexOf("&#")>-1?(i.ctvnoty.error({text:r.name+" contains invalid characters and will not be uploaded."}),n.removeFile(r)):(f.push(r),c=isNaN(r.size)?0:r.size,h+=c);i.ajax({async:!1,url:"/file/quotacheck",type:"get",data:{bytes:h}}).then(function(t){var r,e;if(t.WillExceedQuota)for(i.ctvnoty.error({text:"Will exceed quota. Please contact support."}),r=0;r<f.length;r++)n.removeFile(f[r]);else e=u.isList()?s:o,e(n,f),n.refresh(),n.start()})});t.bind("FilesRemoved",v);t.bind("UploadProgress",function(n,t){f("UploadProgress:",t.id,t.name,t.percent);var r=i("#"+t.id);r.find(".progress-bar-inner").css("width",t.percent+"%");t.percent==100&&(r.find(".progress-bar-label").html("Finishing upload..."),r.find(".progress-bar").addClass("progress-bar-indeterminate"),r.find(".clear").remove())});t.bind("FileUploaded",function(n,t,i){f("FileUploaded:",t.id,t.name,i.response);e(n,t,i.response)});t.bind("BeforeUpload",function(){window.onbeforeunload||(window.onbeforeunload=function(){return"If you leave this page your uploads will be canceled."})});t.bind("UploadComplete",function(){window.onbeforeunload=null;var n=u.isMyDocs?"Your document(s) have been added.":"Your document(s) have been added. The next step is to share them with others.";i.ctvnoty.success({text:n})})}};var e=function(n,t,r){var e=i("#"+t.id),f,o;r&&(f=typeof r=="string"?JSON.parse(r):r,f.Error.length>0?(e.find(".progress-bar-label").html("Upload Failed"),i.ctvnoty.error({text:f.Error}),setTimeout(function(){e.fadeOut(function(){e.remove()})},3e3)):f.Data.id&&(e.find(".progress-bar-label").html((n?"Upload":"Import")+" Complete"),f.Success.length>0&&i.ctvnoty.success({text:f.Success}),o=u.isList()?"/document/tablerow/":"/document/griditem/",e.ctvload({url:o+f.Data.id,contentReplace:!0,bLoadingIndicator:!1})))},o=function(n,t){i("#target").find(u.noContentSelector).remove();var r=i("#target").find("#docGrid");i.each(t,function(t,u){var f=h(n,u);i.Mustache.load("/assets/templates/UploadDocCard.htm").done(function(){r.mustache("upload-doc-card",f,{method:"append"})})})},s=function(n,t){i("#target").find(u.noContentSelector).remove();var r=i("#target").find("table.docs tbody");i.each(t,function(t,u){var f=h(n,u);i.Mustache.load("/assets/templates/UploadDocTableRow.htm").done(function(){r.mustache("upload-doc-table-row",f,{method:"append"})})})};c={roomId:0,folderId:null,provider:"",action:"import",files:[],fnPostData:null};t.importFiles=function(n){var t=i.extend(i.extend({},c),n);t.fnPostData=t.fnPostData||function(n){return{Size:n.size,AccessToken:t.accessToken,PublicURL:n.url,RoomId:t.roomId,FolderId:t.folderId,DocumentName:n.name,ProviderName:t.provider,ProviderFileId:n.providerFileId,ProviderFileVersion:n.providerFileVersion}};u.isList()?s(null,t.files):o(null,t.files);window.onbeforeunload||(window.onbeforeunload=function(){return"If you leave this page your imports will be canceled."});var f=[],l=[],h=i.Deferred(),r=h.promise();i.each(t.files,function(n,u){r=r.then(function(){var n="/documents/"+t.action,r=t.fnPostData(u);return i.ajax({timeout:0,type:"POST",url:n,data:r,success:function(n){n.Error.length>0?f.push(u):l.push(u);e(null,u,n)},error:function(){f.push(u)}})})});r=r.then(function(){f.length==0&&i.ctvnoty.success({text:"Your document(s) have been imported. Your next step is to share them with others."});window.onbeforeunload=null});h.resolve()}}(window.ctv=window.ctv||{},window.ctv.upload=window.ctv.upload||{},jQuery),function(n,t,i){t.initLinkAccount=function(n){i("#"+n.formId).ctvform({fnJson:function(n){i.ctvmodal("update",{html:n.Html})}})};t.initLinkTransaction=function(t){i("#"+t.formId).ctvform({fnJson:function(t){n.documents.refreshGrid();i.ctvmodal("update",{html:t.Html,url:null})}})};t.initCreateAndLinkTransaction=function(t){i("#"+t.formId).ctvform({fnJson:function(t){n.documents.refreshGrid();i.ctvmodal("update",{html:t.Html,url:null})}})};t.initUnlinkTransaction=function(n){i("#"+n.formId).ctvform({bAutoCloseModal:!0})};t.initAddDocs_LinkedTransaction=function(){};t.initAddDocs_Library=function(n){i(document).off("change","#"+n.libraryId).on("change","#"+n.libraryId,function(){var t=i("#addDocsLoadTarget"),r=i(this).val();r&&(t.toggleClass("ajax-form",!0),i("#libraryTarget").html(""),i("#libraryTarget").ctvload({cache:!1,url:n.getFormsBaseUrl,data:{id:n.roomId,zipFormTransactionId:n.zipFormTransactionId,libraryId:r},fnHtml:function(){t.toggleClass("ajax-form",!1)}}))})};t.initAddDocs=function(t){var r=i("#"+t.formId);i(document).off("change","#LocationSelection").on("change","#LocationSelection",function(){var n=null,u,e,f;switch(i(this).val()){case"transaction":n=t.transactionUrl;break;case"library":n=t.libraryUrl}n?(u=i("#addDocsLoadTarget"),e=u.hasClass("ajax-form"),e||(f=r.find("[type='submit']"),f.attr("DISABLED","DISABLED"),u.toggleClass("ajax-form",!0),i("#zfTarget").ctvload({cache:!1,url:n,fnHtml:function(){f.removeAttr("DISABLED");u.toggleClass("ajax-form",!1)}}))):i("#zfTarget").html("")});r.ctvform({bAutoCloseModal:!0,fnJson:function(){n.documents.refreshGrid()},fnError:function(t){n.documents.refreshGrid();t.responseJSON&&t.responseJSON.Data&&i.each(t.responseJSON.Data.success,function(){i("[data-id='"+this+"']").each(function(){i(this).find("label.switch").toggleClass("na",!0);i(this).find("input.switch-cb").attr("DISABLED","DISABLED")})})}});r.on("click",".select-all",function(){r.find("input:not(:disabled)").attr("checked",!0)})}}(window.ctv=window.ctv||{},window.ctv.zipform=window.ctv.zipform||{},jQuery),function(n,t,i){t.initCtvLogin=function(n){i("#"+n.formId).ctvform()};t.initCreateCtvTransaction=function(t){i("#"+t.formId).ctvform();n.search.initRoomOwnerPicker(t)};t.initSelectCtvTransaction=function(n){var t=i("#"+n.formId);t.ctvform();t.on("click","input:radio",function(){setTimeout(function(){i("html, body").animate({scrollTop:i(document).height()-i(window).height()},"fast")},500)})};t.initSelectDocuments=function(n){var t=i("#"+n.formId);t.ctvform();t.on("click",".select-all",function(){t.find("input:not(:disabled)").attr("checked",!0)})}}(window.ctv=window.ctv||{},window.ctv.ziplogix=window.ctv.ziplogix||{},jQuery)