!function(mixpanel){function dom_loaded_handler(){dom_loaded_handler.done||(dom_loaded_handler.done=!0,DOM_LOADED=!0,ENQUEUE_REQUESTS=!1,_.each(instances,function(inst){inst._dom_loaded()}))}function do_scroll_check(){try{document.documentElement.doScroll("left")}catch(e){return setTimeout(do_scroll_check,1),void 0}dom_loaded_handler()}var ArrayProto=Array.prototype,ObjProto=Object.prototype,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,windowConsole=window.console,navigator=window.navigator,document=window.document,userAgent=navigator.userAgent,PRIMARY_INSTANCE_NAME="mixpanel",SET_QUEUE_KEY="__mps",SET_ONCE_QUEUE_KEY="__mpso",ADD_QUEUE_KEY="__mpa",APPEND_QUEUE_KEY="__mpap",SET_ACTION="$set",SET_ONCE_ACTION="$set_once",ADD_ACTION="$add",APPEND_ACTION="$append",PEOPLE_DISTINCT_ID_KEY="$people_distinct_id",ALIAS_ID_KEY="__alias",RESERVED_PROPERTIES=[SET_QUEUE_KEY,SET_ONCE_QUEUE_KEY,ADD_QUEUE_KEY,APPEND_QUEUE_KEY,PEOPLE_DISTINCT_ID_KEY,ALIAS_ID_KEY],HTTP_PROTOCOL="https:"==document.location.protocol?"https://":"http://",SNIPPET_VERSION=mixpanel&&mixpanel.__SV||0,USE_XHR=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,ENQUEUE_REQUESTS=!USE_XHR&&-1==userAgent.indexOf("MSIE"),_={},DEBUG=!1,DEFAULT_CONFIG={api_host:HTTP_PROTOCOL+"api.mixpanel.com",cross_subdomain_cookie:!1,cookie_name:"",loaded:function(){},store_google:!0,save_referrer:!0,test:!1,verbose:!1,img:!1,track_pageview:!0,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_cookie:!1,secure_cookie:!0,ip:!0},DOM_LOADED=!1;!function(){var nativeForEach=ArrayProto.forEach,nativeIndexOf=ArrayProto.indexOf,nativeIsArray=Array.isArray,breaker={},each=_.each=function(obj,iterator,context){if(null!=obj)if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length){for(var i=0,l=obj.length;l>i;i++)if(i in obj&&iterator.call(context,obj[i],i,obj)===breaker)return}else for(var key in obj)if(hasOwnProperty.call(obj,key)&&iterator.call(context,obj[key],key,obj)===breaker)return};_.extend=function(obj){return each(slice.call(arguments,1),function(source){for(var prop in source)void 0!==source[prop]&&(obj[prop]=source[prop])}),obj},_.isArray=nativeIsArray||function(obj){return"[object Array]"===toString.call(obj)},_.isFunction=function(f){try{return/^\s*\bfunction\b/.test(f)}catch(x){return!1}},_.isArguments=function(obj){return!(!obj||!hasOwnProperty.call(obj,"callee"))},_.toArray=function(iterable){return iterable?iterable.toArray?iterable.toArray():_.isArray(iterable)?slice.call(iterable):_.isArguments(iterable)?slice.call(iterable):_.values(iterable):[]},_.values=function(obj){var results=[];return null==obj?results:(each(obj,function(value){results[results.length]=value}),results)},_.identity=function(value){return value},_.include=function(obj,target){var found=!1;return null==obj?found:nativeIndexOf&&obj.indexOf===nativeIndexOf?-1!=obj.indexOf(target):(each(obj,function(value){return found||(found=value===target)?breaker:void 0}),found)},_.includes=function(str,needle){return-1!==str.indexOf(needle)}}(),_.inherit=function(subclass,superclass){return subclass.prototype=new superclass,subclass.prototype.constructor=subclass,subclass.superclass=superclass.prototype,subclass},_.isObject=function(obj){return obj===Object(obj)&&!_.isArray(obj)},_.isEmptyObject=function(obj){if(_.isObject(obj)){for(var key in obj)if(hasOwnProperty.call(obj,key))return!1;return!0}return!1},_.isUndefined=function(obj){return void 0===obj},_.isString=function(obj){return"[object String]"==toString.call(obj)},_.isDate=function(obj){return"[object Date]"==toString.call(obj)},_.isNumber=function(obj){return"[object Number]"==toString.call(obj)},_.encodeDates=function(obj){return _.each(obj,function(v,k){_.isDate(v)?obj[k]=_.formatDate(v):_.isObject(v)&&(obj[k]=_.encodeDates(v))}),obj},_.formatDate=function(d){function pad(n){return 10>n?"0"+n:n}return d.getUTCFullYear()+"-"+pad(d.getUTCMonth()+1)+"-"+pad(d.getUTCDate())+"T"+pad(d.getUTCHours())+":"+pad(d.getUTCMinutes())+":"+pad(d.getUTCSeconds())},_.strip_empty_properties=function(p){var ret={};return _.each(p,function(v,k){_.isString(v)&&v.length>0&&(ret[k]=v)}),ret},_.truncate=function(obj,length){var ret;return"string"==typeof obj?ret=obj.slice(0,length):_.isArray(obj)?(ret=[],_.each(obj,function(val){ret.push(_.truncate(val,length))})):_.isObject(obj)?(ret={},_.each(obj,function(val,key){ret[key]=_.truncate(val,length)})):ret=obj,ret},_.JSONEncode=function(){return function(mixed_val){var value=mixed_val,quote=function(string){var escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return escapable.lastIndex=0,escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'},str=function(key,holder){var gap="",indent="    ",i=0,k="",v="",length=0,mind=gap,partial=[],value=holder[key];switch(value&&"object"==typeof value&&"function"==typeof value.toJSON&&(value=value.toJSON(key)),typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";if(gap+=indent,partial=[],"[object Array]"===toString.apply(value)){for(length=value.length,i=0;length>i;i+=1)partial[i]=str(i,value)||"null";return v=0===partial.length?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]",gap=mind,v}for(k in value)hasOwnProperty.call(value,k)&&(v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v));return v=0===partial.length?"{}":gap?"{"+partial.join(",")+mind+"}":"{"+partial.join(",")+"}",gap=mind,v}};return str("",{"":value})}}(),_.JSONDecode=function(){var at,ch,text,value,escapee={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},error=function(m){throw{name:"SyntaxError",message:m,at:at,text:text}},next=function(c){return c&&c!==ch&&error("Expected '"+c+"' instead of '"+ch+"'"),ch=text.charAt(at),at+=1,ch},number=function(){var number,string="";for("-"===ch&&(string="-",next("-"));ch>="0"&&"9">=ch;)string+=ch,next();if("."===ch)for(string+=".";next()&&ch>="0"&&"9">=ch;)string+=ch;if("e"===ch||"E"===ch)for(string+=ch,next(),("-"===ch||"+"===ch)&&(string+=ch,next());ch>="0"&&"9">=ch;)string+=ch,next();return number=+string,isFinite(number)?number:(error("Bad number"),void 0)},string=function(){var hex,i,uffff,string="";if('"'===ch)for(;next();){if('"'===ch)return next(),string;if("\\"===ch)if(next(),"u"===ch){for(uffff=0,i=0;4>i&&(hex=parseInt(next(),16),isFinite(hex));i+=1)uffff=16*uffff+hex;string+=String.fromCharCode(uffff)}else{if("string"!=typeof escapee[ch])break;string+=escapee[ch]}else string+=ch}error("Bad string")},white=function(){for(;ch&&" ">=ch;)next()},word=function(){switch(ch){case"t":return next("t"),next("r"),next("u"),next("e"),!0;case"f":return next("f"),next("a"),next("l"),next("s"),next("e"),!1;case"n":return next("n"),next("u"),next("l"),next("l"),null}error("Unexpected '"+ch+"'")},array=function(){var array=[];if("["===ch){if(next("["),white(),"]"===ch)return next("]"),array;for(;ch;){if(array.push(value()),white(),"]"===ch)return next("]"),array;next(","),white()}}error("Bad array")},object=function(){var key,object={};if("{"===ch){if(next("{"),white(),"}"===ch)return next("}"),object;for(;ch;){if(key=string(),white(),next(":"),Object.hasOwnProperty.call(object,key)&&error('Duplicate key "'+key+'"'),object[key]=value(),white(),"}"===ch)return next("}"),object;next(","),white()}}error("Bad object")};return value=function(){switch(white(),ch){case"{":return object();case"[":return array();case'"':return string();case"-":return number();default:return ch>="0"&&"9">=ch?number():word()}},function(source){var result;return text=source,at=0,ch=" ",result=value(),white(),ch&&error("Syntax error"),result}}(),_.base64Encode=function(data){var o1,o2,o3,h1,h2,h3,h4,bits,b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=0,ac=0,enc="",tmp_arr=[];if(!data)return data;data=_.utf8Encode(data);do o1=data.charCodeAt(i++),o2=data.charCodeAt(i++),o3=data.charCodeAt(i++),bits=o1<<16|o2<<8|o3,h1=63&bits>>18,h2=63&bits>>12,h3=63&bits>>6,h4=63&bits,tmp_arr[ac++]=b64.charAt(h1)+b64.charAt(h2)+b64.charAt(h3)+b64.charAt(h4);while(i<data.length);switch(enc=tmp_arr.join(""),data.length%3){case 1:enc=enc.slice(0,-2)+"==";break;case 2:enc=enc.slice(0,-1)+"="}return enc},_.utf8Encode=function(string){string=(string+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var start,end,n,utftext="",stringl=0;for(start=end=0,stringl=string.length,n=0;stringl>n;n++){var c1=string.charCodeAt(n),enc=null;128>c1?end++:enc=c1>127&&2048>c1?String.fromCharCode(192|c1>>6,128|63&c1):String.fromCharCode(224|c1>>12,128|63&c1>>6,128|63&c1),null!==enc&&(end>start&&(utftext+=string.substring(start,end)),utftext+=enc,start=end=n+1)}return end>start&&(utftext+=string.substring(start,string.length)),utftext},_.UUID=function(){var T=function(){for(var d=1*new Date,i=0;d==1*new Date;)i++;return d.toString(16)+i.toString(16)},R=function(){return Math.random().toString(16).replace(".","")},UA=function(){function xor(result,byte_array){var j,tmp=0;for(j=0;j<byte_array.length;j++)tmp|=buffer[j]<<8*j;return result^tmp}var i,ch,ua=userAgent,buffer=[],ret=0;for(i=0;i<ua.length;i++)ch=ua.charCodeAt(i),buffer.unshift(255&ch),buffer.length>=4&&(ret=xor(ret,buffer),buffer=[]);return buffer.length>0&&(ret=xor(ret,buffer)),ret.toString(16)};return function(){var se=(screen.height*screen.width).toString(16);return T()+"-"+R()+"-"+UA()+"-"+se+"-"+T()}}(),_.isBlockedUA=function(ua){return/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(ua)?!0:!1},_.HTTPBuildQuery=function(formdata,arg_separator){var use_val,use_key,tmp_arr=[];return"undefined"==typeof arg_separator&&(arg_separator="&"),_.each(formdata,function(val,key){use_val=encodeURIComponent(val.toString()),use_key=encodeURIComponent(key),tmp_arr[tmp_arr.length]=use_key+"="+use_val}),tmp_arr.join(arg_separator)},_.getQueryParam=function(url,param){param=param.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regexS="[\\?&]"+param+"=([^&#]*)",regex=new RegExp(regexS),results=regex.exec(url);return null===results||results&&"string"!=typeof results[1]&&results[1].length?"":decodeURIComponent(results[1]).replace(/\+/g," ")},_.cookie={get:function(name){for(var nameEQ=name+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(nameEQ))return decodeURIComponent(c.substring(nameEQ.length,c.length))}return null},parse:function(name){var cookie;try{cookie=_.JSONDecode(_.cookie.get(name))||{}}catch(err){}return cookie},set:function(name,value,days,cross_subdomain,is_secure){var cdomain="",expires="",secure="";if(cross_subdomain){var matches=document.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),domain=matches?matches[0]:"";cdomain=domain?"; domain=."+domain:""}if(days){var date=new Date;date.setTime(date.getTime()+1e3*60*60*24*days),expires="; expires="+date.toGMTString()}is_secure&&(secure="; secure"),document.cookie=name+"="+encodeURIComponent(value)+expires+"; path=/"+cdomain+secure},remove:function(name,cross_subdomain){_.cookie.set(name,"",-1,cross_subdomain)}},_.register_event=function(){function makeHandler(element,new_handler,old_handlers){var handler=function(event){if(event=event||fixEvent(window.event),!event)return void 0;var old_result,new_result,ret=!0;return _.isFunction(old_handlers)&&(old_result=old_handlers(event)),new_result=new_handler.call(element,event),(!1===old_result||!1===new_result)&&(ret=!1),ret};return handler}function fixEvent(event){return event&&(event.preventDefault=fixEvent.preventDefault,event.stopPropagation=fixEvent.stopPropagation),event}var register_event=function(element,type,handler,oldSchool){if(!element)return console.error("No valid element provided to register_event"),void 0;if(element.addEventListener&&!oldSchool)element.addEventListener(type,handler,!1);else{var ontype="on"+type,old_handler=element[ontype];element[ontype]=makeHandler(element,handler,old_handler)}};return fixEvent.preventDefault=function(){this.returnValue=!1},fixEvent.stopPropagation=function(){this.cancelBubble=!0},register_event}(),_.dom_query=function(){function getAllChildren(e){return e.all?e.all:e.getElementsByTagName("*")}function hasClass(elem,selector){var className=" "+selector+" ";return(" "+elem.className+" ").replace(bad_whitespace," ").indexOf(className)>=0}function getElementsBySelector(selector){if(!document.getElementsByTagName)return new Array;for(var token,tokens=selector.split(" "),currentContext=new Array(document),i=0;i<tokens.length;i++)if(token=tokens[i].replace(/^\s+/,"").replace(/\s+$/,""),token.indexOf("#")>-1){var bits=token.split("#"),tagName=bits[0],id=bits[1],element=document.getElementById(id);if(!element||tagName&&element.nodeName.toLowerCase()!=tagName)return new Array;currentContext=new Array(element)}else if(token.indexOf(".")>-1){var bits=token.split("."),tagName=bits[0],className=bits[1];tagName||(tagName="*");for(var found=new Array,foundCount=0,h=0;h<currentContext.length;h++){var elements;elements="*"==tagName?getAllChildren(currentContext[h]):currentContext[h].getElementsByTagName(tagName);for(var j=0;j<elements.length;j++)found[foundCount++]=elements[j]}currentContext=new Array;for(var currentContextIndex=0,k=0;k<found.length;k++)found[k].className&&_.isString(found[k].className)&&hasClass(found[k],className)&&(currentContext[currentContextIndex++]=found[k])}else if(token.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)){var tagName=RegExp.$1,attrName=RegExp.$2,attrOperator=RegExp.$3,attrValue=RegExp.$4;tagName||(tagName="*");for(var found=new Array,foundCount=0,h=0;h<currentContext.length;h++){var elements;elements="*"==tagName?getAllChildren(currentContext[h]):currentContext[h].getElementsByTagName(tagName);for(var j=0;j<elements.length;j++)found[foundCount++]=elements[j]}currentContext=new Array;var checkFunction,currentContextIndex=0;switch(attrOperator){case"=":checkFunction=function(e){return e.getAttribute(attrName)==attrValue};break;case"~":checkFunction=function(e){return e.getAttribute(attrName).match(new RegExp("\\b"+attrValue+"\\b"))};break;case"|":checkFunction=function(e){return e.getAttribute(attrName).match(new RegExp("^"+attrValue+"-?"))};break;case"^":checkFunction=function(e){return 0==e.getAttribute(attrName).indexOf(attrValue)};break;case"$":checkFunction=function(e){return e.getAttribute(attrName).lastIndexOf(attrValue)==e.getAttribute(attrName).length-attrValue.length};break;case"*":checkFunction=function(e){return e.getAttribute(attrName).indexOf(attrValue)>-1};break;default:checkFunction=function(e){return e.getAttribute(attrName)}}currentContext=new Array,currentContextIndex=0;for(var k=0;k<found.length;k++)checkFunction(found[k])&&(currentContext[currentContextIndex++]=found[k])}else{tagName=token;for(var found=new Array,foundCount=0,h=0;h<currentContext.length;h++)for(var elements=currentContext[h].getElementsByTagName(tagName),j=0;j<elements.length;j++)found[foundCount++]=elements[j];currentContext=found}return currentContext}var bad_whitespace=/[\t\r\n]/g;return getElementsBySelector}(),_.info={campaignParams:function(){var campaign_keywords="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),kw="",params={};return _.each(campaign_keywords,function(kwkey){kw=_.getQueryParam(document.URL,kwkey),kw.length&&(params[kwkey]=kw)}),params},searchEngine:function(referrer){return 0===referrer.search("https?://(.*)google.([^/?]*)")?"google":0===referrer.search("https?://(.*)bing.com")?"bing":0===referrer.search("https?://(.*)yahoo.com")?"yahoo":0===referrer.search("https?://(.*)duckduckgo.com")?"duckduckgo":null},searchInfo:function(referrer){var search=_.info.searchEngine(referrer),param="yahoo"!=search?"q":"p",ret={};if(null!==search){ret.$search_engine=search;var keyword=_.getQueryParam(referrer,param);keyword.length&&(ret.mp_keyword=keyword)}return ret},browser:function(user_agent,vendor,opera){var vendor=vendor||"";return opera?_.includes(user_agent,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(user_agent)?"BlackBerry":_.includes(user_agent,"FBIOS")?"Facebook Mobile":_.includes(user_agent,"Chrome")?"Chrome":_.includes(user_agent,"CriOS")?"Chrome iOS":_.includes(vendor,"Apple")?_.includes(user_agent,"Mobile")?"Mobile Safari":"Safari":_.includes(user_agent,"Android")?"Android Mobile":_.includes(user_agent,"Konqueror")?"Konqueror":_.includes(user_agent,"Firefox")?"Firefox":_.includes(user_agent,"MSIE")||_.includes(user_agent,"Trident/")?"Internet Explorer":_.includes(user_agent,"Gecko")?"Mozilla":""},os:function(){var a=userAgent;return/Windows/i.test(a)?/Phone/.test(a)?"Windows Mobile":"Windows":/(iPhone|iPad|iPod)/.test(a)?"iOS":/Android/.test(a)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(a)?"BlackBerry":/Mac/i.test(a)?"Mac OS X":/Linux/.test(a)?"Linux":""},device:function(user_agent){return/iPad/.test(user_agent)?"iPad":/iPod/.test(user_agent)?"iPod Touch":/iPhone/.test(user_agent)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(user_agent)?"BlackBerry":/Windows Phone/i.test(user_agent)?"Windows Phone":/Android/.test(user_agent)?"Android":""},referringDomain:function(referrer){var split=referrer.split("/");return split.length>=3?split[2]:""},properties:function(){return _.extend(_.strip_empty_properties({$os:_.info.os(),$browser:_.info.browser(userAgent,navigator.vendor,window.opera),$referring_domain:_.info.referringDomain(document.referrer),$device:_.info.device(userAgent)}),{$screen_height:screen.height,$screen_width:screen.width,mp_lib:"web"})},people_properties:function(){return _.strip_empty_properties({$os:_.info.os(),$browser:_.info.browser(userAgent,navigator.vendor,window.opera)})},pageviewInfo:function(page){return _.strip_empty_properties({mp_page:_.info.referringDomain(page),mp_referrer:_.info.referringDomain(document.referrer),mp_browser:_.info.browser(userAgent,navigator.vendor,window.opera),mp_platform:_.info.os()})}};var console={log:function(){if(DEBUG&&!_.isUndefined(windowConsole)&&windowConsole)try{windowConsole.log.apply(windowConsole,arguments)}catch(err){_.each(arguments,function(arg){windowConsole.log(arg)})}},error:function(){if(DEBUG&&!_.isUndefined(windowConsole)&&windowConsole){var args=["Mixpanel error:"].concat(_.toArray(arguments));try{windowConsole.error.apply(windowConsole,args)}catch(err){_.each(args,function(arg){windowConsole.error(arg)})}}},critical:function(){if(!_.isUndefined(windowConsole)&&windowConsole){var args=["Mixpanel error:"].concat(_.toArray(arguments));try{windowConsole.error.apply(windowConsole,args)}catch(err){_.each(args,function(arg){windowConsole.error(arg)})}}}},DomTracker=function(){};DomTracker.prototype.create_properties=function(){},DomTracker.prototype.event_handler=function(){},DomTracker.prototype.after_track_handler=function(){},DomTracker.prototype.init=function(mixpanel_instance){return this.mp=mixpanel_instance,this},DomTracker.prototype.track=function(query,event_name,properties,user_callback){var that=this,elements=_.dom_query(query);return 0==elements.length?(console.error("The DOM query ("+query+") returned 0 elements"),void 0):(_.each(elements,function(element){_.register_event(element,this.override_event,function(e){var options={},props=that.create_properties(properties,this),timeout=that.mp.get_config("track_links_timeout");that.event_handler(e,this,options),window.setTimeout(that.track_callback(user_callback,props,options,!0),timeout),that.mp.track(event_name,props,that.track_callback(user_callback,props,options))})},this),!0)},DomTracker.prototype.track_callback=function(user_callback,props,options,timeout_occured){timeout_occured=timeout_occured||!1;var that=this;return function(){options.callback_fired||(options.callback_fired=!0,user_callback&&user_callback(timeout_occured,props)===!1||that.after_track_handler(props,options,timeout_occured))}},DomTracker.prototype.create_properties=function(properties,element){var props;return props="function"==typeof properties?properties(element):_.extend({},properties)};var LinkTracker=function(){this.override_event="click"};_.inherit(LinkTracker,DomTracker),LinkTracker.prototype.create_properties=function(properties,element){var props=LinkTracker.superclass.create_properties.apply(this,arguments);return element.href&&(props.url=element.href),props},LinkTracker.prototype.event_handler=function(evt,element,options){options.new_tab=2===evt.which||evt.metaKey||"_blank"===element.target,options.href=element.href,options.new_tab||evt.preventDefault()},LinkTracker.prototype.after_track_handler=function(props,options){options.new_tab||setTimeout(function(){window.location=options.href},0)};var FormTracker=function(){this.override_event="submit"};_.inherit(FormTracker,DomTracker),FormTracker.prototype.event_handler=function(evt,element,options){options.element=element,evt.preventDefault()},FormTracker.prototype.after_track_handler=function(props,options){setTimeout(function(){options.element.submit()},0)};var MixpanelCookie=function(config){this.props={},this.campaign_params_saved=!1,this.name=config.cookie_name?"mp_"+config.cookie_name:"mp_"+config.token+"_mixpanel",this.load(),this.update_config(config),this.upgrade(config),this.save()};MixpanelCookie.prototype.properties=function(){var p={};return _.each(this.props,function(v,k){_.include(RESERVED_PROPERTIES,k)||(p[k]=v)}),p},MixpanelCookie.prototype.load=function(){if(!this.disabled){var cookie=_.cookie.parse(this.name);cookie&&(this.props=_.extend({},cookie))}},MixpanelCookie.prototype.upgrade=function(config){var old_cookie_name,old_cookie,should_upgrade=config.upgrade;should_upgrade&&(old_cookie_name="mp_super_properties","string"==typeof should_upgrade&&(old_cookie_name=should_upgrade),old_cookie=_.cookie.parse(old_cookie_name),_.cookie.remove(old_cookie_name),_.cookie.remove(old_cookie_name,!0),old_cookie&&(this.props=_.extend(this.props,old_cookie.all,old_cookie.events))),config.cookie_name||"mixpanel"===config.name||(old_cookie_name="mp_"+config.token+"_"+config.name,old_cookie=_.cookie.parse(old_cookie_name),old_cookie&&(_.cookie.remove(old_cookie_name),_.cookie.remove(old_cookie_name,!0),this.register_once(old_cookie)))},MixpanelCookie.prototype.save=function(){this.disabled||_.cookie.set(this.name,_.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure)},MixpanelCookie.prototype.remove=function(){_.cookie.remove(this.name,!1),_.cookie.remove(this.name,!0)},MixpanelCookie.prototype.clear=function(){this.remove(),this.props={}},MixpanelCookie.prototype.register_once=function(props,default_value,days){return _.isObject(props)?("undefined"==typeof default_value&&(default_value="None"),this.expire_days="undefined"==typeof days?this.default_expiry:days,_.each(props,function(val,prop){this.props[prop]&&this.props[prop]!==default_value||(this.props[prop]=val)},this),this.save(),!0):!1},MixpanelCookie.prototype.register=function(props,days){return _.isObject(props)?(this.expire_days="undefined"==typeof days?this.default_expiry:days,_.extend(this.props,props),this.save(),!0):!1},MixpanelCookie.prototype.unregister=function(prop){prop in this.props&&(delete this.props[prop],this.save())},MixpanelCookie.prototype.update_campaign_params=function(){this.campaign_params_saved||(this.register_once(_.info.campaignParams()),this.campaign_params_saved=!0)},MixpanelCookie.prototype.update_search_keyword=function(referrer){this.register(_.info.searchInfo(referrer))},MixpanelCookie.prototype.update_referrer_info=function(referrer){this.register_once({$initial_referring_domain:_.info.referringDomain(referrer)||"$direct"},"")},MixpanelCookie.prototype.get_referrer_info=function(){return _.strip_empty_properties({$initial_referring_domain:this.props.$initial_referring_domain})},MixpanelCookie.prototype.safe_merge=function(props){return _.each(this.props,function(val,prop){prop in props||(props[prop]=val)}),props},MixpanelCookie.prototype.update_config=function(config){this.default_expiry=this.expire_days=config.cookie_expiration,this.set_disabled(config.disable_cookie),this.set_cross_subdomain(config.cross_subdomain_cookie),this.set_secure(config.secure_cookie)},MixpanelCookie.prototype.set_disabled=function(disabled){this.disabled=disabled,this.disabled&&this.remove()},MixpanelCookie.prototype.set_cross_subdomain=function(cross_subdomain){cross_subdomain!==this.cross_subdomain&&(this.cross_subdomain=cross_subdomain,this.remove(),this.save())},MixpanelCookie.prototype.get_cross_subdomain=function(){return this.cross_subdomain},MixpanelCookie.prototype.set_secure=function(secure){secure!==this.secure&&(this.secure=secure?!0:!1,this.remove(),this.save())},MixpanelCookie.prototype._add_to_people_queue=function(queue,data){var q_key=this._get_queue_key(queue),q_data=data[queue],set_q=this._get_or_create_queue(SET_ACTION),set_once_q=this._get_or_create_queue(SET_ONCE_ACTION),add_q=this._get_or_create_queue(ADD_ACTION),append_q=this._get_or_create_queue(APPEND_ACTION,[]);q_key===SET_QUEUE_KEY?(_.extend(set_q,q_data),this._pop_from_people_queue(ADD_ACTION,q_data)):q_key===SET_ONCE_QUEUE_KEY?_.each(q_data,function(v,k){k in set_once_q||(set_once_q[k]=v)}):q_key===ADD_QUEUE_KEY?_.each(q_data,function(v,k){k in set_q?set_q[k]+=v:(k in add_q||(add_q[k]=0),add_q[k]+=v)},this):q_key===APPEND_QUEUE_KEY&&append_q.push(q_data),console.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),console.log(data),this.save()},MixpanelCookie.prototype._pop_from_people_queue=function(queue,data){var q=this._get_queue(queue);_.isUndefined(q)||(_.each(data,function(v,k){delete q[k]},this),this.save())},MixpanelCookie.prototype._get_queue_key=function(queue){return queue===SET_ACTION?SET_QUEUE_KEY:queue===SET_ONCE_ACTION?SET_ONCE_QUEUE_KEY:queue===ADD_ACTION?ADD_QUEUE_KEY:queue===APPEND_ACTION?APPEND_QUEUE_KEY:(console.error("Invalid queue:",queue),void 0)},MixpanelCookie.prototype._get_queue=function(queue){return this.props[this._get_queue_key(queue)]},MixpanelCookie.prototype._get_or_create_queue=function(queue,default_val){var key=this._get_queue_key(queue),default_val=_.isUndefined(default_val)?{}:default_val;return this.props[key]||(this.props[key]=default_val)};var create_mplib=function(token,config,name){var instance,target=name===PRIMARY_INSTANCE_NAME?mixpanel:mixpanel[name];return target&&!_.isArray(target)?(console.error("You have already initialized "+name),void 0):(instance=new MixpanelLib,instance._init(token,config,name),instance.people=new MixpanelPeople,instance.people._init(instance),DEBUG=DEBUG||instance.get_config("debug"),_.isUndefined(target)||(instance._execute_array.call(instance.people,target.people),instance._execute_array(target)),instance)},MixpanelLib=function(){};MixpanelLib.prototype.init=function(token,config,name){if("undefined"==typeof name)return console.error("You must name your new library: init(token, config, name)"),void 0;if(name===PRIMARY_INSTANCE_NAME)return console.error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet"),void 0;var instance=create_mplib(token,config,name);return mixpanel[name]=instance,instance._loaded(),instance},MixpanelLib.prototype._init=function(token,config,name){this.__loaded=!0,this.config={},this.set_config(_.extend({},DEFAULT_CONFIG,config,{name:name,token:token,callback_fn:(name===PRIMARY_INSTANCE_NAME?name:PRIMARY_INSTANCE_NAME+"."+name)+"._jsc"})),this._jsc=function(){},this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.cookie=new MixpanelCookie(this.config),this.register_once({distinct_id:_.UUID()},""),this.unregister("$initial_referrer"),this.unregister("$referrer")},MixpanelLib.prototype._loaded=function(){this.get_config("loaded")(this),this.get_config("track_pageview")&&this.track_pageview()},MixpanelLib.prototype._dom_loaded=function(){_.each(this.__dom_loaded_queue,function(item){this._track_dom.apply(this,item)},this),_.each(this.__request_queue,function(item){this._send_request.apply(this,item)},this),delete this.__dom_loaded_queue,delete this.__request_queue},MixpanelLib.prototype._track_dom=function(DomClass,args){if(this.get_config("img"))return console.error("You can't use DOM tracking functions with img = true."),!1;if(!DOM_LOADED)return this.__dom_loaded_queue.push([DomClass,args]),!1;var dt=(new DomClass).init(this);return dt.track.apply(dt,args)},MixpanelLib.prototype._prepare_callback=function(callback,data){if(_.isUndefined(callback))return null;if(USE_XHR){var callback_function=function(response){callback(response,data)};return callback_function}var jsc=this._jsc,randomized_cb=""+Math.floor(1e8*Math.random()),callback_string=this.get_config("callback_fn")+'["'+randomized_cb+'"]';return jsc[randomized_cb]=function(response){delete jsc[randomized_cb],callback(response,data)},callback_string},MixpanelLib.prototype._send_request=function(url,data,callback){if(ENQUEUE_REQUESTS)return this.__request_queue.push(arguments),void 0;var verbose_mode=this.get_config("verbose");if(this.get_config("test")&&(data.test=1),verbose_mode&&(data.verbose=1),this.get_config("img")&&(data.img=1),USE_XHR||(callback?data.callback=callback:(verbose_mode||this.get_config("test"))&&(data.callback="(function(){})")),data.ip=this.get_config("ip")?1:0,data._=(new Date).getTime().toString(),url+="?"+_.HTTPBuildQuery(data),"img"in data){var img=document.createElement("img");img.src=url,document.body.appendChild(img)}else if(USE_XHR){var req=new XMLHttpRequest;req.open("GET",url,!0),req.withCredentials=!0,req.onreadystatechange=function(){if(4===req.readyState)if(200===req.status)callback&&(verbose_mode?callback(_.JSONDecode(req.responseText)):callback(Number(req.responseText)));else{var error="Bad HTTP status: "+req.status+" "+req.statusText;console.error(error),callback&&(verbose_mode?callback({status:0,error:error}):callback(0))}},req.send(null)}else{var script=document.createElement("script");script.type="text/javascript",script.async=!0,script.defer=!0,script.src=url;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(script,s)}},MixpanelLib.prototype._execute_array=function(array){var fn_name,alias_calls=[],other_calls=[],tracking_calls=[];_.each(array,function(item){item&&(fn_name=item[0],"function"==typeof item?item.call(this):_.isArray(item)&&"alias"===fn_name?alias_calls.push(item):_.isArray(item)&&-1!=fn_name.indexOf("track")&&"function"==typeof this[fn_name]?tracking_calls.push(item):other_calls.push(item))},this);var execute=function(calls,context){_.each(calls,function(item){this[item[0]].apply(this,item.slice(1))},context)};execute(alias_calls,this),execute(other_calls,this),execute(tracking_calls,this)},MixpanelLib.prototype.push=function(item){this._execute_array([item])},MixpanelLib.prototype.disable=function(events){"undefined"==typeof events?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(events)},MixpanelLib.prototype.track=function(event_name,properties,callback){if("undefined"==typeof event_name)return console.error("No event name provided to mixpanel.track"),void 0;if(_.isBlockedUA(userAgent)||this._flags.disable_all_events||_.include(this.__disabled_events,event_name))return"undefined"!=typeof callback&&callback(0),void 0;properties=properties||{},properties.token=properties.token||this.get_config("token"),this.cookie.update_search_keyword(document.referrer),this.get_config("store_google")&&this.cookie.update_campaign_params(),this.get_config("save_referrer")&&this.cookie.update_referrer_info(document.referrer),properties=_.extend({},_.info.properties(),this.cookie.properties(),properties);
var data={event:event_name,properties:properties},truncated_data=_.truncate(data,255),json_data=_.JSONEncode(truncated_data),encoded_data=_.base64Encode(json_data);return console.log("MIXPANEL REQUEST:"),console.log(truncated_data),this._send_request(this.get_config("api_host")+"/track/",{data:encoded_data},this._prepare_callback(callback,truncated_data)),truncated_data},MixpanelLib.prototype.track_pageview=function(page){"undefined"==typeof page&&(page=document.location.href),this.track("mp_page_view",_.info.pageviewInfo(page))},MixpanelLib.prototype.track_links=function(){return this._track_dom.call(this,LinkTracker,arguments)},MixpanelLib.prototype.track_forms=function(){return this._track_dom.call(this,FormTracker,arguments)},MixpanelLib.prototype.register=function(props,days){this.cookie.register(props,days)},MixpanelLib.prototype.register_once=function(props,default_value,days){this.cookie.register_once(props,default_value,days)},MixpanelLib.prototype.unregister=function(property){this.cookie.unregister(property)},MixpanelLib.prototype._register_single=function(prop,value){var props={};props[prop]=value,this.register(props)},MixpanelLib.prototype.identify=function(unique_id,_set_callback,_add_callback,_append_callback,_set_once_callback){unique_id!=this.get_distinct_id()&&unique_id!=this.get_property(ALIAS_ID_KEY)&&(this.unregister(ALIAS_ID_KEY),this._register_single("distinct_id",unique_id)),this._flags.identify_called=!0,this.people._flush(_set_callback,_add_callback,_append_callback,_set_once_callback)},MixpanelLib.prototype.get_distinct_id=function(){return this.get_property("distinct_id")},MixpanelLib.prototype.alias=function(alias,original){if(alias===this.get_property(PEOPLE_DISTINCT_ID_KEY))return console.critical("Attempting to create alias for existing People user - aborting."),-2;var _this=this;return _.isUndefined(original)&&(original=this.get_distinct_id()),alias!==original?(this._register_single(ALIAS_ID_KEY,alias),this.track("$create_alias",{alias:alias,distinct_id:original},function(){_this.identify(alias)})):(console.error("alias matches current distinct_id - skipping api call."),this.identify(alias),-1)},MixpanelLib.prototype.name_tag=function(name_tag){this._register_single("mp_name_tag",name_tag)},MixpanelLib.prototype.set_config=function(config){_.isObject(config)&&(_.extend(this.config,config),this.cookie&&this.cookie.update_config(this.config),DEBUG=DEBUG||this.get_config("debug"))},MixpanelLib.prototype.get_config=function(prop_name){return this.config[prop_name]},MixpanelLib.prototype.get_property=function(property_name){return this.cookie.props[property_name]},MixpanelLib.prototype.toString=function(){var name=this.get_config("name");return name!==PRIMARY_INSTANCE_NAME&&(name=PRIMARY_INSTANCE_NAME+"."+name),name};var MixpanelPeople=function(){};if(MixpanelPeople.prototype._init=function(mixpanel){this._mixpanel=mixpanel},MixpanelPeople.prototype.set=function(prop,to,callback){var data={},$set={};return _.isObject(prop)?(_.each(prop,function(v,k){"$distinct_id"!=k&&"$token"!=k&&($set[k]=v)}),callback=to):$set[prop]=to,this._get_config("save_referrer")&&this._mixpanel.cookie.update_referrer_info(document.referrer),$set=_.extend({},_.info.people_properties(),this._mixpanel.cookie.get_referrer_info(),$set),data[SET_ACTION]=$set,this._send_request(data,callback)},MixpanelPeople.prototype.set_once=function(prop,to,callback){var data={},$set_once={};return _.isObject(prop)?(_.each(prop,function(v,k){"$distinct_id"!=k&&"$token"!=k&&($set_once[k]=v)}),callback=to):$set_once[prop]=to,data[SET_ONCE_ACTION]=$set_once,this._send_request(data,callback)},MixpanelPeople.prototype.increment=function(prop,by,callback){var data={},$add={};return _.isObject(prop)?(_.each(prop,function(v,k){return"$distinct_id"!=k&&"$token"!=k?isNaN(parseFloat(v))?(console.error("Invalid increment value passed to mixpanel.people.increment - must be a number"),void 0):($add[k]=v,void 0):void 0}),callback=by):(_.isUndefined(by)&&(by=1),$add[prop]=by),data[ADD_ACTION]=$add,this._send_request(data,callback)},MixpanelPeople.prototype.append=function(list_name,value,callback){var data={},$append={};return _.isObject(list_name)?(_.each(list_name,function(v,k){"$distinct_id"!=k&&"$token"!=k&&($append[k]=v)}),callback=value):$append[list_name]=value,data[APPEND_ACTION]=$append,this._send_request(data,callback)},MixpanelPeople.prototype.track_charge=function(amount,properties,callback){return!_.isNumber(amount)&&(amount=parseFloat(amount),isNaN(amount))?(console.error("Invalid value passed to mixpanel.people.track_charge - must be a number"),void 0):this.append("$transactions",_.extend({$amount:amount},properties),callback)},MixpanelPeople.prototype.clear_charges=function(callback){return this.set("$transactions",[],callback)},MixpanelPeople.prototype.delete_user=function(){if(!this._identify_called())return console.error("mixpanel.people.delete_user() requires you to call identify() first"),void 0;var data={$delete:this._mixpanel.get_distinct_id()};return this._send_request(data)},MixpanelPeople.prototype.toString=function(){return this._mixpanel.toString()+".people"},MixpanelPeople.prototype._send_request=function(data,callback){data.$token=this._get_config("token"),data.$distinct_id=this._mixpanel.get_distinct_id();var date_encoded_data=_.encodeDates(data),truncated_data=_.truncate(date_encoded_data,255),json_data=_.JSONEncode(date_encoded_data),encoded_data=_.base64Encode(json_data);return this._identify_called()?(console.log("MIXPANEL PEOPLE REQUEST:"),console.log(truncated_data),this._mixpanel._send_request(this._get_config("api_host")+"/engage/",{data:encoded_data},this._mixpanel._prepare_callback(callback,truncated_data)),truncated_data):(this._enqueue(data),_.isUndefined(callback)||(this._get_config("verbose")?callback({status:-1,error:null}):callback(-1)),truncated_data)},MixpanelPeople.prototype._get_config=function(conf_var){return this._mixpanel.get_config(conf_var)},MixpanelPeople.prototype._identify_called=function(){return this._mixpanel._flags.identify_called===!0},MixpanelPeople.prototype._enqueue=function(data){SET_ACTION in data?this._mixpanel.cookie._add_to_people_queue(SET_ACTION,data):SET_ONCE_ACTION in data?this._mixpanel.cookie._add_to_people_queue(SET_ONCE_ACTION,data):ADD_ACTION in data?this._mixpanel.cookie._add_to_people_queue(ADD_ACTION,data):APPEND_ACTION in data?this._mixpanel.cookie._add_to_people_queue(APPEND_ACTION,data):console.error("Invalid call to _enqueue():",data)},MixpanelPeople.prototype._flush=function(_set_callback,_add_callback,_append_callback,_set_once_callback){var _this=this,$set_queue=_.extend({},this._mixpanel.cookie._get_queue(SET_ACTION)),$set_once_queue=_.extend({},this._mixpanel.cookie._get_queue(SET_ONCE_ACTION)),$add_queue=_.extend({},this._mixpanel.cookie._get_queue(ADD_ACTION)),$append_queue=this._mixpanel.cookie._get_queue(APPEND_ACTION);if(_.isUndefined($set_queue)||!_.isObject($set_queue)||_.isEmptyObject($set_queue)||(_this._mixpanel.cookie._pop_from_people_queue(SET_ACTION,$set_queue),this.set($set_queue,function(response,data){0==response&&_this._mixpanel.cookie._add_to_people_queue(SET_ACTION,$set_queue),_.isUndefined(_set_callback)||_set_callback(response,data)})),_.isUndefined($set_once_queue)||!_.isObject($set_once_queue)||_.isEmptyObject($set_once_queue)||(_this._mixpanel.cookie._pop_from_people_queue(SET_ONCE_ACTION,$set_once_queue),this.set_once($set_once_queue,function(response,data){0==response&&_this._mixpanel.cookie._add_to_people_queue(SET_ONCE_ACTION,$set_once_queue),_.isUndefined(_set_once_callback)||_set_once_callback(response,data)})),_.isUndefined($add_queue)||!_.isObject($add_queue)||_.isEmptyObject($add_queue)||(_this._mixpanel.cookie._pop_from_people_queue(ADD_ACTION,$add_queue),this.increment($add_queue,function(response,data){0==response&&_this._mixpanel.cookie._add_to_people_queue(ADD_ACTION,$add_queue),_.isUndefined(_add_callback)||_add_callback(response,data)})),!_.isUndefined($append_queue)&&_.isArray($append_queue)&&$append_queue.length){for(var i=$append_queue.length-1;i>=0;i--){var $append_item=$append_queue.pop();_this.append($append_item,function(response,data){0==response&&_this._mixpanel.cookie._add_to_people_queue(APPEND_ACTION,$append_item),_.isUndefined(_append_callback)||_append_callback(response,data)})}_this._mixpanel.cookie.save()}},_.toArray=_.toArray,_.isObject=_.isObject,_.JSONEncode=_.JSONEncode,_.JSONDecode=_.JSONDecode,_.isBlockedUA=_.isBlockedUA,_.isEmptyObject=_.isEmptyObject,_.info=_.info,_.info.device=_.info.device,_.info.browser=_.info.browser,MixpanelLib.prototype.init=MixpanelLib.prototype.init,MixpanelLib.prototype.disable=MixpanelLib.prototype.disable,MixpanelLib.prototype.track=MixpanelLib.prototype.track,MixpanelLib.prototype.track_links=MixpanelLib.prototype.track_links,MixpanelLib.prototype.track_forms=MixpanelLib.prototype.track_forms,MixpanelLib.prototype.track_pageview=MixpanelLib.prototype.track_pageview,MixpanelLib.prototype.register=MixpanelLib.prototype.register,MixpanelLib.prototype.register_once=MixpanelLib.prototype.register_once,MixpanelLib.prototype.unregister=MixpanelLib.prototype.unregister,MixpanelLib.prototype.identify=MixpanelLib.prototype.identify,MixpanelLib.prototype.alias=MixpanelLib.prototype.alias,MixpanelLib.prototype.name_tag=MixpanelLib.prototype.name_tag,MixpanelLib.prototype.set_config=MixpanelLib.prototype.set_config,MixpanelLib.prototype.get_config=MixpanelLib.prototype.get_config,MixpanelLib.prototype.get_property=MixpanelLib.prototype.get_property,MixpanelLib.prototype.get_distinct_id=MixpanelLib.prototype.get_distinct_id,MixpanelLib.prototype.toString=MixpanelLib.prototype.toString,MixpanelCookie.prototype.properties=MixpanelCookie.prototype.properties,MixpanelCookie.prototype.update_search_keyword=MixpanelCookie.prototype.update_search_keyword,MixpanelCookie.prototype.update_referrer_info=MixpanelCookie.prototype.update_referrer_info,MixpanelCookie.prototype.get_cross_subdomain=MixpanelCookie.prototype.get_cross_subdomain,MixpanelCookie.prototype.clear=MixpanelCookie.prototype.clear,MixpanelPeople.prototype.set=MixpanelPeople.prototype.set,MixpanelPeople.prototype.set_once=MixpanelPeople.prototype.set_once,MixpanelPeople.prototype.increment=MixpanelPeople.prototype.increment,MixpanelPeople.prototype.append=MixpanelPeople.prototype.append,MixpanelPeople.prototype.track_charge=MixpanelPeople.prototype.track_charge,MixpanelPeople.prototype.clear_charges=MixpanelPeople.prototype.clear_charges,MixpanelPeople.prototype.delete_user=MixpanelPeople.prototype.delete_user,MixpanelPeople.prototype.toString=MixpanelPeople.prototype.toString,_.isUndefined(mixpanel))return console.critical("'mixpanel' object not initialized. Ensure you are using the latest version of the Mixpanel JS Library along with the snippet we provide."),void 0;if(mixpanel.__loaded||mixpanel.config&&mixpanel.cookie)return console.error("Mixpanel library has already been downloaded at least once."),void 0;if(1.1>SNIPPET_VERSION)return console.critical("Version mismatch; please ensure you're using the latest version of the Mixpanel code snippet."),void 0;var instances={};_.each(mixpanel._i,function(item){var name,instance;item&&_.isArray(item)&&(name=item[item.length-1],instance=create_mplib.apply(this,item),instances[name]=instance)});var extend_mp=function(){_.each(instances,function(instance,name){name!==PRIMARY_INSTANCE_NAME&&(mixpanel[name]=instance)}),mixpanel._=_};if(mixpanel.init=function(token,config,name){if(name)mixpanel[name]||(mixpanel[name]=instances[name]=create_mplib(token,config,name),mixpanel[name]._loaded());else{var instance=mixpanel;instances[PRIMARY_INSTANCE_NAME]?instance=instances[PRIMARY_INSTANCE_NAME]:token&&(instance=create_mplib(token,config,PRIMARY_INSTANCE_NAME)),window[PRIMARY_INSTANCE_NAME]=mixpanel=instance,extend_mp()}},mixpanel.init(),_.each(instances,function(instance){instance._loaded()}),document.addEventListener)"complete"==document.readyState?dom_loaded_handler():document.addEventListener("DOMContentLoaded",dom_loaded_handler,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",dom_loaded_handler);var toplevel=!1;try{toplevel=null==window.frameElement}catch(e){}document.documentElement.doScroll&&toplevel&&do_scroll_check()}_.register_event(window,"load",dom_loaded_handler,!0)}(window.mixpanel);